<!--
Materials Informatics Player ---
in-browser ultra-fast and
lightweight renderer of the
crystallographic information files
(CIF format)
v250815
Author: Evgeny Blokhin
Web: http://tilde.pro
Email: eb@tilde.pro
License: MIT
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
<title></title>
<style>
body{margin:0;padding:0;overflow:hidden;background:#fff;}
html, body{height:100%;}
#infopanel{position:absolute;top:20px;left:20px;width:150px;height:150px;text-align:left;z-index:100;line-height:22px;font-family:Arial;font-size:0.75em;}
#zoompanel{position:absolute;top:28px;right:20px;width:50px;height:102px;z-index:100;background:no-repeat url(data:image/gif;base64,R0lGODlhMgBmAKEBAAAAAP///8zMzP///yH5BAEKAAMALAAAAAAyAGYAAAL+nI+py+0uopzi2UtzvhxNLHXWJ4YiY55Gqg6sRzVvNx+bHKk5FPNV+cOReMBR77EzgoY+0LK2SOI4N2MQdfVBo9mEFHlUTqlhcNd2xjLFXLTmDWd+Ye64vepK5+v3/nWOxudnR4clOAhX2Ea2Bjb2BPioEMnVSGTIuDVJqQljiSmpRblpBqnnNZp3Kki2ZNW5khq7qgoL62bW+akmunqLqocHLFvZctiyq1VLu/m7zKcj7DlTljmoRoyd2Gs8zczaHb78La6dXd6cjC6kvl7p7D4LH19LH21cbT+8rT/+fk7jVruA5DyVm2ewG8BQAd0t3BMPIMJSrexle9iQjcWCVBiLXOoHkSG9LR1PcCqoMFgQRH4UkZLHkl/Il+Ni4jl5yKYclTl1SsEJ0+dOkRuJjlSJMtqpkow+9uPIlKLTo7QmWmkaUWJSqU/QDRwmLt+rlGJzoYxRlh2xKmnVvniTbmvNOGrDETIr12tbkP749sobVprfY4P/Aba7F+RXxT8KAAA7);}
#dpanel{position:absolute;top:134px;right:20px;width:50px;height:50px;z-index:100;background:no-repeat url(data:image/gif;base64,R0lGODlhMgAyAIABAMzMzAAAACH5BAEKAAEALAAAAAAyADIAAAKtjI+py+0Po5y02nuB3rz731HgSIJTiaKnhjXbCrTMK9FyYkP5bey85fuJWLUSJjgzZogR1TJWJB2ZOiWQ+nBeoU1rBbnQfrEO8ZBblT5hoykakUp134e4OUnv2dVZcn3/EVUGyAHTR3iWZjeWp7C3FeVlGGmyxuZxyEcJpieZ1ckJWrkCOjc66RfWBsmIaXkW4rZV2BKqSlubOmirSMjb6yvki/sz3CiEnKxsUAAAOw==);}
#optionpanel{position:absolute;bottom:2px;left:0;width:100%;height:30px;z-index:500;text-align:center;font-family:Arial;font-size:1.33em;}
#landing{position:absolute;left:0;top:0;right:0;bottom:0;height:auto;margin:50px;border:10px #eee dashed;text-align:center;font-family:Verdana;font-size:2.05em;color:#ddd;letter-spacing:-1px;padding:25px;font-weight:bold;line-height:1.05em;}
#landing a{color:#ddd;font-size:0.9em;}
</style>
</head>
<body>
<script type="text/javascript">
/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details
*/
'use strict';var player=function(J){function G(w){if(P[w])return P[w].exports;var l=P[w]={exports:{},id:w,loaded:!1};J[w].call(l.exports,l,l.exports,G);l.loaded=!0;return l.exports}var P={};G.m=J;G.c=P;G.p="";return G(0)}([function(J,G,P){!function(){var w=[P(1),P(2),P(3),P(4),P(5)];(function(l,h,r,c,a){function b(a){for(var b=[0,0,1],d=[1,0,0],b=c.divide(b,c.norm(b)),d=c.subtract(d,c.multiply(c.dot(d,b),b)),d=c.divide(d,c.norm(d)),e=c.cross(b,d),f=a.cell.alpha*Math.PI/180,k=a.cell.beta*Math.PI/180,
g=a.cell.gamma*Math.PI/180,m=a.cell.b,n=a.cell.c,q=c.multiply(a.cell.a,[1,0,0]),m=c.multiply(m,[c.cos(g),c.sin(g),0]),u=c.cos(k),f=c.divide(c.subtract(c.cos(f),c.multiply(c.cos(k),c.cos(g))),c.sin(g)),k=c.sqrt(c.subtract(c.subtract(1,c.multiply(u,u)),c.multiply(f,f))),n=c.multiply(n,[u,f,k]),q=c.dotMultiply([q,m,n],[d,e,b]),e=[],d=a.atoms.length,b=0;b<d;b++)e.push([a.atoms[b].x,a.atoms[b].y,a.atoms[b].z]);e=c.multiply(e,q);q={atoms:[],cell:q,descr:a.cell,overlayed:null};d=a.atoms.length;for(b=0;b<
d;b++)n=h.JmolColors[a.atoms[b].symbol]?h.JmolColors[a.atoms[b].symbol]:"0xffff00",m=h.AseRadii[a.atoms[b].symbol]?h.AseRadii[a.atoms[b].symbol]:.66,q.atoms.push({x:e[b][0],y:e[b][1],z:e[b][2],c:n,r:m,overlays:{S:a.atoms[b].symbol,N:b+1}});return q}function d(a){var d=[];a=a.split("\n");for(var c={cell:{},atoms:[]},e=!1,f=0,k=[],g=[],k=!1,m="a b c alpha beta gamma".split(" "),n=["_atom_site_label","_atom_site_type_symbol","_atom_site_fract_x","_atom_site_fract_y","_atom_site_fract_z"],q=["label",
"symbol","x","y","z"],u=[],p=a.length,f=0;f<p;f++)if(!a[f].startswith("#"))if(a[f]=a[f].toLowerCase().trim(),a[f]){k=!1;if(a[f].startswith("data_"))k=!0,e=!1,u=[];else if(a[f].startswith("_cell_")){e=!1;u=[];k=a[f].split(" ");g=k[0].split("_");g=g[g.length-1];-1!==m.indexOf(g)&&k[k.length-1]&&(c.cell[g]=parseFloat(k[k.length-1]));continue}else if(a[f].startswith("_symmetry_")){e=!1;u=[];continue}else if(a[f].startswith("loop_")){e=!0;u=[];continue}if(e)if(a[f].startswith("_"))u.push(a[f]);else{var g=
{},k=a[f].replace(/\t/g," ").split(" ").filter(function(a){return a?!0:!1}),s,t=u.length;for(s=0;s<t;s++){var x=n.indexOf(u[s]);-1!==x&&k[s]&&(-1!==["x","y","z"].indexOf(q[x])?k[s]=parseFloat(k[s]):k[s]=k[s].charAt(0).toUpperCase()+k[s].slice(1),g[q[x]]=k[s])}void 0!==g.x&&void 0!==g.y&&void 0!==g.z&&(!g.symbol&&g.label&&(g.symbol=g.label.replace(/[0-9]/g,"")),!h.JmolColors[g.symbol]&&2<g.symbol.length&&(g.symbol=g.symbol.substr(0,g.symbol.length-1)),!h.JmolColors[g.symbol]&&1<g.symbol.length&&(g.symbol=
g.symbol.substr(0,g.symbol.length-1)),g.symbol&&c.atoms.push(g))}else k&&c.atoms.length&&(d.push(c),c={cell:{},atoms:[]})}else e=!1,u=[];c.atoms.length&&d.push(c);return d.length?b(d[d.length-1]):!1}function e(a,b,d){d||(d=15658734);var c=new D.Geometry;c.vertices.push(new D.Vector3(a[0],a[1],a[2]));c.vertices.push(new D.Vector3(b[0],b[1],b[2]));a=new D.LineBasicMaterial({color:d});v.atombox.add(new D.Line(c,a))}function f(a){var b=document.createElement("canvas"),d=b.getContext("2d"),c=3.5*d.measureText(a).width;
b.width=c;b.height=32;d.font="normal 32px Arial";d.textAlign="center";d.textBaseline="middle";d.fillStyle="#000000";d.fillText(a,b.width/2,b.height/2);a=new D.Texture(b);a.needsUpdate=!0;a=new D.SpriteMaterial({map:a,useScreenCoordinates:!1});a=new D.Sprite(a);b=new D.Object3D;a.scale.set(c,32,1);b.add(a);b.name="label";return b}function g(){var a=v.scene.getObjectByName("atoms3d");a&&v.scene.remove(a);v.atombox=new D.Object3D;var a=v.obj3d.descr,b=document.getElementById("infopanel");b&&b.parentNode.removeChild(b);
b=document.createElement("div");b.setAttribute("id","infopanel");b.innerHTML="<span style=color:#900>a = "+a.a+" &#8491;</span><br /><span style=color:#090>b = "+a.b+" &#8491;</span><br /><span style=color:#009>c = "+a.c+" &#8491;</span><br />&#945; = "+a.alpha+"&deg;<br />&#946; = "+a.beta+"&deg;<br />&#947; = "+a.gamma+"&deg;<br />";document.body.appendChild(b);(b=document.getElementById("optionpanel"))&&b.parentNode.removeChild(b);a=document.createElement("div");a.setAttribute("id","optionpanel");
a.innerHTML="<input type=radio name=optionpanel id=optionpanel_none /><label for=optionpanel_none>none</label>";a.innerHTML+=" <input type=radio name=optionpanel id=optionpanel_S checked=checked /><label for=optionpanel_S>chemical elements</label>";a.innerHTML+=" <input type=radio name=optionpanel id=optionpanel_N /><label for=optionpanel_N>id's</label>";if(v.obj3d.overlayed)for(var d in v.obj3d.overlayed)a.innerHTML+=" <input type=radio name=optionpanel id=optionpanel_"+d+" /><label for=optionpanel_"+
d+">"+v.obj3d.overlayed[d]+"</label>";document.body.appendChild(a);a.onclick=function(a){a=a||window.event;v.current_overlay=(a.target||a.srcElement).id.replace("optionpanel_","");var b=v.scene.getObjectByName("atoms3d"),b=b.children,d=b.filter(function(a){return"label"==a.name}),c=d.length;for(a=0;a<c;a++)v.atombox.remove(d[a]),v.scene.remove(d[a]);if(-1!==v.available_overlays.indexOf(v.current_overlay))for(b=b.filter(function(a){return"atom"==a.name}),c=b.length,a=0;a<c;a++)d=f(b[a].overlays[v.current_overlay]),
d.position.set(b[a].position.x,b[a].position.y,b[a].position.z),v.atombox.add(d);v.renderer.render(v.scene,v.camera)};v.current_overlay="S";var c;d={w:6,h:6};a={w:10,h:8};50<v.obj3d.atoms.length?c=d:c=a;a=v.obj3d.atoms.length;for(d=0;d<a;d++){var b=parseInt(100*v.obj3d.atoms[d].x),g=parseInt(100*v.obj3d.atoms[d].y),k=parseInt(100*v.obj3d.atoms[d].z),n=new D.Mesh(new D.SphereBufferGeometry(65*v.obj3d.atoms[d].r,c.w,c.h),new D.MeshLambertMaterial({color:v.obj3d.atoms[d].c,shading:D.FlatShading,overdraw:.25}));
n.position.set(b,g,k);n.name="atom";n.overlays=v.obj3d.atoms[d].overlays;v.atombox.add(n);n=f(n.overlays[v.current_overlay]);n.position.set(b,g,k);v.atombox.add(n)}if(v.obj3d.cell.length){var q;c=[];for(d=0;3>d;d++)a=Math.round(1E3*parseFloat(v.obj3d.cell[d][0]))/10,b=Math.round(1E3*parseFloat(v.obj3d.cell[d][1]))/10,g=Math.round(1E3*parseFloat(v.obj3d.cell[d][2]))/10,c.push([a,b,g]),k=new D.Geometry,k.vertices.push(new D.Vector3(0,0,0)),k.vertices.push(new D.Vector3(a,b,g)),0==d&&(q=10027008),1==
d&&(q=39168),2==d&&(q=153),v.atombox.add(new D.Line(k,new D.LineBasicMaterial({color:q})));new D.LineBasicMaterial({color:13421772});d=[c[0][0]+c[1][0],c[0][1]+c[1][1],c[0][2]+c[1][2]];a=[c[0][0]+c[2][0],c[0][1]+c[2][1],c[0][2]+c[2][2]];b=[d[0]+c[2][0],d[1]+c[2][1],d[2]+c[2][2]];g=[c[1][0]+c[2][0],c[1][1]+c[2][1],c[1][2]+c[2][2]];q=[];q.push([c[0],d]);q.push([c[0],a]);q.push([c[1],g]);q.push([c[1],d]);q.push([c[2],g]);q.push([c[2],a]);q.push([d,b]);q.push([a,b]);q.push([b,g]);a=q.length;for(d=0;d<
a;d++)e(q[d][0],q[d][1])}v.atombox.name="atoms3d";v.scene.add(v.atombox);m()}function k(){v.loaded=!0;v.container=document.createElement("div");v.container.style.backgroundColor="#ffffff";document.body.appendChild(v.container);v.scene=new D.Scene;v.camera=new D.OrthographicCamera(1.5*-window.innerWidth,1.5*window.innerWidth,1.5*-window.innerHeight,1.5*window.innerHeight,-2E3,2E3);v.camera.position.set(0,0,1);var a=new D.AmbientLight(10066329);v.scene.add(a);a=new D.PointLight(6710886,1);a.position.set(500,
500,500);v.scene.add(a);v.renderer=new D.CanvasRenderer;v.renderer.setClearColor(16777215,1);v.renderer.setSize(window.innerWidth,window.innerHeight);v.container.appendChild(v.renderer.domElement);a=document.createElement("div");a.setAttribute("id","zoompanel");document.body.appendChild(a);a.onclick=function(a){a=a||window.event;a.cancelBubble?a.cancelBubble=!0:(a.stopPropagation(),a.preventDefault());a=333*(79<(a.pageY?a.pageY:a.clientY)?-1:1);var b=window.innerHeight/window.innerWidth;v.camera.left+=
a;v.camera.right-=a;v.camera.top+=a*b;v.camera.bottom-=a*b;v.camera.updateProjectionMatrix()};v.controls=new D.OrthographicTrackballControls(v.camera);v.controls.staticMoving=!0;g()}function m(){requestAnimationFrame(m);v.renderer.render(v.scene,v.camera);v.controls.update()}function u(){var a=document.location.hash.substr(1);if(-1==a.indexOf("://"))return alert("Error: not a valid url!");n(a)}function p(){if(window.parent&&window.parent.cifdata)W(window.parent.cifdata,!1);else if(window.FileReader){var a=
document.getElementById("landing");a&&a.parentNode.removeChild(a);a=document.createElement("div");a.setAttribute("id","landing");a.innerHTML="Please drag & drop a CIF file here<br>or <a href=/ id=play_demo>display example</a>.";document.body.appendChild(a);document.getElementById("play_demo").onclick=s}else s()}function s(a){a=a||window.event;a.cancelBubble?a.cancelBubble=!0:(a.stopPropagation(),a.preventDefault());W(v.sample,!1)}function q(){var a=document.location.hash.substr(1);-1!=a.indexOf("://")&&
window.open(a,"d_"+Math.random())}function n(a){var b=document.createElement("a");b.href=a;b.hostname!==window.location.hostname&&(a=v.webproxy+"?url="+a);var d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.onreadystatechange=function(){4==d.readyState&&(200==d.status?W(d.responseText,!0):(alert("Error: HTTP "+d.status+" status received during retrieving data from the server"),v.loaded||p()))};d.open("GET",a);d.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT");
d.send(1)}function W(a,b){var c=document.getElementById("dpanel");c&&(c.style.display="none");if(-1<a.indexOf("_cell_angle_gamma ")){var e=d(a);if(!e)return alert("Error: the file has invalid format!")}else return alert("Error: the file format is not supported!");v.obj3d=e;(e=document.getElementById("landing"))&&e.parentNode.removeChild(e);b&&(c?c.style.display="block":(c=document.createElement("div"),c.setAttribute("id","dpanel"),document.body.appendChild(c),c.onclick=q));v.loaded?g():k()}function t(a){a.stopPropagation();
a.preventDefault();if(1<a.dataTransfer.files.length)return alert("Error: only one file at the time may be rendered!");a=a.dataTransfer.files[0];if(!a||!a.size)return alert("Error: file cannot be read (unaccessible?)");var b=new FileReader;b.onloadend=function(a){W(a.target.result,!1)};b.abort=function(){alert("Error: file reading has been cancelled!")};b.onerror=function(a){alert("Error: file reading has been cancelled: "+a.target.error.name)};b.readAsText(a)}function x(a){a.stopPropagation();a.preventDefault();
a.dataTransfer.dropEffect="copy"}var v={version:"0.10.1",loaded:!1,container:null,stats:null,camera:null,scene:null,renderer:null,controls:null,atombox:null,available_overlays:["S","N"],current_overlay:"S",obj3d:!1,webproxy:"proxy.php",sample:"data_global\n_cell_length_a 24\n_cell_length_b 5.91\n_cell_length_c 5.85\n_cell_angle_alpha 90\n_cell_angle_beta 90\n_cell_angle_gamma 90\n_symmetry_space_group_name_H-M 'P1'\nloop_\n_symmetry_equiv_pos_as_xyz\nx,y,z\nloop_\n_atom_site_label\n_atom_site_type_symbol\n_atom_site_fract_x\n_atom_site_fract_y\n_atom_site_fract_z\nO1 O 0.425 0.262 0.009\nO2 O -0.425 0.262 0.009\nH3 H 0.444 0.258 0.154\nH4 H -0.444 0.258 0.154\nH5 H 0.396 0.124 0.012\nH6 H -0.396 0.124 0.012\nO7 O 0.425 0.236 0.510\nO8 O -0.425 0.236 0.510\nH9 H 0.444 0.239 0.656\nH10 H -0.444 0.239 0.656\nH11 H 0.396 0.374 0.512\nH12 H -0.396 0.374 0.512\nSr13 Sr 0.342 0.964 0.467\nSr14 Sr -0.342 0.964 0.467\nSr15 Sr 0.342 0.535 0.967\nSr16 Sr -0.342 0.535 0.967\nO17 O 0.348 0.971 0.019\nO18 O -0.348 0.971 0.019\nO19 O 0.348 0.528 0.519\nO20 O -0.348 0.528 0.519\nO21 O 0.263 0.803 0.701\nO22 O -0.263 0.803 0.701\nO23 O 0.264 0.695 0.200\nO24 O -0.264 0.695 0.200\nZr25 Zr 0.261 0.000 0.998\nZr26 Zr -0.261 0.000 0.998\nZr27 Zr 0.261 0.499 0.498\nZr28 Zr -0.261 0.499 0.498\nO29 O 0.257 0.304 0.806\nO30 O -0.257 0.304 0.806\nO31 O 0.257 0.195 0.306\nO32 O -0.257 0.195 0.306\nSr33 Sr 0.173 0.993 0.524\nSr34 Sr -0.173 0.993 0.524\nSr35 Sr 0.173 0.506 0.024\nSr36 Sr -0.173 0.506 0.024\nO37 O 0.173 0.947 0.986\nO38 O -0.173 0.947 0.986\nO39 O 0.173 0.551 0.486\nO40 O -0.173 0.551 0.486\nO41 O 0.098 0.204 0.295\nO42 O -0.098 0.204 0.295\nO43 O 0.098 0.295 0.795\nO44 O -0.098 0.295 0.795\nZr45 Zr 0.086 0.004 0.998\nZr46 Zr -0.086 0.004 0.998\nZr47 Zr 0.086 0.495 0.498\nZr48 Zr -0.086 0.495 0.498\nO49 O 0.074 0.709 0.211\nO50 O -0.074 0.709 0.211\nO51 O 0.074 0.790 0.711\nO52 O -0.074 0.790 0.711\nSr53 Sr 0 0.991 0.467\nSr54 Sr 0 0.508 0.967\nO55 O 0 0.076 0.020\nO56 O 0 0.423 0.520"},
D=r.THREE||r;a(function(){window.addEventListener("hashchange",u,!1);window.FileReader&&(window.addEventListener("dragover",x,!1),window.addEventListener("drop",t,!1));document.location.hash.length?u():p()})}).apply(null,w)}()},function(J,G,P){var w;!(w=function(){String.prototype.startswith=function(l){return 0===this.indexOf(l)};String.prototype.endswith=function(l,h){var r=this.toString();if(void 0===h||h>r.length)h=r.length;h-=l.length;r=r.indexOf(l,h);return-1!==r&&r===h};String.prototype.trim=
function(){return this.replace(/^\s+|\s+$/g,"")};Object.keys||(Object.keys=function(){var l=Object.prototype.hasOwnProperty,h=!{toString:null}.propertyIsEnumerable("toString"),r="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),c=r.length;return function(a){if("object"!==typeof a&&("function"!==typeof a||null===a))throw new TypeError("Object.keys called on non-object");var b=[],d;for(d in a)l.call(a,d)&&b.push(d);if(h)for(d=0;d<c;d++)l.call(a,
r[d])&&b.push(r[d]);return b}}())}.call(G,P,G,J),void 0!==w&&(J.exports=w))},function(J,G,P){var w;!(w={JmolColors:{D:"#FFFFC0",H:"#FFFFFF",He:"#D9FFFF",Li:"#CC80FF",Be:"#C2FF00",B:"#FFB5B5",C:"#909090",N:"#3050F8",O:"#FF0D0D",F:"#90E050",Ne:"#B3E3F5",Na:"#AB5CF2",Mg:"#8AFF00",Al:"#BFA6A6",Si:"#F0C8A0",P:"#FF8000",S:"#FFFF30",Cl:"#1FF01F",Ar:"#80D1E3",K:"#8F40D4",Ca:"#3DFF00",Sc:"#E6E6E6",Ti:"#BFC2C7",V:"#A6A6AB",Cr:"#8A99C7",Mn:"#9C7AC7",Fe:"#E06633",Co:"#F090A0",Ni:"#50D050",Cu:"#C88033",Zn:"#7D80B0",
Ga:"#C28F8F",Ge:"#668F8F",As:"#BD80E3",Se:"#FFA100",Br:"#A62929",Kr:"#5CB8D1",Rb:"#702EB0",Sr:"#00FF00",Y:"#94FFFF",Zr:"#94E0E0",Nb:"#73C2C9",Mo:"#54B5B5",Tc:"#3B9E9E",Ru:"#248F8F",Rh:"#0A7D8C",Pd:"#006985",Ag:"#C0C0C0",Cd:"#FFD98F",In:"#A67573",Sn:"#668080",Sb:"#9E63B5",Te:"#D47A00",I:"#940094",Xe:"#429EB0",Cs:"#57178F",Ba:"#00C900",La:"#70D4FF",Ce:"#FFFFC7",Pr:"#D9FFC7",Nd:"#C7FFC7",Pm:"#A3FFC7",Sm:"#8FFFC7",Eu:"#61FFC7",Gd:"#45FFC7",Tb:"#30FFC7",Dy:"#1FFFC7",Ho:"#00FF9C",Er:"#00E675",Tm:"#00D452",
Yb:"#00BF38",Lu:"#00AB24",Hf:"#4DC2FF",Ta:"#4DA6FF",W:"#2194D6",Re:"#267DAB",Os:"#266696",Ir:"#175487",Pt:"#D0D0E0",Au:"#FFD123",Hg:"#B8B8D0",Tl:"#A6544D",Pb:"#575961",Bi:"#9E4FB5",Po:"#AB5C00",At:"#754F45",Rn:"#428296",Fr:"#420066",Ra:"#007D00",Ac:"#70ABFA",Th:"#00BAFF",Pa:"#00A1FF",U:"#008FFF",Np:"#0080FF",Pu:"#006BFF",Am:"#545CF2",Cm:"#785CE3",Bk:"#8A4FE3",Cf:"#A136D4",Es:"#B31FD4",Fm:"#B31FBA",Md:"#B30DA6",No:"#BD0D87",Lr:"#C70066",Rf:"#CC0059",Db:"#D1004F",Sg:"#D90045",Bh:"#E00038",Hs:"#E6002E",
Mt:"#EB0026"},AseRadii:{X:.66,H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.39,Fe:1.32,Co:1.26,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,
Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.87,Hf:1.75,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69,Bk:3,Cf:3,Es:3,Fm:3,Md:3,No:3,Lr:3,Rf:3,Db:3,Sg:3,Bh:3,Hs:3,Mt:3}},void 0!==w&&(J.exports=w))},function(J,G,P){var w,l,h;(function(r,c){!(l=[G],w=c,h="function"===typeof w?w.apply(G,l):w,void 0!==h&&(J.exports=h))})(this,function(l){var c={REVISION:"72dev"};
!(w=c,h="function"===typeof w?w.call(l,P,l,J):w,void 0!==h&&(J.exports=h));(function(){for(var a=0,b=["ms","moz","webkit","o"],d=0;d<b.length&&!self.requestAnimationFrame;++d)self.requestAnimationFrame=self[b[d]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[d]+"CancelAnimationFrame"]||self[b[d]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var d=Date.now(),c=Math.max(0,16-(d-a)),k=self.setTimeout(function(){b(d+
c)},c);a=d+c;return k});void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})})();void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});c.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};c.CullFaceNone=0;c.CullFaceBack=1;c.CullFaceFront=2;
c.CullFaceFrontBack=3;c.FrontFaceDirectionCW=0;c.FrontFaceDirectionCCW=1;c.BasicShadowMap=0;c.PCFShadowMap=1;c.PCFSoftShadowMap=2;c.FrontSide=0;c.BackSide=1;c.DoubleSide=2;c.NoShading=0;c.FlatShading=1;c.SmoothShading=2;c.NoColors=0;c.FaceColors=1;c.VertexColors=2;c.NoBlending=0;c.NormalBlending=1;c.AdditiveBlending=2;c.SubtractiveBlending=3;c.MultiplyBlending=4;c.CustomBlending=5;c.AddEquation=100;c.SubtractEquation=101;c.ReverseSubtractEquation=102;c.MinEquation=103;c.MaxEquation=104;c.ZeroFactor=
200;c.OneFactor=201;c.SrcColorFactor=202;c.OneMinusSrcColorFactor=203;c.SrcAlphaFactor=204;c.OneMinusSrcAlphaFactor=205;c.DstAlphaFactor=206;c.OneMinusDstAlphaFactor=207;c.DstColorFactor=208;c.OneMinusDstColorFactor=209;c.SrcAlphaSaturateFactor=210;c.NeverDepth=0;c.AlwaysDepth=1;c.LessDepth=2;c.LessEqualDepth=3;c.EqualDepth=4;c.GreaterEqualDepth=5;c.GreaterDepth=6;c.NotEqualDepth=7;c.MultiplyOperation=0;c.MixOperation=1;c.AddOperation=2;c.UVMapping=300;c.CubeReflectionMapping=301;c.CubeRefractionMapping=
302;c.EquirectangularReflectionMapping=303;c.EquirectangularRefractionMapping=304;c.SphericalReflectionMapping=305;c.RepeatWrapping=1E3;c.ClampToEdgeWrapping=1001;c.MirroredRepeatWrapping=1002;c.NearestFilter=1003;c.NearestMipMapNearestFilter=1004;c.NearestMipMapLinearFilter=1005;c.LinearFilter=1006;c.LinearMipMapNearestFilter=1007;c.LinearMipMapLinearFilter=1008;c.UnsignedByteType=1009;c.ByteType=1010;c.ShortType=1011;c.UnsignedShortType=1012;c.IntType=1013;c.UnsignedIntType=1014;c.FloatType=1015;
c.HalfFloatType=1025;c.UnsignedShort4444Type=1016;c.UnsignedShort5551Type=1017;c.UnsignedShort565Type=1018;c.AlphaFormat=1019;c.RGBFormat=1020;c.RGBAFormat=1021;c.LuminanceFormat=1022;c.LuminanceAlphaFormat=1023;c.RGBEFormat=c.RGBAFormat;c.RGB_S3TC_DXT1_Format=2001;c.RGBA_S3TC_DXT1_Format=2002;c.RGBA_S3TC_DXT3_Format=2003;c.RGBA_S3TC_DXT5_Format=2004;c.RGB_PVRTC_4BPPV1_Format=2100;c.RGB_PVRTC_2BPPV1_Format=2101;c.RGBA_PVRTC_4BPPV1_Format=2102;c.RGBA_PVRTC_2BPPV1_Format=2103;c.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");
this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};c.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=
document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};c.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)};c.Color.prototype={constructor:c.Color,r:1,g:1,b:1,set:function(a){a instanceof c.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=
(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,d){this.r=a;this.g=b;this.b=d;return this},setHSL:function(){function a(a,d,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(d-a)*c:.5>c?d:c<2/3?a+6*(d-a)*(2/3-c):a}return function(b,d,e){b=c.Math.euclideanModulo(b,1);d=c.Math.clamp(d,0,1);e=c.Math.clamp(e,0,1);0===d?this.r=this.g=this.b=e:(d=.5>=e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,b+1/3),this.g=a(e,d,b),this.b=a(e,d,b-1/3));return this}}(),setStyle:function(a){var b=function(b){b=
parseFloat(b);1>b&&console.warn("THREE.Color: Alpha component of color "+a+" will be ignored.");return b},d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var e=d[2];switch(d[1]){case "rgb":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/.exec(e))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(e))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,
parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,this;break;case "rgba":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(e))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,b(d[4]),this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(e))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,
parseInt(d[3],10))/100,b(d[4]),this;break;case "hsl":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(e)){var e=parseFloat(d[1]),f=parseInt(d[2],10)/100,g=parseInt(d[3],10)/100;return this.setHSL(e,f,g)}break;case "hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(e))return e=parseFloat(d[1]),f=parseInt(d[2],10)/100,g=parseInt(d[3],10)/100,b(d[4]),this.setHSL(e,f,g)}}else if(d=/^\#([A-Fa-f0-9]+)$/.exec(a)){b=d[1];d=b.length;if(3===d)return this.r=
parseInt(b.charAt(0)+b.charAt(0),16)/255,this.g=parseInt(b.charAt(1)+b.charAt(1),16)/255,this.b=parseInt(b.charAt(2)+b.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(b.charAt(0)+b.charAt(1),16)/255,this.g=parseInt(b.charAt(2)+b.charAt(3),16)/255,this.b=parseInt(b.charAt(4)+b.charAt(5),16)/255,this}a&&0<a.length&&(b=c.ColorKeywords[a],void 0!==b?this.setHex(b):console.warn("THREE.Color: Unknown color "+a));return this},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,
b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var d=0<b?1/b:1;this.r=Math.pow(a.r,d);this.g=Math.pow(a.g,d);this.b=Math.pow(a.b,d);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,d=this.b;this.r=a*a;this.g=b*b;this.b=d*d;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*
this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,d=this.g,c=this.b,f=Math.max(b,d,c),g=Math.min(b,d,c),k,m=(g+f)/2;if(g===f)g=k=0;else{var u=f-g,g=.5>=m?u/(f+g):u/(2-f-g);switch(f){case b:k=(d-c)/u+(d<c?6:0);break;case d:k=(c-b)/u+2;break;case c:k=(b-d)/u+4}k/=6}a.h=k;a.s=g;a.l=m;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},
offsetHSL:function(a,b,d){var c=this.getHSL();c.h+=a;c.s+=b;c.l+=d;this.setHSL(c.h,c.s,c.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=
(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},clone:function(){return(new c.Color).copy(this)}};c.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,
blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,
darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,
lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c.Quaternion=function(a,b,d,c){this._x=
a||0;this._y=b||0;this._z=d||0;this._w=void 0!==c?c:1};c.Quaternion.prototype={constructor:c.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,d,c){this._x=a;this._y=b;this._z=d;this._w=c;this.onChangeCallback();return this},copy:function(a){this._x=a.x;
this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof c.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var d=Math.cos(a._x/2),e=Math.cos(a._y/2),f=Math.cos(a._z/2),g=Math.sin(a._x/2),k=Math.sin(a._y/2),m=Math.sin(a._z/2);"XYZ"===a.order?(this._x=g*e*f+d*k*m,this._y=d*k*f-g*e*m,this._z=d*e*m+g*k*f,this._w=d*e*f-g*k*m):"YXZ"===a.order?(this._x=g*e*f+d*k*m,this._y=
d*k*f-g*e*m,this._z=d*e*m-g*k*f,this._w=d*e*f+g*k*m):"ZXY"===a.order?(this._x=g*e*f-d*k*m,this._y=d*k*f+g*e*m,this._z=d*e*m+g*k*f,this._w=d*e*f-g*k*m):"ZYX"===a.order?(this._x=g*e*f-d*k*m,this._y=d*k*f+g*e*m,this._z=d*e*m-g*k*f,this._w=d*e*f+g*k*m):"YZX"===a.order?(this._x=g*e*f+d*k*m,this._y=d*k*f+g*e*m,this._z=d*e*m-g*k*f,this._w=d*e*f-g*k*m):"XZY"===a.order&&(this._x=g*e*f-d*k*m,this._y=d*k*f-g*e*m,this._z=d*e*m+g*k*f,this._w=d*e*f+g*k*m);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var d=b/2,c=Math.sin(d);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(d);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,d=b[0];a=b[4];var c=b[8],f=b[1],g=b[5],k=b[9],m=b[2],u=b[6],b=b[10],p=d+g+b;0<p?(d=.5/Math.sqrt(p+1),this._w=.25/d,this._x=(u-k)*d,this._y=(c-m)*d,this._z=(f-a)*d):d>g&&d>b?(d=2*Math.sqrt(1+d-g-b),this._w=(u-k)/d,this._x=.25*d,this._y=(a+f)/d,this._z=(c+m)/d):g>b?(d=2*Math.sqrt(1+g-d-b),this._w=(c-m)/d,this._x=(a+f)/d,this._y=
.25*d,this._z=(k+u)/d):(d=2*Math.sqrt(1+b-d-g),this._w=(f-a)/d,this._x=(c+m)/d,this._y=(k+u)/d,this._z=.25*d);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector3);b=d.dot(e)+1;1E-6>b?(b=0,Math.abs(d.x)>Math.abs(d.z)?a.set(-d.y,d.x,0):a.set(0,-d.z,d.y)):a.crossVectors(d,e);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var d=a._x,c=a._y,f=a._z,g=a._w,k=b._x,m=b._y,u=b._z,p=b._w;this._x=d*p+g*k+c*u-f*m;this._y=c*p+g*m+f*k-d*u;this._z=f*p+g*u+d*m-c*k;this._w=g*p-d*k-c*m-f*u;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var d=this._x,c=this._y,f=this._z,g=this._w,k=g*a._w+d*a._x+c*a._y+f*a._z;0>k?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,k=-k):this.copy(a);if(1<=k)return this._w=g,this._x=d,this._y=c,this._z=f,this;var m=Math.acos(k),u=Math.sqrt(1-k*k);if(.001>Math.abs(u))return this._w=.5*(g+this._w),this._x=.5*(d+this._x),this._y=.5*(c+this._y),this._z=.5*(f+this._z),this;k=Math.sin((1-b)*m)/u;m=
Math.sin(b*m)/u;this._w=g*k+this._w*m;this._x=d*k+this._x*m;this._y=c*k+this._y*m;this._z=f*k+this._z*m;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){},clone:function(){return new c.Quaternion(this._x,this._y,this._z,this._w)}};c.Quaternion.slerp=function(a,b,d,c){return d.copy(a).slerp(b,c)};c.Vector2=function(a,b){this.x=a||0;this.y=b||0};c.Vector2.prototype={constructor:c.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+
a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},
addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},
divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector2,
b=new c.Vector2);a.set(d,d);b.set(e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},
dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/
b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,d){this.subVectors(b,a).multiplyScalar(d).add(a);return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,d){void 0===d&&(d=0);b=b*a.itemSize+d;this.x=a.array[b];this.y=
a.array[b+1];return this},clone:function(){return new c.Vector2(this.x,this.y)}};c.Vector3=function(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0};c.Vector3.prototype={constructor:c.Vector3,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+
a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,
b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},
multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof c.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");
void 0===a&&(a=new c.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,d){void 0===a&&(a=new c.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,d));return this}}(),applyMatrix3:function(a){var b=this.x,d=this.y,c=this.z;a=a.elements;this.x=a[0]*b+a[3]*d+a[6]*c;this.y=a[1]*b+a[4]*d+a[7]*c;this.z=a[2]*b+a[5]*d+a[8]*c;return this},applyMatrix4:function(a){var b=this.x,d=this.y,c=this.z;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*c+a[12];
this.y=a[1]*b+a[5]*d+a[9]*c+a[13];this.z=a[2]*b+a[6]*d+a[10]*c+a[14];return this},applyProjection:function(a){var b=this.x,d=this.y,c=this.z;a=a.elements;var f=1/(a[3]*b+a[7]*d+a[11]*c+a[15]);this.x=(a[0]*b+a[4]*d+a[8]*c+a[12])*f;this.y=(a[1]*b+a[5]*d+a[9]*c+a[13])*f;this.z=(a[2]*b+a[6]*d+a[10]*c+a[14])*f;return this},applyQuaternion:function(a){var b=this.x,d=this.y,c=this.z,f=a.x,g=a.y,k=a.z;a=a.w;var m=a*b+g*c-k*d,u=a*d+k*b-f*c,p=a*c+f*d-g*b,b=-f*b-g*d-k*c;this.x=m*a+b*-f+u*-k-p*-g;this.y=u*a+
b*-g+p*-f-m*-k;this.z=p*a+b*-k+m*-g-u*-f;return this},project:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,d=this.y,c=this.z;a=a.elements;this.x=a[0]*b+a[4]*
d+a[8]*c;this.y=a[1]*b+a[5]*d+a[9]*c;this.z=a[2]*b+a[6]*d+a[10]*c;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<
a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},clampScalar:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector3,b=new c.Vector3);a.set(d,d,d);b.set(e,e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},
round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},
length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,d){this.subVectors(b,a).multiplyScalar(d).add(a);return this},
cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var d=this.x,c=this.y,f=this.z;this.x=c*a.z-f*a.y;this.y=f*a.x-d*a.z;this.z=d*a.y-c*a.x;return this},crossVectors:function(a,b){var d=a.x,c=a.y,f=a.z,g=b.x,k=b.y,m=b.z;this.x=c*m-f*k;this.y=f*g-d*m;this.z=d*k-c*g;return this},projectOnVector:function(){var a,b;return function(d){void 0===a&&(a=new c.Vector3);a.copy(d).normalize();
b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new c.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new c.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(c.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=
this.x-a.x,d=this.y-a.y;a=this.z-a.z;return b*b+d*d+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");
return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=
this.set(a.elements[0],a.elements[1],a.elements[2]).length(),d=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=d;this.z=a;return this},setFromMatrixColumn:function(a,b){var d=4*a,c=b.elements;this.x=c[d];this.y=c[d+1];this.z=c[d+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},
toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,d){void 0===d&&(d=0);b=b*a.itemSize+d;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this},clone:function(){return new c.Vector3(this.x,this.y,this.z)}};c.Vector4=function(a,b,d,c){this.x=a||0;this.y=b||0;this.z=d||0;this.w=void 0!==c?c:1};c.Vector4.prototype={constructor:c.Vector4,set:function(a,b,d,c){this.x=a;this.y=b;this.z=d;this.w=c;return this},
setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);
}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,
b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=
a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,d=this.y,c=this.z,f=this.w;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*c+a[12]*f;this.y=a[1]*b+a[5]*d+a[9]*c+a[13]*f;this.z=a[2]*b+a[6]*d+a[10]*c+a[14]*f;this.w=a[3]*b+a[7]*d+a[11]*c+a[15]*f;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>
b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,d,c;a=a.elements;var f=a[0];c=a[4];var g=a[8],k=a[1],m=a[5],u=a[9];d=a[2];b=a[6];var p=a[10];if(.01>Math.abs(c-k)&&.01>Math.abs(g-d)&&.01>Math.abs(u-b)){if(.1>Math.abs(c+k)&&.1>Math.abs(g+d)&&.1>Math.abs(u+b)&&.1>Math.abs(f+m+p-3))return this.set(1,0,0,0),this;a=Math.PI;f=(f+1)/2;m=(m+1)/2;p=(p+1)/2;c=(c+k)/4;g=(g+d)/4;u=(u+b)/4;f>m&&f>p?.01>f?(b=0,c=d=.707106781):(b=
Math.sqrt(f),d=c/b,c=g/b):m>p?.01>m?(b=.707106781,d=0,c=.707106781):(d=Math.sqrt(m),b=c/d,c=u/d):.01>p?(d=b=.707106781,c=0):(c=Math.sqrt(p),b=g/c,d=u/c);this.set(b,d,c,a);return this}a=Math.sqrt((b-u)*(b-u)+(g-d)*(g-d)+(k-c)*(k-c));.001>Math.abs(a)&&(a=1);this.x=(b-u)/a;this.y=(g-d)/a;this.z=(k-c)/a;this.w=Math.acos((f+m+p-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&
(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector4,b=new c.Vector4);a.set(d,d,d,d);b.set(e,e,e,e);return this.clamp(a,b)}}(),floor:function(){this.x=
Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);
this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,d){this.subVectors(b,a).multiplyScalar(d).add(a);return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},
fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,d){void 0===d&&(d=0);b=b*a.itemSize+d;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this},clone:function(){return new c.Vector4(this.x,this.y,this.z,this.w)}};c.Euler=function(a,b,d,e){this._x=a||0;this._y=
b||0;this._z=d||0;this._order=e||c.Euler.DefaultOrder};c.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");c.Euler.DefaultOrder="XYZ";c.Euler.prototype={constructor:c.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,d,c){this._x=a;
this._y=b;this._z=d;this._order=c||this._order;this.onChangeCallback();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,d){var e=c.Math.clamp,f=a.elements;a=f[0];var g=f[4],k=f[8],m=f[1],u=f[5],p=f[9],s=f[2],q=f[6],f=f[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(e(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-p,f),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(q,u),this._z=0)):
"YXZ"===b?(this._x=Math.asin(-e(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(k,f),this._z=Math.atan2(m,u)):(this._y=Math.atan2(-s,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(e(q,-1,1)),.99999>Math.abs(q)?(this._y=Math.atan2(-s,f),this._z=Math.atan2(-g,u)):(this._y=0,this._z=Math.atan2(m,a))):"ZYX"===b?(this._y=Math.asin(-e(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(q,f),this._z=Math.atan2(m,a)):(this._x=0,this._z=Math.atan2(-g,u))):"YZX"===b?(this._z=Math.asin(e(m,-1,1)),.99999>Math.abs(m)?
(this._x=Math.atan2(-p,u),this._y=Math.atan2(-s,a)):(this._x=0,this._y=Math.atan2(k,f))):"XZY"===b?(this._z=Math.asin(-e(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(q,u),this._y=Math.atan2(k,a)):(this._x=Math.atan2(-p,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==d)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeRotationFromQuaternion(b);this.setFromRotationMatrix(a,
d,e);return this}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new c.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=
this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new c.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new c.Euler(this._x,this._y,this._z,this._order)}};c.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
c.Matrix3.prototype={constructor:c.Matrix3,set:function(a,b,d,c,f,g,k,m,u){var p=this.elements;p[0]=a;p[3]=b;p[6]=d;p[1]=c;p[4]=f;p[7]=g;p[2]=k;p[5]=m;p[8]=u;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);void 0===d&&(d=0);void 0===e&&(e=b.length);for(var f=0;f<e;f+=3,d+=3)a.fromArray(b,d),a.applyMatrix3(this),a.toArray(b,d);return b}}(),applyToBuffer:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);void 0===d&&(d=0);void 0===e&&(e=b.length/b.itemSize);for(var f=0;f<e;f++,d++)a.x=b.getX(d),a.y=b.getY(d),a.z=b.getZ(d),a.applyMatrix3(this),b.setXYZ(a.x,a.y,
a.z);return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],d=a[1],c=a[2],f=a[3],g=a[4],k=a[5],m=a[6],u=a[7],a=a[8];return b*g*a-b*k*u-d*f*a+d*k*m+c*f*u-c*g*m},getInverse:function(a,b){var d=a.elements,c=this.elements;c[0]=d[10]*d[5]-d[6]*d[9];c[1]=-d[10]*d[1]+d[2]*d[9];c[2]=d[6]*d[1]-d[2]*d[5];c[3]=-d[10]*d[4]+d[6]*d[8];c[4]=d[10]*d[0]-d[2]*d[8];c[5]=-d[6]*d[0]+
d[2]*d[4];c[6]=d[9]*d[4]-d[5]*d[8];c[7]=-d[9]*d[0]+d[1]*d[8];c[8]=d[5]*d[0]-d[1]*d[4];d=d[0]*c[0]+d[1]*c[3]+d[2]*c[6];if(0===d){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/d);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,
b){var d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+5]=d[5];a[b+6]=d[6];a[b+7]=d[7];a[b+8]=d[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],
a[7],a[8]]},clone:function(){return(new c.Matrix3).fromArray(this.elements)}};c.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};c.Matrix4.prototype={constructor:c.Matrix4,set:function(a,b,d,c,f,g,k,m,u,p,s,q,n,h,t,x){var v=this.elements;v[0]=a;v[4]=b;v[8]=d;v[12]=c;v[1]=f;v[5]=g;v[9]=k;v[13]=m;v[2]=u;v[6]=p;v[10]=s;v[14]=q;v[3]=n;v[7]=h;v[11]=t;v[15]=
x;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,d){var c=this.elements;a.set(c[0],c[1],c[2]);b.set(c[4],c[5],c[6]);d.set(c[8],
c[9],c[10]);return this},makeBasis:function(a,b,d){this.set(a.x,b.x,d.x,0,a.y,b.y,d.y,0,a.z,b.z,d.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new c.Vector3);var d=this.elements;b=b.elements;var e=1/a.set(b[0],b[1],b[2]).length(),f=1/a.set(b[4],b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();d[0]=b[0]*e;d[1]=b[1]*e;d[2]=b[2]*e;d[4]=b[4]*f;d[5]=b[5]*f;d[6]=b[6]*f;d[8]=b[8]*g;d[9]=b[9]*g;d[10]=b[10]*g;return this}}(),makeRotationFromEuler:function(a){!1===
a instanceof c.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,d=a.x,e=a.y,f=a.z,g=Math.cos(d),d=Math.sin(d),k=Math.cos(e),e=Math.sin(e),m=Math.cos(f),f=Math.sin(f);if("XYZ"===a.order){a=g*m;var u=g*f,p=d*m,s=d*f;b[0]=k*m;b[4]=-k*f;b[8]=e;b[1]=u+p*e;b[5]=a-s*e;b[9]=-d*k;b[2]=s-a*e;b[6]=p+u*e;b[10]=g*k}else"YXZ"===a.order?(a=k*m,u=k*f,p=e*m,s=e*f,b[0]=a+s*d,b[4]=p*d-u,b[8]=g*e,b[1]=g*f,b[5]=g*m,b[9]=-d,
b[2]=u*d-p,b[6]=s+a*d,b[10]=g*k):"ZXY"===a.order?(a=k*m,u=k*f,p=e*m,s=e*f,b[0]=a-s*d,b[4]=-g*f,b[8]=p+u*d,b[1]=u+p*d,b[5]=g*m,b[9]=s-a*d,b[2]=-g*e,b[6]=d,b[10]=g*k):"ZYX"===a.order?(a=g*m,u=g*f,p=d*m,s=d*f,b[0]=k*m,b[4]=p*e-u,b[8]=a*e+s,b[1]=k*f,b[5]=s*e+a,b[9]=u*e-p,b[2]=-e,b[6]=d*k,b[10]=g*k):"YZX"===a.order?(a=g*k,u=g*e,p=d*k,s=d*e,b[0]=k*m,b[4]=s-a*f,b[8]=p*f+u,b[1]=f,b[5]=g*m,b[9]=-d*m,b[2]=-e*m,b[6]=u*f+p,b[10]=a-s*f):"XZY"===a.order&&(a=g*k,u=g*e,p=d*k,s=d*e,b[0]=k*m,b[4]=-f,b[8]=e*m,b[1]=
a*f+s,b[5]=g*m,b[9]=u*f-p,b[2]=p*f-u,b[6]=d*m,b[10]=s*f+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,d=a.x,c=a.y,f=a.z,g=a.w,k=d+d,m=c+c,u=f+f;a=d*k;var p=d*m,d=d*u,s=c*m,c=c*u,f=f*u,k=g*k,m=g*m,g=g*u;b[0]=1-(s+f);b[4]=p-g;b[8]=
d+m;b[1]=p+g;b[5]=1-(a+f);b[9]=c-k;b[2]=d-m;b[6]=c+k;b[10]=1-(a+s);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,d;return function(e,f,g){void 0===a&&(a=new c.Vector3);void 0===b&&(b=new c.Vector3);void 0===d&&(d=new c.Vector3);var k=this.elements;d.subVectors(e,f).normalize();0===d.length()&&(d.z=1);a.crossVectors(g,d).normalize();0===a.length()&&(d.x+=1E-4,a.crossVectors(g,d).normalize());b.crossVectors(d,a);k[0]=a.x;k[4]=b.x;k[8]=d.x;k[1]=a.y;k[5]=
b.y;k[9]=d.y;k[2]=a.z;k[6]=b.z;k[10]=d.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var d=a.elements,c=b.elements,f=this.elements,g=d[0],k=d[4],m=d[8],u=d[12],p=d[1],s=d[5],q=d[9],n=d[13],h=d[2],t=d[6],x=d[10],v=d[14],l=d[3],y=d[7],A=d[11],d=d[15],E=c[0],B=c[4],ca=c[8],C=c[12],r=c[1],
H=c[5],w=c[9],L=c[13],N=c[2],M=c[6],F=c[10],S=c[14],K=c[3],I=c[7],Q=c[11],c=c[15];f[0]=g*E+k*r+m*N+u*K;f[4]=g*B+k*H+m*M+u*I;f[8]=g*ca+k*w+m*F+u*Q;f[12]=g*C+k*L+m*S+u*c;f[1]=p*E+s*r+q*N+n*K;f[5]=p*B+s*H+q*M+n*I;f[9]=p*ca+s*w+q*F+n*Q;f[13]=p*C+s*L+q*S+n*c;f[2]=h*E+t*r+x*N+v*K;f[6]=h*B+t*H+x*M+v*I;f[10]=h*ca+t*w+x*F+v*Q;f[14]=h*C+t*L+x*S+v*c;f[3]=l*E+y*r+A*N+d*K;f[7]=l*B+y*H+A*M+d*I;f[11]=l*ca+y*w+A*F+d*Q;f[15]=l*C+y*L+A*S+d*c;return this},multiplyToArray:function(a,b,c){var e=this.elements;this.multiplyMatrices(a,
b);c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];c[9]=e[9];c[10]=e[10];c[11]=e[11];c[12]=e[12];c[13]=e[13];c[14]=e[14];c[15]=e[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);void 0===d&&(d=0);void 0===
e&&(e=b.length);for(var f=0;f<e;f+=3,d+=3)a.fromArray(b,d),a.applyMatrix4(this),a.toArray(b,d);return b}}(),applyToBuffer:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);void 0===d&&(d=0);void 0===e&&(e=b.length/b.itemSize);for(var f=0;f<e;f++,d++)a.x=b.getX(d),a.y=b.getY(d),a.z=b.getZ(d),a.applyMatrix4(this),b.setXYZ(a.x,a.y,a.z);return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],e=a[8],f=a[12],g=a[1],k=a[5],m=a[9],u=a[13],p=a[2],s=a[6],q=a[10],n=a[14];return a[3]*(+f*m*s-e*u*s-f*k*q+c*u*q+e*k*n-c*m*n)+a[7]*(+b*m*n-b*u*q+f*g*q-e*g*n+e*u*p-f*m*p)+a[11]*(+b*u*s-b*k*n-f*g*s+c*g*n+f*k*p-c*u*p)+a[15]*(-e*k*p-b*m*s+b*k*q+e*g*s-c*g*q+c*m*
p)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a;
return function(){void 0===a&&(a=new c.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,e=a.elements,f=e[0],g=e[4],k=e[8],m=e[12],u=e[1],p=e[5],s=e[9],q=e[13],n=e[2],h=e[6],t=e[10],x=e[14],v=e[3],l=e[7],y=e[11],e=e[15];c[0]=s*x*l-q*t*l+
q*h*y-p*x*y-s*h*e+p*t*e;c[4]=m*t*l-k*x*l-m*h*y+g*x*y+k*h*e-g*t*e;c[8]=k*q*l-m*s*l+m*p*y-g*q*y-k*p*e+g*s*e;c[12]=m*s*h-k*q*h-m*p*t+g*q*t+k*p*x-g*s*x;c[1]=q*t*v-s*x*v-q*n*y+u*x*y+s*n*e-u*t*e;c[5]=k*x*v-m*t*v+m*n*y-f*x*y-k*n*e+f*t*e;c[9]=m*s*v-k*q*v-m*u*y+f*q*y+k*u*e-f*s*e;c[13]=k*q*n-m*s*n+m*u*t-f*q*t-k*u*x+f*s*x;c[2]=p*x*v-q*h*v+q*n*l-u*x*l-p*n*e+u*h*e;c[6]=m*h*v-g*x*v-m*n*l+f*x*l+g*n*e-f*h*e;c[10]=g*q*v-m*p*v+m*u*l-f*q*l-g*u*e+f*p*e;c[14]=m*p*n-g*q*n-m*u*h+f*q*h+g*u*x-f*p*x;c[3]=s*h*v-p*t*v-s*n*l+
u*t*l+p*n*y-u*h*y;c[7]=g*t*v-k*h*v+k*n*l-f*t*l-g*n*y+f*h*y;c[11]=k*p*v-g*s*v-k*u*l+f*s*l+g*u*y-f*p*y;c[15]=g*s*n-k*p*n+k*u*h-f*s*h-g*u*t+f*p*t;c=f*c[0]+u*c[4]+n*c[8]+v*c[12];if(0===c){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},
rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(a){var b=this.elements,c=a.x,e=a.y;a=a.z;b[0]*=c;b[4]*=e;b[8]*=a;b[1]*=c;b[5]*=e;b[9]*=a;b[2]*=c;b[6]*=e;b[10]*=a;b[3]*=c;b[7]*=e;b[11]*=a;return this},
getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=
Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),e=Math.sin(b),f=1-c,g=a.x,k=a.y,m=a.z,u=f*g,p=f*k;this.set(u*g+c,u*k-e*m,u*m+e*k,0,u*k+e*m,p*k+c,p*m-e*g,0,u*m-e*k,p*m+e*g,f*m*m+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a,b;
return function(d,e,f){void 0===a&&(a=new c.Vector3);void 0===b&&(b=new c.Matrix4);var g=this.elements,k=a.set(g[0],g[1],g[2]).length(),m=a.set(g[4],g[5],g[6]).length(),u=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(k=-k);d.x=g[12];d.y=g[13];d.z=g[14];b.elements.set(this.elements);d=1/k;var g=1/m,p=1/u;b.elements[0]*=d;b.elements[1]*=d;b.elements[2]*=d;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=p;b.elements[9]*=p;b.elements[10]*=p;e.setFromRotationMatrix(b);f.x=k;
f.y=m;f.z=u;return this}}(),makeFrustum:function(a,b,c,e,f,g){var k=this.elements;k[0]=2*f/(b-a);k[4]=0;k[8]=(b+a)/(b-a);k[12]=0;k[1]=0;k[5]=2*f/(e-c);k[9]=(e+c)/(e-c);k[13]=0;k[2]=0;k[6]=0;k[10]=-(g+f)/(g-f);k[14]=-2*g*f/(g-f);k[3]=0;k[7]=0;k[11]=-1;k[15]=0;return this},makePerspective:function(a,b,d,e){a=d*Math.tan(c.Math.degToRad(.5*a));var f=-a;return this.makeFrustum(f*b,a*b,f,a,d,e)},makeOrthographic:function(a,b,c,e,f,g){var k=this.elements,m=b-a,u=c-e,p=g-f;k[0]=2/m;k[4]=0;k[8]=0;k[12]=-((b+
a)/m);k[1]=0;k[5]=2/u;k[9]=0;k[13]=-((c+e)/u);k[2]=0;k[6]=0;k[10]=-2/p;k[14]=-((g+f)/p);k[3]=0;k[7]=0;k[11]=0;k[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){return(new c.Matrix4).fromArray(this.elements)}};c.Ray=function(a,
b){this.origin=void 0!==a?a:new c.Vector3;this.direction=void 0!==b?b:new c.Vector3};c.Ray.prototype={constructor:c.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new c.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new c.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,
b){var d=b||new c.Vector3;d.subVectors(a,this.origin);var e=d.dot(this.direction);return 0>e?d.copy(this.origin):d.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new c.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),
distanceSqToSegment:function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Vector3;return function(c,f,g,k){a.copy(c).add(f).multiplyScalar(.5);b.copy(f).sub(c).normalize();d.copy(this.origin).sub(a);var m=.5*c.distanceTo(f),u=-this.direction.dot(b),p=d.dot(this.direction),s=-d.dot(b),q=d.lengthSq(),n=Math.abs(1-u*u),h;0<n?(c=u*s-p,f=u*p-s,h=m*n,0<=c?f>=-h?f<=h?(m=1/n,c*=m,f*=m,u=c*(c+u*f+2*p)+f*(u*c+f+2*s)+q):(f=m,c=Math.max(0,-(u*f+p)),u=-c*c+f*(f+2*s)+q):(f=-m,c=Math.max(0,-(u*f+p)),u=-c*c+f*(f+
2*s)+q):f<=-h?(c=Math.max(0,-(-u*m+p)),f=0<c?-m:Math.min(Math.max(-m,-s),m),u=-c*c+f*(f+2*s)+q):f<=h?(c=0,f=Math.min(Math.max(-m,-s),m),u=f*(f+2*s)+q):(c=Math.max(0,-(u*m+p)),f=0<c?m:Math.min(Math.max(-m,-s),m),u=-c*c+f*(f+2*s)+q)):(f=0<u?-m:m,c=Math.max(0,-(u*f+p)),u=-c*c+f*(f+2*s)+q);g&&g.copy(this.direction).multiplyScalar(c).add(this.origin);k&&k.copy(b).multiplyScalar(f).add(a);return u}}(),isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=
new c.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var e=a.dot(this.direction),f=a.dot(a)-e*e,g=b.radius*b.radius;if(f>g)return null;g=Math.sqrt(g-f);f=e-g;e+=g;return 0>f&&0>e?null:0>f?this.at(e,c):this.at(f,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+
a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new c.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,e,f,g,k;e=1/this.direction.x;g=1/this.direction.y;k=1/this.direction.z;var m=this.origin;0<=e?(c=(a.min.x-m.x)*e,e*=a.max.x-m.x):(c=(a.max.x-m.x)*e,e*=a.min.x-m.x);0<=g?(f=(a.min.y-m.y)*g,g*=a.max.y-m.y):(f=(a.max.y-m.y)*g,g*=a.min.y-
m.y);if(c>g||f>e)return null;if(f>c||c!==c)c=f;if(g<e||e!==e)e=g;0<=k?(f=(a.min.z-m.z)*k,k*=a.max.z-m.z):(f=(a.max.z-m.z)*k,k*=a.min.z-m.z);if(c>k||f>e)return null;if(f>c||c!==c)c=f;if(k<e||e!==e)e=k;return 0>e?null:this.at(0<=c?c:e,b)},intersectTriangle:function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Vector3,e=new c.Vector3;return function(c,g,k,m,u){b.subVectors(g,c);d.subVectors(k,c);e.crossVectors(b,d);g=this.direction.dot(e);if(0<g){if(m)return null;m=1}else if(0>g)m=-1,g=-g;else return null;
a.subVectors(this.origin,c);c=m*this.direction.dot(d.crossVectors(a,d));if(0>c)return null;k=m*this.direction.dot(b.cross(a));if(0>k||c+k>g)return null;c=-m*a.dot(e);return 0>c?null:this.at(c/g,u)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new c.Ray).copy(this)}};
c.Box2=function(a,b){this.min=void 0!==a?a:new c.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new c.Vector2(-Infinity,-Infinity)};c.Box2.prototype={constructor:c.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new c.Vector2;return function(b,c){var e=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(e);this.max.copy(b).add(e);
return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new c.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new c.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);
this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new c.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<
this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new c.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new c.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},
equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new c.Box2).copy(this)}};c.Box3=function(a,b){this.min=void 0!==a?a:new c.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new c.Vector3(-Infinity,-Infinity,-Infinity)};c.Box3.prototype={constructor:c.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=
new c.Vector3;return function(b,c){var e=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(e);this.max.copy(b).add(e);return this}}(),setFromObject:function(){var a=new c.Vector3;return function(b){var d=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){var f=b.geometry;if(void 0!==f)if(f instanceof c.Geometry)for(var g=f.vertices,f=0,k=g.length;f<k;f++)a.copy(g[f]),a.applyMatrix4(b.matrixWorld),d.expandByPoint(a);else if(f instanceof c.BufferGeometry&&void 0!==f.attributes.position)for(g=
f.attributes.position.array,f=0,k=g.length;f<k;f+=3)a.set(g[f],g[f+1],g[f+2]),a.applyMatrix4(b.matrixWorld),d.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new c.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},
size:function(a){return(a||new c.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&
this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new c.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new c.Vector3).copy(a).clamp(this.min,
this.max)},distanceToPoint:function(){var a=new c.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new c.Vector3;return function(b){b=b||new c.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new c.Vector3,new c.Vector3,new c.Vector3,
new c.Vector3,new c.Vector3,new c.Vector3,new c.Vector3,new c.Vector3];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);
a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new c.Box3).copy(this)}};c.Sphere=function(a,b){this.center=void 0!==a?a:new c.Vector3;this.radius=void 0!==b?b:0};c.Sphere.prototype={constructor:c.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=
new c.Box3;return function(b,c){var e=this.center;void 0!==c?e.copy(c):a.setFromPoints(b).center(e);for(var f=0,g=0,k=b.length;g<k;g++)f=Math.max(f,e.distanceToSquared(b[g]));this.radius=Math.sqrt(f);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=
this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var d=this.center.distanceToSquared(a),e=b||new c.Vector3;e.copy(a);d>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center));return e},getBoundingBox:function(a){a=a||new c.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);
return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new c.Sphere).copy(this)}};c.Plane=function(a,b){this.normal=void 0!==a?a:new c.Vector3(1,0,0);this.constant=void 0!==b?b:0};c.Plane.prototype={constructor:c.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,e){this.normal.set(a,b,c);this.constant=e;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=
-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new c.Vector3,b=new c.Vector3;return function(c,e,f){e=a.subVectors(f,e).cross(b.subVectors(c,e)).normalize();this.setFromNormalAndCoplanarPoint(e,c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+
this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var d=this.distanceToPoint(a);return(b||new c.Vector3).copy(this.normal).multiplyScalar(d)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new c.Vector3;return function(b,d){var e=d||new c.Vector3,f=b.delta(a),
g=this.normal.dot(f);if(0===g){if(0===this.distanceToPoint(b.start))return e.copy(b.start)}else return g=-(b.start.dot(this.normal)+this.constant)/g,0>g||1<g?void 0:e.copy(f).multiplyScalar(g).add(b.start)}}(),coplanarPoint:function(a){return(a||new c.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Matrix3;return function(c,f){var g=f||d.getNormalMatrix(c),g=a.copy(this.normal).applyMatrix3(g),k=this.coplanarPoint(b);k.applyMatrix4(c);
this.setFromNormalAndCoplanarPoint(g,k);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant},clone:function(){return(new c.Plane).copy(this)}};c.Frustum=function(a,b,d,e,f,g){this.planes=[void 0!==a?a:new c.Plane,void 0!==b?b:new c.Plane,void 0!==d?d:new c.Plane,void 0!==e?e:new c.Plane,void 0!==f?f:new c.Plane,void 0!==g?g:new c.Plane]};c.Frustum.prototype={constructor:c.Frustum,set:function(a,
b,c,e,f,g){var k=this.planes;k[0].copy(a);k[1].copy(b);k[2].copy(c);k[3].copy(e);k[4].copy(f);k[5].copy(g);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var e=c[1],f=c[2],g=c[3],k=c[4],m=c[5],u=c[6],p=c[7],s=c[8],q=c[9],n=c[10],h=c[11],t=c[12],x=c[13],v=c[14],c=c[15];b[0].setComponents(g-a,p-k,h-s,c-t).normalize();b[1].setComponents(g+a,p+k,h+s,c+t).normalize();b[2].setComponents(g+
e,p+m,h+q,c+x).normalize();b[3].setComponents(g-e,p-m,h-q,c-x).normalize();b[4].setComponents(g-f,p-u,h-n,c-v).normalize();b[5].setComponents(g+f,p+u,h+n,c+v).normalize();return this},intersectsObject:function(){var a=new c.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var e=0;6>e;e++)if(b[e].distanceToPoint(c)<
a)return!1;return!0},intersectsBox:function(){var a=new c.Vector3,b=new c.Vector3;return function(c){for(var e=this.planes,f=0;6>f;f++){var g=e[f];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var k=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>k&&0>g)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;
return!0},clone:function(){return(new c.Frustum).copy(this)}};c.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,e;return function(){for(var f=0;36>f;f++)8===f||13===f||18===f||23===f?b[f]="-":14===f?b[f]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),e=c&15,c>>=4,b[f]=a[19===f?e&3|8:e]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},euclideanModulo:function(a,
b){return(a%b+b)%b},mapLinear:function(a,b,c,e,f){return e+(a-b)*(f-e)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*
(.5-Math.random())},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};c.Triangle=function(a,b,d){this.a=void 0!==a?a:new c.Vector3;this.b=void 0!==b?b:new c.Vector3;this.c=void 0!==d?d:new c.Vector3};c.Triangle.normal=function(){var a=new c.Vector3;return function(b,d,
e,f){f=f||new c.Vector3;f.subVectors(e,d);a.subVectors(b,d);f.cross(a);b=f.lengthSq();return 0<b?f.multiplyScalar(1/Math.sqrt(b)):f.set(0,0,0)}}();c.Triangle.barycoordFromPoint=function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Vector3;return function(e,f,g,k,m){a.subVectors(k,f);b.subVectors(g,f);d.subVectors(e,f);e=a.dot(a);f=a.dot(b);g=a.dot(d);var u=b.dot(b);k=b.dot(d);var p=e*u-f*f;m=m||new c.Vector3;if(0===p)return m.set(-2,-1,-1);p=1/p;u=(u*g-f*k)*p;e=(e*k-f*g)*p;return m.set(1-u-e,e,u)}}();
c.Triangle.containsPoint=function(){var a=new c.Vector3;return function(b,d,e,f){b=c.Triangle.barycoordFromPoint(b,d,e,f,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();c.Triangle.prototype={constructor:c.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,e){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[e]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new c.Vector3,
b=new c.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new c.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return c.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new c.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return c.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return c.Triangle.containsPoint(a,
this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},clone:function(){return(new c.Triangle).copy(this)}};c.EventDispatcher=function(){};c.EventDispatcher.prototype={constructor:c.EventDispatcher,apply:function(a){a.addEventListener=c.EventDispatcher.prototype.addEventListener;a.hasEventListener=c.EventDispatcher.prototype.hasEventListener;a.removeEventListener=c.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=c.EventDispatcher.prototype.dispatchEvent},
addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var e=c.indexOf(b);-1!==e&&c.splice(e,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=
this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],e=b.length,f=0;f<e;f++)c[f]=b[f];for(f=0;f<e;f++)c[f].call(this,a)}}}};(function(a){a.Raycaster=function(b,c,d,k){this.ray=new a.Ray(b,c);this.near=d||0;this.far=k||Infinity;this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var b=function(a,b){return a.distance-b.distance},c=function(a,b,g,k){if(!1!==a.visible&&(a.raycast(b,g),!0===k)){a=a.children;k=0;for(var m=a.length;k<m;k++)c(a[k],b,g,!0)}};a.Raycaster.prototype=
{constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,-1).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,
f){var g=[];c(a,this,g,f);g.sort(b);return g},intersectObjects:function(a,f){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var k=0,m=a.length;k<m;k++)c(a[k],this,g,f);g.sort(b);return g}}})(c);c.Object3D=function(){Object.defineProperty(this,"id",{value:c.Object3DIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="Object3D";this.parent=void 0;this.children=[];this.up=c.Object3D.DefaultUp.clone();var a=new c.Vector3,
b=new c.Euler,d=new c.Quaternion,e=new c.Vector3(1,1,1);b.onChange(function(){d.setFromEuler(b,!1)});d.onChange(function(){b.setFromQuaternion(d,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:d},scale:{enumerable:!0,value:e}});this.rotationAutoUpdate=!0;this.matrix=new c.Matrix4;this.matrixWorld=new c.Matrix4;this.matrixAutoUpdate=!0;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=
!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};c.Object3D.DefaultUp=new c.Vector3(0,1,0);c.Object3D.prototype={constructor:c.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set renderDepth(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,
!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new c.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new c.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new c.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=
new c.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new c.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new c.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,
b)}}(),translateY:function(){var a=new c.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new c.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new c.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new c.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),
add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof c.Object3D?(void 0!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);
b=this.children.indexOf(a);-1!==b&&(a.parent=void 0,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,e=this.children.length;c<e;c++){var f=
this.children[c].getObjectByProperty(a,b);if(void 0!==f)return f}},getWorldPosition:function(a){a=a||new c.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new c.Vector3,b=new c.Vector3;return function(d){d=d||new c.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,d,b);return d}}(),getWorldRotation:function(){var a=new c.Quaternion;return function(b){b=b||new c.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,
this.rotation.order,!1)}}(),getWorldScale:function(){var a=new c.Vector3,b=new c.Quaternion;return function(d){d=d||new c.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,d);return d}}(),getWorldDirection:function(){var a=new c.Quaternion;return function(b){b=b||new c.Vector3;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,e=b.length;c<e;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==
this.visible){a(this);for(var b=this.children,c=0,e=b.length;c<e;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;void 0!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a,e={};c&&(a={geometries:{},materials:{},textures:{},images:{}},e.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);"{}"!==JSON.stringify(this.userData)&&(e.userData=
this.userData);!0!==this.visible&&(e.visible=this.visible);e.matrix=this.matrix.toArray();if(0<this.children.length){e.children=[];for(var f=0;f<this.children.length;f++)e.children.push(this.children[f].toJSON(a).object)}f={};if(c){var c=b(a.geometries),g=b(a.materials),k=b(a.textures);a=b(a.images);0<c.length&&(f.geometries=c);0<g.length&&(f.materials=g);0<k.length&&(f.textures=k);0<a.length&&(f.images=a)}f.object=e;return f},clone:function(a){return(new c.Object3D).copy(this,a)},copy:function(a,
b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.rotationAutoUpdate=a.rotationAutoUpdate;this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;
this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}};c.EventDispatcher.prototype.apply(c.Object3D.prototype);c.Object3DIdCount=0;c.Face3=function(a,b,d,e,f,g){this.a=a;this.b=b;this.c=d;this.normal=e instanceof c.Vector3?e:new c.Vector3;this.vertexNormals=Array.isArray(e)?e:[];this.color=f instanceof c.Color?f:new c.Color;this.vertexColors=Array.isArray(f)?f:[];this.vertexTangents=[];this.materialIndex=void 0!==
g?g:0};c.Face3.prototype={constructor:c.Face3,copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();b=0;for(c=a.vertexTangents.length;b<c;b++)this.vertexTangents[b]=a.vertexTangents[b].clone();return this},clone:function(){return(new c.Face3).copy(this)}};
c.Face4=function(a,b,d,e,f,g,k){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new c.Face3(a,b,d,f,g,k)};c.BufferAttribute=function(a,b){this.uuid=c.Math.generateUUID();this.array=a;this.itemSize=b;this.version=0};c.BufferAttribute.prototype={constructor:c.BufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===
a&&this.version++},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var e=0,f=this.itemSize;e<f;e++)this.array[a+e]=b.array[c+e];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",e),g=new c.Color);b[d++]=g.r;b[d++]=g.g;b[d++]=g.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,e=0,
f=a.length;e<f;e++){var g=a[e];b[c++]=g.a;b[c++]=g.b;b[c++]=g.c}return this},copyVector2sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",e),g=new c.Vector2);b[d++]=g.x;b[d++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",e),g=new c.Vector3);
b[d++]=g.x;b[d++]=g.y;b[d++]=g.z}return this},copyVector4sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",e),g=new c.Vector4);b[d++]=g.x;b[d++]=g.y;b[d++]=g.z;b[d++]=g.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*
this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=
e;return this},setXYZW:function(a,b,c,e,f){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=e;this.array[a+3]=f;return this},clone:function(){return new c.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}};c.Int8Attribute=function(a,b){return new c.BufferAttribute(new Int8Array(a),b)};c.Uint8Attribute=function(a,b){return new c.BufferAttribute(new Uint8Array(a),b)};c.Uint8ClampedAttribute=function(a,b){return new c.BufferAttribute(new Uint8ClampedArray(a),
b)};c.Int16Attribute=function(a,b){return new c.BufferAttribute(new Int16Array(a),b)};c.Uint16Attribute=function(a,b){return new c.BufferAttribute(new Uint16Array(a),b)};c.Int32Attribute=function(a,b){return new c.BufferAttribute(new Int32Array(a),b)};c.Uint32Attribute=function(a,b){return new c.BufferAttribute(new Uint32Array(a),b)};c.Float32Attribute=function(a,b){return new c.BufferAttribute(new Float32Array(a),b)};c.Float64Attribute=function(a,b){return new c.BufferAttribute(new Float64Array(a),
b)};c.Geometry=function(){Object.defineProperty(this,"id",{value:c.GeometryIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=this.hasTangents=!1};c.Geometry.prototype={constructor:c.Geometry,applyMatrix:function(a){for(var b=(new c.Matrix3).getNormalMatrix(a),d=0,e=this.vertices.length;d<e;d++)this.vertices[d].applyMatrix4(a);d=0;for(e=this.faces.length;d<e;d++){a=this.faces[d];a.normal.applyMatrix3(b).normalize();for(var f=0,g=a.vertexNormals.length;f<g;f++)a.vertexNormals[f].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&
this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0},rotateX:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,
d,e){void 0===a&&(a=new c.Matrix4);a.makeTranslation(b,d,e);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeScale(b,d,e);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new c.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){var b=this,d=a.attributes,e=d.position.array,f=void 0!==d.index?d.index.array:void 0,g=void 0!==d.normal?d.normal.array:
void 0,k=void 0!==d.color?d.color.array:void 0,m=void 0!==d.uv?d.uv.array:void 0,u=void 0!==d.uv2?d.uv2.array:void 0,p=void 0!==d.tangent?d.tangent.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);void 0!==p&&(this.hasTangents=!0);for(var s=[],q=[],n=[],h=[],t=d=0,x=0;d<e.length;d+=3,t+=2,x+=4)b.vertices.push(new c.Vector3(e[d],e[d+1],e[d+2])),void 0!==g&&s.push(new c.Vector3(g[d],g[d+1],g[d+2])),void 0!==k&&b.colors.push(new c.Color(k[d],k[d+1],k[d+2])),void 0!==m&&q.push(new c.Vector2(m[t],m[t+
1])),void 0!==u&&n.push(new c.Vector2(u[t],u[t+1])),void 0!==p&&h.push(new c.Vector4(p[x],p[x+1],p[x+2],p[x+3]));x=function(a,d,e){var f=void 0!==g?[s[a].clone(),s[d].clone(),s[e].clone()]:[],t=void 0!==k?[b.colors[a].clone(),b.colors[d].clone(),b.colors[e].clone()]:[],f=new c.Face3(a,d,e,f,t);b.faces.push(f);void 0!==m&&b.faceVertexUvs[0].push([q[a].clone(),q[d].clone(),q[e].clone()]);void 0!==u&&b.faceVertexUvs[1].push([n[a].clone(),n[d].clone(),n[e].clone()]);void 0!==p&&f.vertexTangents.push(h[a].clone(),
h[d].clone(),h[e].clone())};if(void 0!==f)if(e=a.drawcalls,0<e.length)for(d=0;d<e.length;d++)for(var t=e[d],v=t.start,l=t.count,y=t.index,t=v,v=v+l;t<v;t+=3)x(y+f[t],y+f[t+1],y+f[t+2]);else for(d=0;d<f.length;d+=3)x(f[d],f[d+1],f[d+2]);else for(d=0;d<e.length/3;d+=3)x(d,d+1,d+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=
this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,d=new c.Matrix4;d.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(d);return this},computeFaceNormals:function(){for(var a=new c.Vector3,b=new c.Vector3,d=0,e=this.faces.length;d<e;d++){var f=this.faces[d],g=this.vertices[f.a],k=this.vertices[f.b];a.subVectors(this.vertices[f.c],k);
b.subVectors(g,k);a.cross(b);a.normalize();f.normal.copy(a)}},computeVertexNormals:function(a){var b,d,e;e=Array(this.vertices.length);b=0;for(d=this.vertices.length;b<d;b++)e[b]=new c.Vector3;if(a){var f,g,k,m=new c.Vector3,u=new c.Vector3;a=0;for(b=this.faces.length;a<b;a++)d=this.faces[a],f=this.vertices[d.a],g=this.vertices[d.b],k=this.vertices[d.c],m.subVectors(k,g),u.subVectors(f,g),m.cross(u),e[d.a].add(m),e[d.b].add(m),e[d.c].add(m)}else for(a=0,b=this.faces.length;a<b;a++)d=this.faces[a],
e[d.a].add(d.normal),e[d.b].add(d.normal),e[d.c].add(d.normal);b=0;for(d=this.vertices.length;b<d;b++)e[b].normalize();a=0;for(b=this.faces.length;a<b;a++)d=this.faces[a],f=d.vertexNormals,3===f.length?(f[0].copy(e[d.a]),f[1].copy(e[d.b]),f[2].copy(e[d.c])):(f[0]=e[d.a].clone(),f[1]=e[d.b].clone(),f[2]=e[d.c].clone())},computeMorphNormals:function(){var a,b,d,e,f;d=0;for(e=this.faces.length;d<e;d++)for(f=this.faces[d],f.__originalFaceNormal?f.__originalFaceNormal.copy(f.normal):f.__originalFaceNormal=
f.normal.clone(),f.__originalVertexNormals||(f.__originalVertexNormals=[]),a=0,b=f.vertexNormals.length;a<b;a++)f.__originalVertexNormals[a]?f.__originalVertexNormals[a].copy(f.vertexNormals[a]):f.__originalVertexNormals[a]=f.vertexNormals[a].clone();var g=new c.Geometry;g.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];f=this.morphNormals[a].faceNormals;var k=this.morphNormals[a].vertexNormals,
m,u;d=0;for(e=this.faces.length;d<e;d++)m=new c.Vector3,u={a:new c.Vector3,b:new c.Vector3,c:new c.Vector3},f.push(m),k.push(u)}k=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;g.computeFaceNormals();g.computeVertexNormals();d=0;for(e=this.faces.length;d<e;d++)f=this.faces[d],m=k.faceNormals[d],u=k.vertexNormals[d],m.copy(f.normal),u.a.copy(f.vertexNormals[0]),u.b.copy(f.vertexNormals[1]),u.c.copy(f.vertexNormals[2])}d=0;for(e=this.faces.length;d<e;d++)f=this.faces[d],f.normal=f.__originalFaceNormal,
f.vertexNormals=f.__originalVertexNormals},computeTangents:function(){var a,b,d,e,f,g,k,m,u,p,s,q,n,h,t,x,v,l=[],y=[];d=new c.Vector3;var A=new c.Vector3,E=new c.Vector3,B=new c.Vector3,ca=new c.Vector3;a=0;for(b=this.vertices.length;a<b;a++)l[a]=new c.Vector3,y[a]=new c.Vector3;a=0;for(b=this.faces.length;a<b;a++)f=this.faces[a],g=this.faceVertexUvs[0][a],e=f.a,v=f.b,f=f.c,k=this.vertices[e],m=this.vertices[v],u=this.vertices[f],p=g[0],s=g[1],q=g[2],g=m.x-k.x,n=u.x-k.x,h=m.y-k.y,t=u.y-k.y,m=m.z-
k.z,k=u.z-k.z,u=s.x-p.x,x=q.x-p.x,s=s.y-p.y,p=q.y-p.y,q=1/(u*p-x*s),d.set((p*g-s*n)*q,(p*h-s*t)*q,(p*m-s*k)*q),A.set((u*n-x*g)*q,(u*t-x*h)*q,(u*k-x*m)*q),l[e].add(d),l[v].add(d),l[f].add(d),y[e].add(A),y[v].add(A),y[f].add(A);A=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++)for(f=this.faces[a],d=0;d<Math.min(f.vertexNormals.length,3);d++)ca.copy(f.vertexNormals[d]),e=f[A[d]],v=l[e],E.copy(v),E.sub(ca.multiplyScalar(ca.dot(v))).normalize(),B.crossVectors(f.vertexNormals[d],v),e=B.dot(y[e]),
e=0>e?-1:1,f.vertexTangents[d]=new c.Vector4(E.x,E.y,E.z,e);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,e=b.length;c<e;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new c.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new c.Sphere);this.boundingSphere.setFromPoints(this.vertices)},
merge:function(a,b,d){if(!1===a instanceof c.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var e,f=this.vertices.length,g=this.vertices,k=a.vertices,m=this.faces,u=a.faces,p=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===d&&(d=0);void 0!==b&&(e=(new c.Matrix3).getNormalMatrix(b));for(var s=0,q=k.length;s<q;s++){var n=k[s].clone();void 0!==b&&n.applyMatrix4(b);g.push(n)}s=0;for(q=u.length;s<q;s++){var k=u[s],h,t=k.vertexNormals,x=k.vertexColors,
n=new c.Face3(k.a+f,k.b+f,k.c+f);n.normal.copy(k.normal);void 0!==e&&n.normal.applyMatrix3(e).normalize();b=0;for(g=t.length;b<g;b++)h=t[b].clone(),void 0!==e&&h.applyMatrix3(e).normalize(),n.vertexNormals.push(h);n.color.copy(k.color);b=0;for(g=x.length;b<g;b++)h=x[b],n.vertexColors.push(h.clone());n.materialIndex=k.materialIndex+d;m.push(n)}s=0;for(q=a.length;s<q;s++)if(d=a[s],e=[],void 0!==d){b=0;for(g=d.length;b<g;b++)e.push(d[b].clone());p.push(e)}}},mergeMesh:function(a){!1===a instanceof c.Mesh?
console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],e,f=Math.pow(10,4),g,k;g=0;for(k=this.vertices.length;g<k;g++)e=this.vertices[g],e=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f),void 0===a[e]?(a[e]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[e]];a=[];g=0;for(k=this.faces.length;g<k;g++)for(f=this.faces[g],f.a=c[f.a],f.b=c[f.b],
f.c=c[f.c],f=[f.a,f.b,f.c],e=0;3>e;e++)if(f[e]===f[(e+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(f=a[g],this.faces.splice(f,1),c=0,k=this.faceVertexUvs.length;c<k;c++)this.faceVertexUvs[c].splice(f,1);g=this.vertices.length-b.length;this.vertices=b;return g},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==p[b])return p[b];p[b]=u.length/3;u.push(a.x,a.y,a.z);return p[b]}function c(a){var b=a.r.toString()+
a.g.toString()+a.b.toString();if(void 0!==q[b])return q[b];q[b]=s.length;s.push(a.getHex());return q[b]}function e(a){var b=a.x.toString()+a.y.toString();if(void 0!==h[b])return h[b];h[b]=n.length/2;n.push(a.x,a.y);return h[b]}var f={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);if(void 0!==this.parameters){var g=this.parameters,k;for(k in g)void 0!==g[k]&&(f[k]=g[k]);return f}g=[];for(k=0;k<this.vertices.length;k++){var m=
this.vertices[k];g.push(m.x,m.y,m.z)}var m=[],u=[],p={},s=[],q={},n=[],h={};for(k=0;k<this.faces.length;k++){var t=this.faces[k],x=void 0!==this.faceVertexUvs[0][k],v=0<t.normal.length(),l=0<t.vertexNormals.length,y=1!==t.color.r||1!==t.color.g||1!==t.color.b,A=0<t.vertexColors.length,E=0,E=a(E,0,0),E=a(E,1,!1),E=a(E,2,!1),E=a(E,3,x),E=a(E,4,v),E=a(E,5,l),E=a(E,6,y),E=a(E,7,A);m.push(E);m.push(t.a,t.b,t.c);x&&(x=this.faceVertexUvs[0][k],m.push(e(x[0]),e(x[1]),e(x[2])));v&&m.push(b(t.normal));l&&(v=
t.vertexNormals,m.push(b(v[0]),b(v[1]),b(v[2])));y&&m.push(c(t.color));A&&(t=t.vertexColors,m.push(c(t[0]),c(t[1]),c(t[2])))}f.data={};f.data.vertices=g;f.data.normals=u;0<s.length&&(f.data.colors=s);0<n.length&&(f.data.uvs=[n]);f.data.faces=m;return f},clone:function(){return(new c.Geometry).copy(this)},copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,e=b.length;c<e;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(e=b.length;c<e;c++)this.faces.push(b[c].clone());
c=0;for(e=a.faceVertexUvs.length;c<e;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var f=0,g=b.length;f<g;f++){for(var k=b[f],m=[],u=0,p=k.length;u<p;u++)m.push(k[u].clone());this.faceVertexUvs[c].push(m)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})},set groupsNeedUpdate(a){!0===a&&this.dispose()}};c.EventDispatcher.prototype.apply(c.Geometry.prototype);c.GeometryIdCount=0;c.BufferGeometry=function(){Object.defineProperty(this,"id",
{value:c.GeometryIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="BufferGeometry";this.attributes={};this.morphAttributes={};this.drawcalls=[];this.boundingSphere=this.boundingBox=null};c.BufferGeometry.prototype={constructor:c.BufferGeometry,addAttribute:function(a,b,d){!1===b instanceof c.BufferAttribute&&!1===b instanceof c.InterleavedBufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[a]={array:b,itemSize:d}):
this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a]},get offsets(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .drawcalls.");return this.drawcalls},addDrawCall:function(a,b,c){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0})},clearDrawCalls:function(){this.drawcalls=[]},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;
void 0!==b&&((new c.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===
a&&(a=new c.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeTranslation(b,d,e);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeScale(b,d,e);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new c.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();
var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a instanceof c.PointCloud||a instanceof c.Line){a=new c.Float32Attribute(3*b.vertices.length,3);var d=new c.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",d.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new c.Float32Attribute(b.lineDistances.length,1),
this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof c.Mesh&&b instanceof c.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof c.Mesh){a=b.__directGeometry;if(void 0===a)return this.fromGeometry(b);a.verticesNeedUpdate=b.verticesNeedUpdate;a.normalsNeedUpdate=b.normalsNeedUpdate;a.colorsNeedUpdate=
b.colorsNeedUpdate;a.uvsNeedUpdate=b.uvsNeedUpdate;a.tangentsNeedUpdate=b.tangentsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.tangentsNeedUpdate=!1;b=a}!0===b.verticesNeedUpdate&&(a=this.attributes.position,void 0!==a&&(a.copyVector3sArray(b.vertices),a.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(a=this.attributes.normal,void 0!==a&&(a.copyVector3sArray(b.normals),a.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&
(a=this.attributes.color,void 0!==a&&(a.copyColorsArray(b.colors),a.needsUpdate=!0),b.colorsNeedUpdate=!1);!0===b.tangentsNeedUpdate&&(a=this.attributes.tangent,void 0!==a&&(a.copyVector4sArray(b.tangents),a.needsUpdate=!0),b.tangentsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(a=this.attributes.lineDistance,void 0!==a&&(a.copyArray(b.lineDistances),a.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new c.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},
fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new c.BufferAttribute(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new c.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new c.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),
this.addAttribute("uv",(new c.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new c.BufferAttribute(b,2)).copyVector2sArray(a.uvs2)));0<a.tangents.length&&(b=new Float32Array(4*a.tangents.length),this.addAttribute("tangent",(new c.BufferAttribute(b,4)).copyVector4sArray(a.tangents)));0<a.indices.length&&(b=new Uint16Array(3*a.indices.length),this.addAttribute("index",(new c.BufferAttribute(b,1)).copyIndicesArray(a.indices)));
for(var d in a.morphTargets){for(var b=[],e=a.morphTargets[d],f=0,g=e.length;f<g;f++){var k=e[f],m=new c.Float32Attribute(3*k.length,3);b.push(m.copyVector3sArray(k))}this.morphAttributes[d]=b}0<a.skinIndices.length&&(d=new c.Float32Attribute(4*a.skinIndices.length,4),this.addAttribute("skinIndex",d.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(d=new c.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",d.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&
(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){var a=new c.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new c.Box3);var b=this.attributes.position.array;if(b){var d=this.boundingBox;d.makeEmpty();for(var e=0,f=b.length;e<f;e+=3)a.fromArray(b,e),d.expandByPoint(a)}if(void 0===b||0===b.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||
isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var a=new c.Box3,b=new c.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new c.Sphere);var d=this.attributes.position.array;if(d){a.makeEmpty();for(var e=this.boundingSphere.center,f=0,g=d.length;f<g;f+=3)b.fromArray(d,f),
a.expandByPoint(b);a.center(e);for(var k=0,f=0,g=d.length;f<g;f+=3)b.fromArray(d,f),k=Math.max(k,e.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(k);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.attributes;if(a.position){var b=a.position.array;if(void 0===a.normal)this.addAttribute("normal",
new c.BufferAttribute(new Float32Array(b.length),3));else for(var d=a.normal.array,e=0,f=d.length;e<f;e++)d[e]=0;var d=a.normal.array,g,k,m,u=new c.Vector3,p=new c.Vector3,s=new c.Vector3,q=new c.Vector3,n=new c.Vector3;if(a.index){var h=a.index.array;0===this.drawcalls.length&&this.addDrawCall(0,h.length);for(var t=0,x=this.drawcalls.length;t<x;++t){f=this.drawcalls[t].start;g=this.drawcalls[t].count;for(var v=this.drawcalls[t].index,e=f,f=f+g;e<f;e+=3)g=3*(v+h[e]),k=3*(v+h[e+1]),m=3*(v+h[e+2]),
u.fromArray(b,g),p.fromArray(b,k),s.fromArray(b,m),q.subVectors(s,p),n.subVectors(u,p),q.cross(n),d[g]+=q.x,d[g+1]+=q.y,d[g+2]+=q.z,d[k]+=q.x,d[k+1]+=q.y,d[k+2]+=q.z,d[m]+=q.x,d[m+1]+=q.y,d[m+2]+=q.z}}else for(e=0,f=b.length;e<f;e+=9)u.fromArray(b,e),p.fromArray(b,e+3),s.fromArray(b,e+6),q.subVectors(s,p),n.subVectors(u,p),q.cross(n),d[e]=q.x,d[e+1]=q.y,d[e+2]=q.z,d[e+3]=q.x,d[e+4]=q.y,d[e+5]=q.z,d[e+6]=q.x,d[e+7]=q.y,d[e+8]=q.z;this.normalizeNormals();a.normal.needsUpdate=!0}},computeTangents:function(){function a(a,
b,c){q.fromArray(e,3*a);n.fromArray(e,3*b);h.fromArray(e,3*c);t.fromArray(g,2*a);x.fromArray(g,2*b);v.fromArray(g,2*c);l=n.x-q.x;y=h.x-q.x;A=n.y-q.y;E=h.y-q.y;B=n.z-q.z;r=h.z-q.z;C=x.x-t.x;z=v.x-t.x;H=x.y-t.y;w=v.y-t.y;L=1/(C*w-z*H);N.set((w*l-H*y)*L,(w*A-H*E)*L,(w*B-H*r)*L);M.set((C*y-z*l)*L,(C*E-z*A)*L,(C*r-z*B)*L);u[a].add(N);u[b].add(N);u[c].add(N);p[a].add(M);p[b].add(M);p[c].add(M)}function b(a){Y.fromArray(f,3*a);X.copy(Y);V=u[a];fa.copy(V);fa.sub(Y.multiplyScalar(Y.dot(V))).normalize();P.crossVectors(X,
V);Z=P.dot(p[a]);sa=0>Z?-1:1;m[4*a]=fa.x;m[4*a+1]=fa.y;m[4*a+2]=fa.z;m[4*a+3]=sa}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var d=this.attributes.index.array,e=this.attributes.position.array,f=this.attributes.normal.array,g=this.attributes.uv.array,k=e.length/3;void 0===this.attributes.tangent&&
this.addAttribute("tangent",new c.BufferAttribute(new Float32Array(4*k),4));for(var m=this.attributes.tangent.array,u=[],p=[],s=0;s<k;s++)u[s]=new c.Vector3,p[s]=new c.Vector3;var q=new c.Vector3,n=new c.Vector3,h=new c.Vector3,t=new c.Vector2,x=new c.Vector2,v=new c.Vector2,l,y,A,E,B,r,C,z,H,w,L,N=new c.Vector3,M=new c.Vector3,F,S,K,I,Q;0===this.drawcalls.length&&this.addDrawCall(0,d.length);var na=this.drawcalls,s=0;for(S=na.length;s<S;++s){F=na[s].start;K=na[s].count;var R=na[s].index,k=F;for(F+=
K;k<F;k+=3)K=R+d[k],I=R+d[k+1],Q=R+d[k+2],a(K,I,Q)}var fa=new c.Vector3,P=new c.Vector3,Y=new c.Vector3,X=new c.Vector3,sa,V,Z,s=0;for(S=na.length;s<S;++s)for(F=na[s].start,K=na[s].count,R=na[s].index,k=F,F+=K;k<F;k+=3)K=R+d[k],I=R+d[k+1],Q=R+d[k+2],b(K),b(I),b(Q)}},computeOffsets:function(a){void 0===a&&(a=c.BufferGeometry.MaxIndex);for(var b=this.attributes.index.array,d=this.attributes.position.array,e=b.length/3,f=new (65535<d.length/3&&65535<c.BufferGeometry.MaxIndex?Uint32Array:Uint16Array)(b.length),
g=0,k=0,m=[{start:0,count:0,index:0}],u=m[0],p=0,s=0,q=new Int32Array(6),n=new Int32Array(d.length),h=new Int32Array(d.length),t=0;t<d.length;t++)n[t]=-1,h[t]=-1;for(d=0;d<e;d++){for(var x=s=0;3>x;x++)t=b[3*d+x],-1===n[t]?(q[2*x]=t,q[2*x+1]=-1,s++):n[t]<u.index?(q[2*x]=t,q[2*x+1]=-1,p++):(q[2*x]=t,q[2*x+1]=n[t]);if(k+s>u.index+a)for(u={start:g,count:0,index:k},m.push(u),s=0;6>s;s+=2)x=q[s+1],-1<x&&x<u.index&&(q[s+1]=-1);for(s=0;6>s;s+=2)t=q[s],x=q[s+1],-1===x&&(x=k++),n[t]=x,h[x]=t,f[g++]=x-u.index,
u.count++}this.reorderBuffers(f,h,k);this.clearDrawCalls();for(a=0;a<m.length;a++)b=m[a],this.addDrawCall(b.start,b.count,b.index)},merge:function(a,b){if(!1===a instanceof c.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);else{void 0===b&&(b=0);var d=this.attributes,e;for(e in d)if(void 0!==a.attributes[e])for(var f=d[e].array,g=a.attributes[e],k=g.array,m=0,g=g.itemSize*b;m<k.length;m++,g++)f[g]=k[m];return this}},normalizeNormals:function(){for(var a=
this.attributes.normal.array,b,c,e,f=0,g=a.length;f<g;f+=3)b=a[f],c=a[f+1],e=a[f+2],b=1/Math.sqrt(b*b+c*c+e*e),a[f]*=b,a[f+1]*=b,a[f+2]*=b},reorderBuffers:function(a,b,c){var e={},f;for(f in this.attributes)"index"!==f&&(e[f]=new this.attributes[f].array.constructor(this.attributes[f].itemSize*c));for(var g=0;g<c;g++){var k=b[g];for(f in this.attributes)if("index"!==f)for(var m=this.attributes[f].array,u=this.attributes[f].itemSize,p=e[f],s=0;s<u;s++)p[g*u+s]=m[k*u+s]}this.attributes.index.array=
a;for(f in this.attributes)"index"!==f&&(this.attributes[f].array=e[f],this.attributes[f].numItems=this.attributes[f].itemSize*c)},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters,c;for(c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var b=this.attributes,e=this.drawcalls,f=this.boundingSphere;for(c in b){var g=
b[c],k=Array.prototype.slice.call(g.array);a.data.attributes[c]={itemSize:g.itemSize,type:g.array.constructor.name,array:k}}0<e.length&&(a.data.drawcalls=JSON.parse(JSON.stringify(e)));null!==f&&(a.data.boundingSphere={center:f.center.toArray(),radius:f.radius});return a},clone:function(){return(new c.BufferGeometry).copy(this)},copy:function(a){for(var b in a.attributes)this.addAttribute(b,a.attributes[b].clone());b=0;for(var c=a.drawcalls.length;b<c;b++){var e=a.drawcalls[b];this.addDrawCall(e.start,
e.count,e.index)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};c.EventDispatcher.prototype.apply(c.BufferGeometry.prototype);c.BufferGeometry.MaxIndex=65535;c.Camera=function(){c.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new c.Matrix4;this.projectionMatrix=new c.Matrix4};c.Camera.prototype=Object.create(c.Object3D.prototype);c.Camera.prototype.constructor=c.Camera;c.Camera.prototype.getWorldDirection=function(){var a=new c.Quaternion;return function(b){b=
b||new c.Vector3;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();c.Camera.prototype.lookAt=function(){var a=new c.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();c.Camera.prototype.clone=function(){return(new c.Camera).copy(this)};c.Camera.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};c.OrthographicCamera=
function(a,b,d,e,f,g){c.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=a;this.right=b;this.top=d;this.bottom=e;this.near=void 0!==f?f:.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};c.OrthographicCamera.prototype=Object.create(c.Camera.prototype);c.OrthographicCamera.prototype.constructor=c.OrthographicCamera;c.OrthographicCamera.prototype.updateProjectionMatrix=function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+
this.left)/2,e=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(c-a,c+a,e+b,e-b,this.near,this.far)};c.OrthographicCamera.prototype.clone=function(){var a=new c.OrthographicCamera;a.copy(this);a.zoom=this.zoom;a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};c.OrthographicCamera.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;
a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;return a};c.Light=function(a){c.Object3D.call(this);this.type="Light";this.color=new c.Color(a)};c.Light.prototype=Object.create(c.Object3D.prototype);c.Light.prototype.constructor=c.Light;c.Light.prototype.clone=function(){return(new c.Light).copy(this)};c.Light.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);return this};c.AmbientLight=function(a){c.Light.call(this,
a);this.type="AmbientLight"};c.AmbientLight.prototype=Object.create(c.Light.prototype);c.AmbientLight.prototype.constructor=c.AmbientLight;c.AmbientLight.prototype.clone=function(){var a=new c.AmbientLight;a.copy(this);return a};c.AmbientLight.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();return a};c.PointLight=function(a,b,d,e){c.Light.call(this,a);this.type="PointLight";this.intensity=void 0!==b?b:1;this.distance=void 0!==d?d:0;this.decay=
void 0!==e?e:1};c.PointLight.prototype=Object.create(c.Light.prototype);c.PointLight.prototype.constructor=c.PointLight;c.PointLight.prototype.clone=function(){var a=new c.PointLight;a.copy(this);a.intensity=this.intensity;a.distance=this.distance;a.decay=this.decay;return a};c.PointLight.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;a.object.distance=this.distance;a.object.decay=this.decay;return a};c.DirectionalLight=
function(a,b){c.Light.call(this,a);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new c.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=
this.shadowMapSize=this.shadowMap=null};c.DirectionalLight.prototype=Object.create(c.Light.prototype);c.DirectionalLight.prototype.constructor=c.DirectionalLight;c.DirectionalLight.prototype.clone=function(){var a=new c.DirectionalLight;a.copy(this);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraLeft=this.shadowCameraLeft;a.shadowCameraRight=
this.shadowCameraRight;a.shadowCameraTop=this.shadowCameraTop;a.shadowCameraBottom=this.shadowCameraBottom;a.shadowCameraVisible=this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;return a};c.DirectionalLight.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;return a};c.Material=function(){Object.defineProperty(this,
"id",{value:c.MaterialIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="Material";this.side=c.FrontSide;this.opacity=1;this.transparent=!1;this.blending=c.NormalBlending;this.blendSrc=c.SrcAlphaFactor;this.blendDst=c.OneMinusSrcAlphaFactor;this.blendEquation=c.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=c.LessEqualDepth;this.colorWrite=this.depthWrite=this.depthTest=!0;this.precision=null;this.polygonOffset=!1;this.overdraw=this.alphaTest=
this.polygonOffsetUnits=this.polygonOffsetFactor=0;this._needsUpdate=this.visible=!0};c.Material.prototype={constructor:c.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var d=a[b];if(void 0===d)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var e=this[b];e instanceof c.Color?e.set(d):e instanceof c.Vector3&&d instanceof c.Vector3?e.copy(d):this[b]=
"overdraw"===b?Number(d):d}}},toJSON:function(a){var b={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);this.color instanceof c.Color&&(b.color=this.color.getHex());this.emissive instanceof c.Color&&(b.emissive=this.emissive.getHex());this.specular instanceof c.Color&&(b.specular=this.specular.getHex());void 0!==this.shininess&&(b.shininess=this.shininess);this.map instanceof c.Texture&&(b.map=this.map.toJSON(a).uuid);
this.alphaMap instanceof c.Texture&&(b.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof c.Texture&&(b.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap instanceof c.Texture&&(b.bumpMap=this.bumpMap.toJSON(a).uuid,b.bumpScale=this.bumpScale);this.normalMap instanceof c.Texture&&(b.normalMap=this.normalMap.toJSON(a).uuid,b.normalScale=this.normalScale);this.specularMap instanceof c.Texture&&(b.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof c.Texture&&(b.envMap=
this.envMap.toJSON(a).uuid,b.reflectivity=this.reflectivity);void 0!==this.size&&(b.size=this.size);void 0!==this.sizeAttenuation&&(b.sizeAttenuation=this.sizeAttenuation);void 0!==this.vertexColors&&this.vertexColors!==c.NoColors&&(b.vertexColors=this.vertexColors);void 0!==this.shading&&this.shading!==c.SmoothShading&&(b.shading=this.shading);void 0!==this.blending&&this.blending!==c.NormalBlending&&(b.blending=this.blending);void 0!==this.side&&this.side!==c.FrontSide&&(b.side=this.side);1>this.opacity&&
(b.opacity=this.opacity);!0===this.transparent&&(b.transparent=this.transparent);0<this.alphaTest&&(b.alphaTest=this.alphaTest);!0===this.wireframe&&(b.wireframe=this.wireframe);return b},clone:function(){return(new c.Material).copy(this)},copy:function(a){this.name=a.name;this.side=a.side;this.opacity=a.opacity;this.transparent=a.transparent;this.blending=a.blending;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=
a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.overdraw=a.overdraw;this.visible=a.visible;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};c.EventDispatcher.prototype.apply(c.Material.prototype);
c.MaterialIdCount=0;c.LineBasicMaterial=function(a){c.Material.call(this);this.type="LineBasicMaterial";this.color=new c.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=c.NoColors;this.fog=!0;this.setValues(a)};c.LineBasicMaterial.prototype=Object.create(c.Material.prototype);c.LineBasicMaterial.prototype.constructor=c.LineBasicMaterial;c.LineBasicMaterial.prototype.clone=function(){var a=new c.LineBasicMaterial;a.copy(this);a.color.copy(this.color);a.linewidth=
this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};c.MeshBasicMaterial=function(a){c.Material.call(this);this.type="MeshBasicMaterial";this.color=new c.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=c.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=c.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=
this.wireframeLinecap="round";this.vertexColors=c.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};c.MeshBasicMaterial.prototype=Object.create(c.Material.prototype);c.MeshBasicMaterial.prototype.constructor=c.MeshBasicMaterial;c.MeshBasicMaterial.prototype.clone=function(){var a=new c.MeshBasicMaterial;a.copy(this);a.color.copy(this.color);a.map=this.map;a.aoMap=this.aoMap;a.aoMapIntensity=this.aoMapIntensity;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;
a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};c.MeshLambertMaterial=function(a){c.Material.call(this);this.type="MeshLambertMaterial";this.color=new c.Color(16777215);
this.emissive=new c.Color(0);this.envMap=this.alphaMap=this.specularMap=this.map=null;this.combine=c.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=c.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=c.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};c.MeshLambertMaterial.prototype=Object.create(c.Material.prototype);c.MeshLambertMaterial.prototype.constructor=
c.MeshLambertMaterial;c.MeshLambertMaterial.prototype.clone=function(){var a=new c.MeshLambertMaterial;a.copy(this);a.color.copy(this.color);a.emissive.copy(this.emissive);a.map=this.map;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;
a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};c.MeshFaceMaterial=function(a){this.uuid=c.Math.generateUUID();this.type="MeshFaceMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};c.MeshFaceMaterial.prototype={constructor:c.MeshFaceMaterial,toJSON:function(){for(var a={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,
materials:[]},b=0,c=this.materials.length;b<c;b++)a.materials.push(this.materials[b].toJSON());a.visible=this.visible;return a},clone:function(){for(var a=new c.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};c.MeshPhongMaterial=function(a){c.Material.call(this);this.type="MeshPhongMaterial";this.color=new c.Color(16777215);this.emissive=new c.Color(0);this.specular=new c.Color(1118481);this.shininess=30;this.metal=!1;
this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new c.Vector2(1,1);this.envMap=this.alphaMap=this.specularMap=null;this.combine=c.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=c.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=c.NoColors;this.morphNormals=
this.morphTargets=this.skinning=!1;this.setValues(a)};c.MeshPhongMaterial.prototype=Object.create(c.Material.prototype);c.MeshPhongMaterial.prototype.constructor=c.MeshPhongMaterial;c.MeshPhongMaterial.prototype.copy=function(a){c.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.emissive.copy(a.emissive);this.specular.copy(a.specular);this.shininess=a.shininess;this.metal=a.metal;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;
this.aoMapIntensity=a.aoMapIntensity;this.emissiveMap=a.emissiveMap;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;
this.wireframeLinejoin=a.wireframeLinejoin;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};c.MeshPhongMaterial.prototype.clone=function(){return(new c.MeshPhongMaterial).copy(this)};c.MeshDepthMaterial=function(a){c.Material.call(this);this.type="MeshDepthMaterial";this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};c.MeshDepthMaterial.prototype=Object.create(c.Material.prototype);
c.MeshDepthMaterial.prototype.constructor=c.MeshDepthMaterial;c.MeshDepthMaterial.prototype.clone=function(){var a=new c.MeshDepthMaterial;a.copy(this);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};c.MeshNormalMaterial=function(a){c.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};c.MeshNormalMaterial.prototype=Object.create(c.Material.prototype);c.MeshNormalMaterial.prototype.constructor=
c.MeshNormalMaterial;c.MeshNormalMaterial.prototype.clone=function(){var a=new c.MeshNormalMaterial;a.copy(this);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};c.SpriteMaterial=function(a){c.Material.call(this);this.type="SpriteMaterial";this.color=new c.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};c.SpriteMaterial.prototype=Object.create(c.Material.prototype);c.SpriteMaterial.prototype.constructor=c.SpriteMaterial;c.SpriteMaterial.prototype.clone=
function(){var a=new c.SpriteMaterial;a.copy(this);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.fog=this.fog;return a};c.Texture=function(a,b,d,e,f,g,k,m,u){Object.defineProperty(this,"id",{value:c.TextureIdCount++});this.uuid=c.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:c.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:c.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==d?d:c.ClampToEdgeWrapping;this.wrapT=void 0!==e?e:c.ClampToEdgeWrapping;
this.magFilter=void 0!==f?f:c.LinearFilter;this.minFilter=void 0!==g?g:c.LinearMipMapLinearFilter;this.anisotropy=void 0!==u?u:1;this.format=void 0!==k?k:c.RGBAFormat;this.type=void 0!==m?m:c.UnsignedByteType;this.offset=new c.Vector2(0,0);this.repeat=new c.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.version=0;this.onUpdate=null};c.Texture.DEFAULT_IMAGE=void 0;c.Texture.DEFAULT_MAPPING=c.UVMapping;c.Texture.prototype={constructor:c.Texture,
set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new c.Texture).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=
a.unpackAlignment;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=c.Math.generateUUID());
if(void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid,k;void 0!==d.toDataURL?k=d:(k=document.createElement("canvas"),k.width=d.width,k.height=d.height,k.getContext("2d").drawImage(d,0,0,d.width,d.height));k=2048<k.width||2048<k.height?k.toDataURL("image/jpeg",.6):k.toDataURL("image/png");e[f]={uuid:g,url:k}}b.image=d.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})}};c.EventDispatcher.prototype.apply(c.Texture.prototype);c.TextureIdCount=0;c.CompressedTexture=
function(a,b,d,e,f,g,k,m,u,p,s){c.Texture.call(this,null,g,k,m,u,p,e,f,s);this.image={width:b,height:d};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};c.CompressedTexture.prototype=Object.create(c.Texture.prototype);c.CompressedTexture.prototype.constructor=c.CompressedTexture;c.CompressedTexture.prototype.clone=function(){var a=new c.CompressedTexture;a.copy(this);return a};c.DataTexture=function(a,b,d,e,f,g,k,m,u,p,s){c.Texture.call(this,null,g,k,m,u,p,e,f,s);this.image={data:a,width:b,height:d}};
c.DataTexture.prototype=Object.create(c.Texture.prototype);c.DataTexture.prototype.constructor=c.DataTexture;c.DataTexture.prototype.clone=function(){var a=new c.DataTexture;a.copy(this);return a};c.Line=function(a,b,d){1===d&&console.error("THREE.Line: THREE.LinePieces mode has been removed. Use THREE.LineSegments instead.");c.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new c.Geometry;this.material=void 0!==b?b:new c.LineBasicMaterial({color:16777215*Math.random()})};c.Line.prototype=
Object.create(c.Object3D.prototype);c.Line.prototype.constructor=c.Line;c.Line.prototype.raycast=function(){var a=new c.Matrix4,b=new c.Ray,d=new c.Sphere;return function(e,f){var g=e.linePrecision,g=g*g,k=this.geometry;null===k.boundingSphere&&k.computeBoundingSphere();d.copy(k.boundingSphere);d.applyMatrix4(this.matrixWorld);if(!1!==e.ray.isIntersectionSphere(d)){a.getInverse(this.matrixWorld);b.copy(e.ray).applyMatrix4(a);var m=new c.Vector3,u=new c.Vector3,p=new c.Vector3,s=new c.Vector3,q=this instanceof
c.LineSegments?2:1;if(k instanceof c.BufferGeometry){var n=k.attributes;if(void 0!==n.index){var h=n.index.array,n=n.position.array,t=k.drawcalls;0===t.length&&(t=[{start:0,count:h.length,index:0}]);for(var x=0;x<t.length;x++)for(var v=t[x].start,l=t[x].count,y=t[x].index,k=v;k<v+l-1;k+=q){var A=y+h[k+1];m.fromArray(n,3*(y+h[k]));u.fromArray(n,3*A);A=b.distanceSqToSegment(m,u,s,p);A>g||(A=b.origin.distanceTo(s),A<e.near||A>e.far||f.push({distance:A,point:p.clone().applyMatrix4(this.matrixWorld),index:k,
offsetIndex:x,face:null,faceIndex:null,object:this}))}}else for(n=n.position.array,k=0;k<n.length/3-1;k+=q)m.fromArray(n,3*k),u.fromArray(n,3*k+3),A=b.distanceSqToSegment(m,u,s,p),A>g||(A=b.origin.distanceTo(s),A<e.near||A>e.far||f.push({distance:A,point:p.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}else if(k instanceof c.Geometry)for(m=k.vertices,u=m.length,k=0;k<u-1;k+=q)A=b.distanceSqToSegment(m[k],m[k+1],s,p),A>g||(A=b.origin.distanceTo(s),A<e.near||
A>e.far||f.push({distance:A,point:p.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this}))}}}();c.Line.prototype.clone=function(){return(new c.Line(this.geometry,this.material)).copy(this)};c.Line.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);return this};c.Line.prototype.toJSON=function(a){var b=c.Object3D.prototype.toJSON.call(this,a);void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON());void 0===
a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON());b.object.geometry=this.geometry.uuid;b.object.material=this.material.uuid;return b};c.LineStrip=0;c.LinePieces=1;c.LineSegments=function(a,b){c.Line.call(this,a,b);this.type="LineSegments"};c.LineSegments.prototype=Object.create(c.Line.prototype);c.LineSegments.prototype.constructor=c.LineSegments;c.LineSegments.prototype.clone=function(){var a=new c.LineSegments(this.geometry,this.material);a.copy(this);return a};
c.Mesh=function(a,b){c.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new c.Geometry;this.material=void 0!==b?b:new c.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};c.Mesh.prototype=Object.create(c.Object3D.prototype);c.Mesh.prototype.constructor=c.Mesh;c.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=
[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};c.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};c.Mesh.prototype.raycast=function(){var a=new c.Matrix4,b=new c.Ray,
d=new c.Sphere,e=new c.Vector3,f=new c.Vector3,g=new c.Vector3,k=new c.Vector3,m=new c.Vector3,u=new c.Vector3;return function(p,s){var q=this.geometry,n=this.material;if(void 0!==n&&(null===q.boundingSphere&&q.computeBoundingSphere(),d.copy(q.boundingSphere),d.applyMatrix4(this.matrixWorld),!1!==p.ray.isIntersectionSphere(d)&&(a.getInverse(this.matrixWorld),b.copy(p.ray).applyMatrix4(a),null===q.boundingBox||!1!==b.isIntersectionBox(q.boundingBox)))){var h,t,x;if(q instanceof c.BufferGeometry)if(h=
q.attributes,void 0!==h.index){var v=h.index.array,l=h.position.array,q=q.drawcalls;0===q.length&&(q=[{start:0,count:v.length,index:0}]);for(var y=0,A=q.length;y<A;++y){h=q[y].start;for(var E=q[y].index,B=h,r=h+q[y].count;B<r;B+=3){h=E+v[B];t=E+v[B+1];x=E+v[B+2];e.fromArray(l,3*h);f.fromArray(l,3*t);g.fromArray(l,3*x);var C=n.side===c.BackSide?b.intersectTriangle(g,f,e,!0):b.intersectTriangle(e,f,g,n.side!==c.DoubleSide);if(null!==C){C.applyMatrix4(this.matrixWorld);var z=p.ray.origin.distanceTo(C);
z<p.near||z>p.far||s.push({distance:z,point:C,face:new c.Face3(h,t,x,c.Triangle.normal(e,f,g)),faceIndex:Math.floor(B/3),object:this})}}}}else for(l=h.position.array,B=0,r=l.length;B<r;B+=9)e.fromArray(l,B),f.fromArray(l,B+3),g.fromArray(l,B+6),C=n.side===c.BackSide?b.intersectTriangle(g,f,e,!0):b.intersectTriangle(e,f,g,n.side!==c.DoubleSide),null!==C&&(C.applyMatrix4(this.matrixWorld),z=p.ray.origin.distanceTo(C),z<p.near||z>p.far||(h=B/3,t=h+1,x=h+2,s.push({distance:z,point:C,face:new c.Face3(h,
t,x,c.Triangle.normal(e,f,g)),index:h,object:this})));else if(q instanceof c.Geometry)for(v=n instanceof c.MeshFaceMaterial,l=!0===v?n.materials:null,y=q.vertices,A=q.faces,E=0,B=A.length;E<B;E++)if(r=A[E],C=!0===v?l[r.materialIndex]:n,void 0!==C){h=y[r.a];t=y[r.b];x=y[r.c];if(!0===C.morphTargets){var z=q.morphTargets,H=this.morphTargetInfluences;e.set(0,0,0);f.set(0,0,0);g.set(0,0,0);for(var w=0,L=z.length;w<L;w++){var N=H[w];if(0!==N){var M=z[w].vertices;e.addScaledVector(k.subVectors(M[r.a],h),
N);f.addScaledVector(m.subVectors(M[r.b],t),N);g.addScaledVector(u.subVectors(M[r.c],x),N)}}e.add(h);f.add(t);g.add(x);h=e;t=f;x=g}C=C.side===c.BackSide?b.intersectTriangle(x,t,h,!0):b.intersectTriangle(h,t,x,C.side!==c.DoubleSide);null!==C&&(C.applyMatrix4(this.matrixWorld),z=p.ray.origin.distanceTo(C),z<p.near||z>p.far||s.push({distance:z,point:C,face:r,faceIndex:E,object:this}))}}}}();c.Mesh.prototype.clone=function(){return(new c.Mesh(this.geometry,this.material)).copy(this)};c.Mesh.prototype.copy=
function(a){c.Object3D.prototype.copy.call(this,a);return this};c.Mesh.prototype.toJSON=function(a){var b=c.Object3D.prototype.toJSON.call(this,a);void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a));void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a));b.object.geometry=this.geometry.uuid;b.object.material=this.material.uuid;return b};c.Sprite=function(){var a=new Uint16Array([0,1,2,0,2,3]),b=new Float32Array([-.5,
-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),d=new Float32Array([0,0,1,0,1,1,0,1]),e=new c.BufferGeometry;e.addAttribute("index",new c.BufferAttribute(a,1));e.addAttribute("position",new c.BufferAttribute(b,3));e.addAttribute("uv",new c.BufferAttribute(d,2));return function(a){c.Object3D.call(this);this.type="Sprite";this.geometry=e;this.material=void 0!==a?a:new c.SpriteMaterial}}();c.Sprite.prototype=Object.create(c.Object3D.prototype);c.Sprite.prototype.constructor=c.Sprite;c.Sprite.prototype.raycast=function(){var a=
new c.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var e=b.ray.distanceSqToPoint(a);e>this.scale.x*this.scale.y||c.push({distance:Math.sqrt(e),point:this.position,face:null,object:this})}}();c.Sprite.prototype.clone=function(){return(new c.Sprite(this.material)).copy(this)};c.Sprite.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);return this};c.Sprite.prototype.toJSON=function(a){var b=c.Object3D.prototype.toJSON.call(this,a);void 0===a.materials[this.material.uuid]&&
(a.materials[this.material.uuid]=this.material.toJSON());b.object.material=this.material.uuid;return b};c.Particle=c.Sprite;c.Scene=function(){c.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};c.Scene.prototype=Object.create(c.Object3D.prototype);c.Scene.prototype.constructor=c.Scene;c.Scene.prototype.clone=function(){return(new c.Scene).copy(this)};c.Scene.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);null!==a.fog&&(this.fog=a.fog.clone());
null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};c.RenderableObject=function(){this.id=0;this.object=null;this.renderOrder=this.z=0};c.RenderableFace=function(){this.id=0;this.v1=new c.RenderableVertex;this.v2=new c.RenderableVertex;this.v3=new c.RenderableVertex;this.normalModel=new c.Vector3;this.vertexNormalsModel=[new c.Vector3,new c.Vector3,new c.Vector3];this.vertexNormalsLength=0;
this.color=new c.Color;this.material=null;this.uvs=[new c.Vector2,new c.Vector2,new c.Vector2];this.renderOrder=this.z=0};c.RenderableVertex=function(){this.position=new c.Vector3;this.positionWorld=new c.Vector3;this.positionScreen=new c.Vector4;this.visible=!0};c.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};c.RenderableLine=function(){this.id=0;this.v1=new c.RenderableVertex;this.v2=new c.RenderableVertex;this.vertexColors=
[new c.Color,new c.Color];this.material=null;this.renderOrder=this.z=0};c.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=this.x=0;this.scale=new c.Vector2;this.material=null;this.renderOrder=0};c.Projector=function(){function a(){if(q===h){var a=new c.RenderableVertex;n.push(a);h++;q++;return a}return n[q++]}function b(){if(x===l){var a=new c.RenderableFace;v.push(a);l++;x++;return a}return v[x++]}function d(){if(A===B){var a=new c.RenderableLine;E.push(a);B++;
A++;return a}return E[A++]}function e(){if(C===H){var a=new c.RenderableSprite;z.push(a);H++;C++;return a}return z[C++]}function f(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function g(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,k=-b.z+b.w;if(0<=e&&0<=f&&0<=g&&0<=k)return!0;if(0>e&&0>f||0>g&&0>k)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-k)):0>k&&(d=Math.min(d,g/(g-k)));if(d<c)return!1;
a.lerp(b,c);b.lerp(a,1-d);return!0}var k,m,u=[],p=0,s,q,n=[],h=0,t,x,v=[],l=0,y,A,E=[],B=0,r,C,z=[],H=0,w={objects:[],lights:[],elements:[]},L=new c.Vector3,N=new c.Vector4,M=new c.Box3(new c.Vector3(-1,-1,-1),new c.Vector3(1,1,1)),F=new c.Box3,S=Array(3),K=new c.Matrix4,I=new c.Matrix4,Q,na=new c.Matrix4,R=new c.Matrix3,P=new c.Frustum,J=new c.Vector4,Y=new c.Vector4;this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=
function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var X=new function(){var e=[],f=[],g=null,k=null,m=new c.Matrix3,q=function(a){var b=a.positionWorld,c=a.positionScreen;b.copy(a.position).applyMatrix4(Q);c.copy(b).applyMatrix4(I);b=1/c.w;c.x*=b;c.y*=b;c.z*=b;a.visible=-1<=c.x&&1>=c.x&&-1<=c.y&&1>=c.y&&-1<=c.z&&1>=c.z},u=function(a,
b,c){if(!0===a.visible||!0===b.visible||!0===c.visible)return!0;S[0]=a.positionScreen;S[1]=b.positionScreen;S[2]=c.positionScreen;return M.isIntersectionBox(F.setFromPoints(S))},p=function(a,b,c){return 0>(c.positionScreen.x-a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(c.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x)};return{setObject:function(a){g=a;k=g.material;m.getNormalMatrix(g.matrixWorld);e.length=0;f.length=0},projectVertex:q,checkTriangleVisibility:u,
checkBackfaceCulling:p,pushVertex:function(b,c,d){s=a();s.position.set(b,c,d);q(s)},pushNormal:function(a,b,c){e.push(a,b,c)},pushUv:function(a,b){f.push(a,b)},pushLine:function(a,b){var c=n[a],e=n[b];y=d();y.id=g.id;y.v1.copy(c);y.v2.copy(e);y.z=(c.positionScreen.z+e.positionScreen.z)/2;y.renderOrder=g.renderOrder;y.material=g.material;w.elements.push(y)},pushTriangle:function(a,d,q){var s=n[a],h=n[d],A=n[q];if(!1!==u(s,h,A)&&(k.side===c.DoubleSide||!0===p(s,h,A))){t=b();t.id=g.id;t.v1.copy(s);t.v2.copy(h);
t.v3.copy(A);t.z=(s.positionScreen.z+h.positionScreen.z+A.positionScreen.z)/3;t.renderOrder=g.renderOrder;t.normalModel.fromArray(e,3*a);t.normalModel.applyMatrix3(m).normalize();for(s=0;3>s;s++)h=t.vertexNormalsModel[s],h.fromArray(e,3*arguments[s]),h.applyMatrix3(m).normalize(),t.uvs[s].fromArray(f,2*arguments[s]);t.vertexNormalsLength=3;t.material=g.material;w.elements.push(t)}}}};this.projectScene=function(s,h,v,E){C=A=x=0;w.elements.length=0;!0===s.autoUpdate&&s.updateMatrixWorld();void 0===
h.parent&&h.updateMatrixWorld();K.copy(h.matrixWorldInverse.getInverse(h.matrixWorld));I.multiplyMatrices(h.projectionMatrix,K);P.setFromMatrix(I);m=0;w.objects.length=0;w.lights.length=0;s.traverseVisible(function(a){if(a instanceof c.Light)w.lights.push(a);else if(a instanceof c.Mesh||a instanceof c.Line||a instanceof c.Sprite){var b=a.material;null===b||!1===b.visible||!1!==a.frustumCulled&&!0!==P.intersectsObject(a)||(m===p?(b=new c.RenderableObject,u.push(b),p++,m++,k=b):k=u[m++],k.id=a.id,k.object=
a,L.setFromMatrixPosition(a.matrixWorld),L.applyProjection(I),k.z=L.z,k.renderOrder=a.renderOrder,w.objects.push(k))}});!0===v&&w.objects.sort(f);s=0;for(v=w.objects.length;s<v;s++){var l=w.objects[s].object,B=l.geometry;X.setObject(l);Q=l.matrixWorld;q=0;if(l instanceof c.Mesh)if(B instanceof c.BufferGeometry){var D=B.attributes,l=B.drawcalls;if(void 0!==D.position){for(var W=D.position.array,z=0,H=W.length;z<H;z+=3)X.pushVertex(W[z],W[z+1],W[z+2]);if(void 0!==D.normal)for(var S=D.normal.array,z=
0,H=S.length;z<H;z+=3)X.pushNormal(S[z],S[z+1],S[z+2]);if(void 0!==D.uv)for(S=D.uv.array,z=0,H=S.length;z<H;z+=2)X.pushUv(S[z],S[z+1]);if(void 0!==D.index)if(D=D.index.array,0<l.length)for(s=0;s<l.length;s++)for(H=l[s],W=H.index,z=H.start,H=H.start+H.count;z<H;z+=3)X.pushTriangle(D[z]+W,D[z+1]+W,D[z+2]+W);else for(z=0,H=D.length;z<H;z+=3)X.pushTriangle(D[z],D[z+1],D[z+2]);else for(z=0,H=W.length/3;z<H;z+=3)X.pushTriangle(z,z+1,z+2)}}else{if(B instanceof c.Geometry){var F=B.vertices,z=B.faces,H=B.faceVertexUvs[0];
R.getNormalMatrix(Q);for(var D=l.material,W=D instanceof c.MeshFaceMaterial,S=!0===W?l.material:null,M=0,G=F.length;M<G;M++){var $=F[M];L.copy($);if(!0===D.morphTargets)for(var da=B.morphTargets,ea=l.morphTargetInfluences,ba=0,ja=da.length;ba<ja;ba++){var ga=ea[ba];if(0!==ga){var ma=da[ba].vertices[M];L.x+=(ma.x-$.x)*ga;L.y+=(ma.y-$.y)*ga;L.z+=(ma.z-$.z)*ga}}X.pushVertex(L.x,L.y,L.z)}F=0;for(M=z.length;F<M;F++)if(G=z[F],D=!0===W?S.materials[G.materialIndex]:l.material,void 0!==D&&(ea=D.side,B=n[G.a],
$=n[G.b],da=n[G.c],!1!==X.checkTriangleVisibility(B,$,da))){ba=X.checkBackfaceCulling(B,$,da);if(ea!==c.DoubleSide){if(ea===c.FrontSide&&!1===ba)continue;if(ea===c.BackSide&&!0===ba)continue}t=b();t.id=l.id;t.v1.copy(B);t.v2.copy($);t.v3.copy(da);t.normalModel.copy(G.normal);!1!==ba||ea!==c.BackSide&&ea!==c.DoubleSide||t.normalModel.negate();t.normalModel.applyMatrix3(R).normalize();ja=G.vertexNormals;ga=0;for(ma=Math.min(ja.length,3);ga<ma;ga++){var oa=t.vertexNormalsModel[ga];oa.copy(ja[ga]);!1!==
ba||ea!==c.BackSide&&ea!==c.DoubleSide||oa.negate();oa.applyMatrix3(R).normalize()}t.vertexNormalsLength=ja.length;ea=H[F];if(void 0!==ea)for(ba=0;3>ba;ba++)t.uvs[ba].copy(ea[ba]);t.color=G.color;t.material=D;t.z=(B.positionScreen.z+$.positionScreen.z+da.positionScreen.z)/3;t.renderOrder=l.renderOrder;w.elements.push(t)}}}else if(l instanceof c.Line)if(B instanceof c.BufferGeometry){if(D=B.attributes,void 0!==D.position){W=D.position.array;z=0;for(H=W.length;z<H;z+=3)X.pushVertex(W[z],W[z+1],W[z+
2]);if(void 0!==D.index)for(D=D.index.array,z=0,H=D.length;z<H;z+=2)X.pushLine(D[z],D[z+1]);else for(D=l instanceof c.LineSegments?2:1,z=0,H=W.length/3-1;z<H;z+=D)X.pushLine(z,z+1)}}else{if(B instanceof c.Geometry&&(na.multiplyMatrices(I,Q),F=l.geometry.vertices,0!==F.length))for(B=a(),B.positionScreen.copy(F[0]).applyMatrix4(na),D=l instanceof c.LineSegments?2:1,M=1,G=F.length;M<G;M++)B=a(),B.positionScreen.copy(F[M]).applyMatrix4(na),0<(M+1)%D||($=n[q-2],J.copy(B.positionScreen),Y.copy($.positionScreen),
!0===g(J,Y)&&(J.multiplyScalar(1/J.w),Y.multiplyScalar(1/Y.w),y=d(),y.id=l.id,y.v1.positionScreen.copy(J),y.v2.positionScreen.copy(Y),y.z=Math.max(J.z,Y.z),y.renderOrder=l.renderOrder,y.material=l.material,l.material.vertexColors===c.VertexColors&&(y.vertexColors[0].copy(l.geometry.colors[M]),y.vertexColors[1].copy(l.geometry.colors[M-1])),w.elements.push(y)))}else l instanceof c.Sprite&&(N.set(Q.elements[12],Q.elements[13],Q.elements[14],1),N.applyMatrix4(I),z=1/N.w,N.z*=z,-1<=N.z&&1>=N.z&&(r=e(),
r.id=l.id,r.x=N.x*z,r.y=N.y*z,r.z=N.z,r.renderOrder=l.renderOrder,r.object=l,r.rotation=l.rotation,r.scale.x=l.scale.x*Math.abs(r.x-(N.x+h.projectionMatrix.elements[0])/(N.w+h.projectionMatrix.elements[12])),r.scale.y=l.scale.y*Math.abs(r.y-(N.y+h.projectionMatrix.elements[5])/(N.w+h.projectionMatrix.elements[13])),r.material=l.material,w.elements.push(r)))}!0===E&&w.elements.sort(f);return w}};c.SpriteCanvasMaterial=function(a){c.Material.call(this);this.type="SpriteCanvasMaterial";this.color=new c.Color(16777215);
this.program=function(a,c){};this.setValues(a)};c.SpriteCanvasMaterial.prototype=Object.create(c.Material.prototype);c.SpriteCanvasMaterial.prototype.constructor=c.SpriteCanvasMaterial;c.SpriteCanvasMaterial.prototype.clone=function(){var a=new c.SpriteCanvasMaterial;a.copy(this);a.color.copy(this.color);a.program=this.program;return a};c.CanvasRenderer=function(a){function b(a,b,c,d){u(b);h(c);s(d);q(a.getStyle());F.stroke();ka.expandByScalar(2*b)}function d(a){n(a.getStyle());F.fill()}function e(a){if(0===
a.version||a instanceof c.CompressedTexture||a instanceof c.DataTexture)return{canvas:void 0,version:a.version};var b=a.image,d=document.createElement("canvas");d.width=b.width;d.height=b.height;var e=d.getContext("2d");e.setTransform(1,0,0,-1,0,b.height);e.drawImage(b,0,0);var b=a.wrapS===c.RepeatWrapping,e=a.wrapT===c.RepeatWrapping,f="no-repeat";!0===b&&!0===e?f="repeat":!0===b?f="repeat-x":!0===e&&(f="repeat-y");return{canvas:F.createPattern(d,f),version:a.version}}function f(a,b,c,d,f,g,k,m,
q,s,u,h,p){var A=$[p.id];if(void 0===A||A.version!==p.version)A=e(p),$[p.id]=A;if(void 0!==A.canvas){n(A.canvas);var A=p.offset.x/p.repeat.x,t=p.offset.y/p.repeat.y,x=p.image.width*p.repeat.x;p=p.image.height*p.repeat.y;k=(k+A)*x;m=(m+t)*p;c-=a;d-=b;f-=a;g-=b;q=(q+A)*x-k;s=(s+t)*p-m;u=(u+A)*x-k;h=(h+t)*p-m;p=q*h-u*s;0!==p&&(A=1/p,p=(h*c-s*f)*A,s=(h*d-s*g)*A,c=(q*f-u*c)*A,d=(q*g-u*d)*A,a=a-p*k-c*m,b=b-s*k-d*m,F.save(),F.transform(p,s,c,d,a,b),F.fill(),F.restore())}else n("rgba( 0, 0, 0, 1)"),F.fill()}
function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function k(a){I!==a&&(I=F.globalAlpha=a)}function m(a){Q!==a&&(a===c.NormalBlending?F.globalCompositeOperation="source-over":a===c.AdditiveBlending?F.globalCompositeOperation="lighter":a===c.SubtractiveBlending&&(F.globalCompositeOperation="darker"),Q=a)}function u(a){J!==a&&(J=F.lineWidth=a)}function h(a){P!==a&&(P=F.lineCap=a)}function s(a){Y!==a&&(Y=F.lineJoin=a)}function q(a){G!==
a&&(G=F.strokeStyle=a)}function n(a){R!==a&&(R=F.fillStyle=a)}function l(a){X.length!==a.length&&(F.setLineDash(a),X=a)}console.log("THREE.CanvasRenderer",c.REVISION);var t=c.Math.smoothstep;a=a||{};var x=this,v,r,y,A=new c.Projector,E=void 0!==a.canvas?a.canvas:document.createElement("canvas"),B=E.width,ca=E.height,C=Math.floor(B/2),z=Math.floor(ca/2),H=0,w=0,L=B,N=ca,M=1,F=E.getContext("2d",{alpha:!0===a.alpha}),S=new c.Color(0),K=!0===a.alpha?0:1,I=1,Q=0,G=null,R=null,J=null,P=null,Y=null,X=[],
sa,V,Z,ia;new c.RenderableVertex;new c.RenderableVertex;var ra,la,xa,ua,ya,za,aa=new c.Color;new c.Color;new c.Color;new c.Color;new c.Color;var va=new c.Color,Ea=new c.Color,Ka=new c.Color,$={},da,ea,ba,ja,ga,ma,oa,wa=new c.Box2,U=new c.Box2,ka=new c.Box2,Ma=new c.Color,Na=new c.Color,Aa=new c.Color,Oa=new c.Vector3,Pa=new c.Vector3,ha=new c.Vector3,Ba=new c.Matrix3;void 0===F.setLineDash&&(F.setLineDash=function(){});this.domElement=E;this.sortElements=this.sortObjects=this.autoClear=!0;this.info=
{render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.getContext=function(){return F};this.getContextAttributes=function(){return F.getContextAttributes()};this.getPixelRatio=function(){return M};this.setPixelRatio=function(a){void 0!==a&&(M=a)};this.setSize=function(a,b,c){B=a*M;ca=b*M;E.width=B;E.height=ca;C=Math.floor(B/2);z=Math.floor(ca/2);!1!==c&&(E.style.width=a+"px",E.style.height=b+"px");wa.min.set(-C,-z);wa.max.set(C,z);U.min.set(-C,
-z);U.max.set(C,z);I=1;Q=0;Y=P=J=R=G=null;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){H=a*M;w=b*M;L=c*M;N=d*M};this.setScissor=function(){};this.enableScissorTest=function(){};this.setClearColor=function(a,b){S.set(a);K=void 0!==b?b:1;U.min.set(-C,-z);U.max.set(C,z)};this.setClearColorHex=function(a,b){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return S};this.getClearAlpha=
function(){return K};this.getMaxAnisotropy=function(){return 0};this.clear=function(){!1===U.empty()&&(U.intersect(wa),U.expandByScalar(2),U.min.x+=C,U.min.y=-U.min.y+z,U.max.x+=C,U.max.y=-U.max.y+z,1>K&&F.clearRect(U.min.x|0,U.max.y|0,U.max.x-U.min.x|0,U.min.y-U.max.y|0),0<K&&(m(c.NormalBlending),k(1),n("rgba("+Math.floor(255*S.r)+","+Math.floor(255*S.g)+","+Math.floor(255*S.b)+","+K+")"),F.fillRect(U.min.x|0,U.max.y|0,U.max.x-U.min.x|0,U.min.y-U.max.y|0)),U.makeEmpty())};this.clearColor=function(){};
this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(a,E){if(!1===E instanceof c.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.autoClear&&this.clear();x.info.render.vertices=0;x.info.render.faces=0;F.setTransform(L/B,0,0,-N/ca,H,ca-w);F.translate(C,z);v=A.projectScene(a,E,this.sortObjects,this.sortElements);r=v.elements;y=v.lights;sa=E;Ba.getNormalMatrix(E.matrixWorldInverse);Ma.setRGB(0,0,0);Na.setRGB(0,
0,0);Aa.setRGB(0,0,0);for(var S=0,M=y.length;S<M;S++){var I=y[S],K=I.color;I instanceof c.AmbientLight?Ma.add(K):I instanceof c.DirectionalLight?Na.add(K):I instanceof c.PointLight&&Aa.add(K)}S=0;for(M=r.length;S<M;S++){var O=r[S],Q=O.material;if(void 0!==Q&&0!==Q.opacity){ka.makeEmpty();if(O instanceof c.RenderableSprite){V=O;V.x*=C;V.y*=z;var I=V,T=O,K=Q;k(K.opacity);m(K.blending);var G=T.scale.x*C,T=T.scale.y*z,O=.5*Math.sqrt(G*G+T*T);ka.min.set(I.x-O,I.y-O);ka.max.set(I.x+O,I.y+O);if(K instanceof
c.SpriteMaterial){var R=K.map;if(null!==R){O=$[R.id];if(void 0===O||O.version!==R.version)O=e(R),$[R.id]=O;if(void 0!==O.canvas){n(O.canvas);var J=R.image,O=J.width*R.offset.x,Q=J.height*R.offset.y,P=J.width*R.repeat.x,R=J.height*R.repeat.y,J=G/P,X=T/R;F.save();F.translate(I.x,I.y);0!==K.rotation&&F.rotate(K.rotation);F.translate(-G/2,-T/2);F.scale(J,X);F.translate(-O,-Q);F.fillRect(O,Q,P,R);F.restore()}}else n(K.color.getStyle()),F.save(),F.translate(I.x,I.y),0!==K.rotation&&F.rotate(K.rotation),
F.scale(G,-T),F.fillRect(-.5,-.5,1,1),F.restore()}else K instanceof c.SpriteCanvasMaterial&&(q(K.color.getStyle()),n(K.color.getStyle()),F.save(),F.translate(I.x,I.y),0!==K.rotation&&F.rotate(K.rotation),F.scale(G,T),K.program(F),F.restore())}else if(O instanceof c.RenderableLine){if(V=O.v1,Z=O.v2,V.positionScreen.x*=C,V.positionScreen.y*=z,Z.positionScreen.x*=C,Z.positionScreen.y*=z,ka.setFromPoints([V.positionScreen,Z.positionScreen]),!0===wa.isIntersectionBox(ka))if(I=V,K=Z,G=O,T=Q,k(T.opacity),
m(T.blending),F.beginPath(),F.moveTo(I.positionScreen.x,I.positionScreen.y),F.lineTo(K.positionScreen.x,K.positionScreen.y),T instanceof c.LineBasicMaterial){u(T.linewidth);h(T.linecap);s(T.linejoin);if(T.vertexColors!==c.VertexColors)q(T.color.getStyle());else if(O=G.vertexColors[0].getStyle(),G=G.vertexColors[1].getStyle(),O===G)q(O);else{try{var Y=F.createLinearGradient(I.positionScreen.x,I.positionScreen.y,K.positionScreen.x,K.positionScreen.y);Y.addColorStop(0,O);Y.addColorStop(1,G)}catch(na){Y=
O}q(Y)}F.stroke();ka.expandByScalar(2*T.linewidth)}else T instanceof c.LineDashedMaterial&&(u(T.linewidth),h(T.linecap),s(T.linejoin),q(T.color.getStyle()),l([T.dashSize,T.gapSize]),F.stroke(),ka.expandByScalar(2*T.linewidth),l([]))}else if(O instanceof c.RenderableFace){V=O.v1;Z=O.v2;ia=O.v3;if(-1>V.positionScreen.z||1<V.positionScreen.z)continue;if(-1>Z.positionScreen.z||1<Z.positionScreen.z)continue;if(-1>ia.positionScreen.z||1<ia.positionScreen.z)continue;V.positionScreen.x*=C;V.positionScreen.y*=
z;Z.positionScreen.x*=C;Z.positionScreen.y*=z;ia.positionScreen.x*=C;ia.positionScreen.y*=z;0<Q.overdraw&&(g(V.positionScreen,Z.positionScreen,Q.overdraw),g(Z.positionScreen,ia.positionScreen,Q.overdraw),g(ia.positionScreen,V.positionScreen,Q.overdraw));ka.setFromPoints([V.positionScreen,Z.positionScreen,ia.positionScreen]);if(!0===wa.isIntersectionBox(ka)){K=V;G=Z;T=ia;I=Q;x.info.render.vertices+=3;x.info.render.faces++;k(I.opacity);m(I.blending);ra=K.positionScreen.x;la=K.positionScreen.y;xa=G.positionScreen.x;
ua=G.positionScreen.y;ya=T.positionScreen.x;za=T.positionScreen.y;var Q=ra,P=la,R=xa,J=ua,X=ya,fa=za;F.beginPath();F.moveTo(Q,P);F.lineTo(R,J);F.lineTo(X,fa);F.closePath();if((I instanceof c.MeshLambertMaterial||I instanceof c.MeshPhongMaterial)&&null===I.map){va.copy(I.color);Ea.copy(I.emissive);I.vertexColors===c.FaceColors&&va.multiply(O.color);aa.copy(Ma);Pa.copy(K.positionWorld).add(G.positionWorld).add(T.positionWorld).divideScalar(3);K=Pa;G=O.normalModel;T=aa;O=0;for(Q=y.length;O<Q;O++)P=y[O],
Ka.copy(P.color),P instanceof c.DirectionalLight?(R=Oa.setFromMatrixPosition(P.matrixWorld).normalize(),J=G.dot(R),0>=J||(J*=P.intensity,T.add(Ka.multiplyScalar(J)))):P instanceof c.PointLight&&(R=Oa.setFromMatrixPosition(P.matrixWorld),J=G.dot(Oa.subVectors(R,K).normalize()),0>=J||(J*=0==P.distance?1:1-Math.min(K.distanceTo(R)/P.distance,1),0!=J&&(J*=P.intensity,T.add(Ka.multiplyScalar(J)))));aa.multiply(va).add(Ea);!0===I.wireframe?b(aa,I.wireframeLinewidth,I.wireframeLinecap,I.wireframeLinejoin):
d(aa)}else I instanceof c.MeshBasicMaterial||I instanceof c.MeshLambertMaterial||I instanceof c.MeshPhongMaterial?null!==I.map?I.map.mapping===c.UVMapping&&(da=O.uvs,f(ra,la,xa,ua,ya,za,da[0].x,da[0].y,da[1].x,da[1].y,da[2].x,da[2].y,I.map)):null!==I.envMap?I.envMap.mapping===c.SphericalReflectionMapping&&(ha.copy(O.vertexNormalsModel[0]).applyMatrix3(Ba),ea=.5*ha.x+.5,ba=.5*ha.y+.5,ha.copy(O.vertexNormalsModel[1]).applyMatrix3(Ba),ja=.5*ha.x+.5,ga=.5*ha.y+.5,ha.copy(O.vertexNormalsModel[2]).applyMatrix3(Ba),
ma=.5*ha.x+.5,oa=.5*ha.y+.5,f(ra,la,xa,ua,ya,za,ea,ba,ja,ga,ma,oa,I.envMap)):(aa.copy(I.color),I.vertexColors===c.FaceColors&&aa.multiply(O.color),!0===I.wireframe?b(aa,I.wireframeLinewidth,I.wireframeLinecap,I.wireframeLinejoin):d(aa)):(I instanceof c.MeshDepthMaterial?aa.r=aa.g=aa.b=1-t(K.positionScreen.z*K.positionScreen.w,sa.near,sa.far):I instanceof c.MeshNormalMaterial?(ha.copy(O.normalModel).applyMatrix3(Ba),aa.setRGB(ha.x,ha.y,ha.z).multiplyScalar(.5).addScalar(.5)):aa.setRGB(1,1,1),!0===
I.wireframe?b(aa,I.wireframeLinewidth,I.wireframeLinecap,I.wireframeLinejoin):d(aa))}}U.union(ka)}}F.setTransform(1,0,0,1,0,0)}}};c.OrthographicTrackballControls=function(a,b){function d(a){!1!==n.enabled&&(window.removeEventListener("keydown",d),v=x,x===h.NONE)&&(a.keyCode!==n.keys[h.ROTATE]||n.noRotate?a.keyCode!==n.keys[h.ZOOM]||n.noZoom?a.keyCode!==n.keys[h.PAN]||n.noPan||(x=h.PAN):x=h.ZOOM:x=h.ROTATE)}function e(a){!1!==n.enabled&&(x=v,window.addEventListener("keydown",d,!1))}function f(a){!1!==
n.enabled&&(a.preventDefault(),a.stopPropagation(),x===h.NONE&&(x=a.button),x!==h.ROTATE||n.noRotate?x!==h.ZOOM||n.noZoom?x!==h.PAN||n.noPan||(z.copy(M(a.pageX,a.pageY)),H.copy(z)):(E.copy(M(a.pageX,a.pageY)),B.copy(E)):(y.copy(F(a.pageX,a.pageY)),A.copy(y)),document.addEventListener("mousemove",g,!1),document.addEventListener("mouseup",k,!1),n.dispatchEvent(L))}function g(a){!1!==n.enabled&&(a.preventDefault(),a.stopPropagation(),x!==h.ROTATE||n.noRotate?x!==h.ZOOM||n.noZoom?x!==h.PAN||n.noPan||
H.copy(M(a.pageX,a.pageY)):B.copy(M(a.pageX,a.pageY)):A.copy(F(a.pageX,a.pageY)))}function k(a){!1!==n.enabled&&(a.preventDefault(),a.stopPropagation(),x=h.NONE,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",k),n.dispatchEvent(N))}function m(a){if(!1!==n.enabled){a.preventDefault();a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail/3);E.y+=.01*b;n.dispatchEvent(L);n.dispatchEvent(N)}}function u(a){if(!1!==n.enabled){switch(a.touches.length){case 1:x=
h.TOUCH_ROTATE;y.copy(F(a.touches[0].pageX,a.touches[0].pageY));A.copy(y);break;case 2:x=h.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;C=r=Math.sqrt(b*b+c*c);z.copy(M((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));H.copy(z);break;default:x=h.NONE}n.dispatchEvent(L)}}function p(a){if(!1!==n.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:A.copy(F(a.touches[0].pageX,a.touches[0].pageY));
break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;C=Math.sqrt(b*b+c*c);H.copy(M((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));break;default:x=h.NONE}}function s(a){if(!1!==n.enabled){switch(a.touches.length){case 1:A.copy(F(a.touches[0].pageX,a.touches[0].pageY));y.copy(A);break;case 2:r=C=0,H.copy(M((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2)),z.copy(H)}x=h.NONE;n.dispatchEvent(N)}}
function q(a){a.preventDefault()}var n=this,h={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.radius=0;this.rotateSpeed=1;this.zoomSpeed=1.2;this.staticMoving=this.noRoll=this.noPan=this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=.2;this.keys=[65,83,68];this.target=new c.Vector3;var t=!0,x=h.NONE,v=h.NONE,l=new c.Vector3,y=new c.Vector3,A=new c.Vector3,E=new c.Vector2,
B=new c.Vector2,r=0,C=0,z=new c.Vector2,H=new c.Vector2;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=this.object.up.clone();this.left0=this.object.left;this.right0=this.object.right;this.top0=this.object.top;this.bottom0=this.object.bottom;var w={type:"change"},L={type:"start"},N={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;
else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft;this.screen.top=a.top+window.pageYOffset-b.clientTop;this.screen.width=a.width;this.screen.height=a.height}this.radius=.5*Math.min(this.screen.width,this.screen.height);this.left0=this.object.left;this.right0=this.object.right;this.top0=this.object.top;this.bottom0=this.object.bottom};this.handleEvent=function(a){if("function"==typeof this[a.type])this[a.type](a)};
var M=function(){var a=new c.Vector2;return function(b,c){a.set((b-n.screen.left)/n.screen.width,(c-n.screen.top)/n.screen.height);return a}}(),F=function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Vector3;return function(c,e){d.set((c-.5*n.screen.width-n.screen.left)/n.radius,(.5*n.screen.height+n.screen.top-e)/n.radius,0);var f=d.length();n.noRoll?d.z=f<Math.SQRT1_2?Math.sqrt(1-f*f):.5/f:1<f?d.normalize():d.z=Math.sqrt(1-f*f);l.copy(n.object.position).sub(n.target);a.copy(n.object.up).setLength(d.y);
a.add(b.copy(n.object.up).cross(l).setLength(d.x));a.add(l.setLength(d.z));return a}}();this.rotateCamera=function(){var a=new c.Vector3,b=new c.Quaternion;return function(){var c=Math.acos(y.dot(A)/y.length()/A.length());c&&(a.crossVectors(y,A).normalize(),c*=n.rotateSpeed,b.setFromAxisAngle(a,-c),l.applyQuaternion(b),n.object.up.applyQuaternion(b),A.applyQuaternion(b),n.staticMoving?y.copy(A):(b.setFromAxisAngle(a,c*(n.dynamicDampingFactor-1)),y.applyQuaternion(b)),t=!0)}}();this.zoomCamera=function(){if(x===
h.TOUCH_ZOOM_PAN){var a=C/r;r=C;n.object.zoom*=a;t=!0}else a=1+(B.y-E.y)*n.zoomSpeed,1E-6<Math.abs(a-1)&&0<a&&(n.object.zoom*=a,n.staticMoving?E.copy(B):E.y+=(B.y-E.y)*this.dynamicDampingFactor,t=!0)};this.panCamera=function(){var a=new c.Vector2,b=new c.Vector3,d=new c.Vector3;return function(){a.copy(H).sub(z);if(a.lengthSq()){var c=(n.object.top-n.object.bottom)/n.object.zoom;a.x*=(n.object.right-n.object.left)/n.object.zoom;a.y*=c;d.copy(l).cross(n.object.up).setLength(a.x);d.add(b.copy(n.object.up).setLength(a.y));
n.object.position.add(d);n.target.add(d);n.staticMoving?z.copy(H):z.add(a.subVectors(H,z).multiplyScalar(n.dynamicDampingFactor));t=!0}}}();this.update=function(){l.subVectors(n.object.position,n.target);n.noRotate||n.rotateCamera();n.noZoom||(n.zoomCamera(),t&&n.object.updateProjectionMatrix());n.noPan||n.panCamera();n.object.position.addVectors(n.target,l);n.object.lookAt(n.target);t&&(n.dispatchEvent(w),t=!1)};this.reset=function(){v=x=h.NONE;n.target.copy(n.target0);n.object.position.copy(n.position0);
n.object.up.copy(n.up0);l.subVectors(n.object.position,n.target);n.object.left=n.left0;n.object.right=n.right0;n.object.top=n.top0;n.object.bottom=n.bottom0;n.object.lookAt(n.target);n.dispatchEvent(w);t=!1};this.dispose=function(){this.domElement.removeEventListener("contextmenu",q,!1);this.domElement.removeEventListener("mousedown",f,!1);this.domElement.removeEventListener("mousewheel",m,!1);this.domElement.removeEventListener("DOMMouseScroll",m,!1);this.domElement.removeEventListener("touchstart",
u,!1);this.domElement.removeEventListener("touchend",s,!1);this.domElement.removeEventListener("touchmove",p,!1);document.removeEventListener("mousemove",g,!1);document.removeEventListener("mouseup",k,!1);window.removeEventListener("keydown",d,!1);window.removeEventListener("keyup",e,!1)};this.domElement.addEventListener("contextmenu",q,!1);this.domElement.addEventListener("mousedown",f,!1);this.domElement.addEventListener("mousewheel",m,!1);this.domElement.addEventListener("DOMMouseScroll",m,!1);
this.domElement.addEventListener("touchstart",u,!1);this.domElement.addEventListener("touchend",s,!1);this.domElement.addEventListener("touchmove",p,!1);window.addEventListener("keydown",d,!1);window.addEventListener("keyup",e,!1);this.handleResize();this.update()};c.OrthographicTrackballControls.prototype=Object.create(c.EventDispatcher.prototype);c.OrthographicTrackballControls.prototype.constructor=c.OrthographicTrackballControls;c.SphereGeometry=function(a,b,d,e,f,g,k){console.log("THREE.SphereGeometry: Consider using THREE.SphereBufferGeometry for lower memory footprint.");
c.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:d,phiStart:e,phiLength:f,thetaStart:g,thetaLength:k};a=a||50;b=Math.max(3,Math.floor(b)||8);d=Math.max(2,Math.floor(d)||6);e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;g=void 0!==g?g:0;k=void 0!==k?k:Math.PI;var m,h,p=[],s=[];for(h=0;h<=d;h++){var q=[],n=[];for(m=0;m<=b;m++){var l=m/b,t=h/d,x=new c.Vector3;x.x=-a*Math.cos(e+l*f)*Math.sin(g+t*k);x.y=a*Math.cos(g+t*k);x.z=a*Math.sin(e+l*f)*Math.sin(g+
t*k);this.vertices.push(x);q.push(this.vertices.length-1);n.push(new c.Vector2(l,1-t))}p.push(q);s.push(n)}for(h=0;h<d;h++)for(m=0;m<b;m++){e=p[h][m+1];f=p[h][m];g=p[h+1][m];k=p[h+1][m+1];var q=this.vertices[e].clone().normalize(),n=this.vertices[f].clone().normalize(),l=this.vertices[g].clone().normalize(),t=this.vertices[k].clone().normalize(),x=s[h][m+1].clone(),v=s[h][m].clone(),r=s[h+1][m].clone(),y=s[h+1][m+1].clone();Math.abs(this.vertices[e].y)===a?(x.x=(x.x+v.x)/2,this.faces.push(new c.Face3(e,
g,k,[q,l,t])),this.faceVertexUvs[0].push([x,r,y])):Math.abs(this.vertices[g].y)===a?(r.x=(r.x+y.x)/2,this.faces.push(new c.Face3(e,f,g,[q,n,l])),this.faceVertexUvs[0].push([x,v,r])):(this.faces.push(new c.Face3(e,f,k,[q,n,t])),this.faceVertexUvs[0].push([x,v,y]),this.faces.push(new c.Face3(f,g,k,[n.clone(),l,t.clone()])),this.faceVertexUvs[0].push([v.clone(),r,y.clone()]))}this.computeFaceNormals();this.boundingSphere=new c.Sphere(new c.Vector3,a)};c.SphereGeometry.prototype=Object.create(c.Geometry.prototype);
c.SphereGeometry.prototype.constructor=c.SphereGeometry;c.SphereGeometry.prototype.clone=function(){return new c.SphereGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength)};c.SphereBufferGeometry=function(a,b,d,e,f,g,k){c.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:d,phiStart:e,phiLength:f,
thetaStart:g,thetaLength:k};a=a||50;b=Math.max(3,Math.floor(b)||8);d=Math.max(2,Math.floor(d)||6);e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;g=void 0!==g?g:0;k=void 0!==k?k:Math.PI;for(var m=g+k,h=(b+1)*(d+1),p=new c.BufferAttribute(new Float32Array(3*h),3),s=new c.BufferAttribute(new Float32Array(3*h),3),h=new c.BufferAttribute(new Float32Array(2*h),2),q=0,n=[],l=new c.Vector3,t=0;t<=d;t++){for(var x=[],v=t/d,r=0;r<=b;r++){var y=r/b,A=-a*Math.cos(e+y*f)*Math.sin(g+v*k),E=a*Math.cos(g+v*k),B=a*Math.sin(e+
y*f)*Math.sin(g+v*k);l.set(A,E,B).normalize();p.setXYZ(q,A,E,B);s.setXYZ(q,l.x,l.y,l.z);h.setXY(q,y,1-v);x.push(q);q++}n.push(x)}e=[];for(t=0;t<d;t++)for(r=0;r<b;r++)f=n[t][r+1],k=n[t][r],q=n[t+1][r],l=n[t+1][r+1],(0!==t||0<g)&&e.push(f,k,l),(t!==d-1||m<Math.PI)&&e.push(k,q,l);this.addAttribute("index",new c.BufferAttribute(new Uint16Array(e),1));this.addAttribute("position",p);this.addAttribute("normal",s);this.addAttribute("uv",h);this.boundingSphere=new c.Sphere(new c.Vector3,a)};c.SphereBufferGeometry.prototype=
Object.create(c.BufferGeometry.prototype);c.SphereBufferGeometry.prototype.constructor=c.SphereBufferGeometry;c.SphereBufferGeometry.prototype.clone=function(){var a=new c.SphereBufferGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength);a.copy(this);return a};l.THREE=c})},function(J,G,P){(function(w,l){J.exports=l()})(this,function(){return function(w){function l(r){if(h[r])return h[r].exports;
var c=h[r]={exports:{},id:r,loaded:!1};w[r].call(c.exports,c,c.exports,l);c.loaded=!0;return c.exports}var h={};l.m=w;l.c=h;l.p="";return l(0)}([function(w,l,h){l=h(1).create();l.import(h(13));l.import(h(23));l.import(h(24));l.import(h(34));l.import(h(35));l.import(h(36));l.import(h(63));l.import(h(53));l.import(h(69));l.import(h(67));l.import(h(72));l.import(h(73));w.exports=l},function(w,l,h){w.exports=h(2)},function(w,l,h){var r=h(3).isFactory,c=h(3).deepExtend,a=h(4),b=h(8),d=h(10),e=h(12);l.create=
function(f){function g(a){if(!r(a))throw Error("Factory object with properties `type`, `name`, and `factory` expected");var b=k.indexOf(a);-1===b?(b=!0===a.math?a.factory(h.type,p,g,h.typed,h):a.factory(h.type,p,g,h.typed),k.push(a),m.push(b)):b=m[b];return b}if("function"!==typeof Object.create)throw Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var k=[],m=[],h=b.mixin({});h.type={};h.expression={transform:Object.create(h)};
h.typed=a.create(h.type);var p={epsilon:1E-14,matrix:"matrix",number:"number",precision:64,predictable:!1};f&&c(p,f);h["import"]=g(d);h.config=g(e);return h}},function(w,l){l.clone=function r(c){var a=typeof c;if("number"===a||"string"===a||"boolean"===a||null===c||void 0===c)return c;if("function"===typeof c.clone)return c.clone();if(Array.isArray(c))return c.map(function(a){return r(a)});if(c instanceof Number)return new Number(c.valueOf());if(c instanceof String)return new String(c.valueOf());
if(c instanceof Boolean)return new Boolean(c.valueOf());if(c instanceof Date)return new Date(c.valueOf());if(c&&!0===c.isBigNumber)return c;if(c instanceof RegExp)throw new TypeError("Cannot clone "+c);var a={},b;for(b in c)c.hasOwnProperty(b)&&(a[b]=r(c[b]));return a};l.extend=function(l,c){for(var a in c)c.hasOwnProperty(a)&&(l[a]=c[a]);return l};l.deepExtend=function c(a,b){if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var d in b)if(b.hasOwnProperty(d))if(b[d]&&
b[d].constructor===Object)void 0===a[d]&&(a[d]={}),a[d].constructor===Object?c(a[d],b[d]):a[d]=b[d];else{if(Array.isArray(b[d]))throw new TypeError("Arrays are not supported by deepExtend");a[d]=b[d]}return a};l.deepEqual=function(c,a){var b,d;if(Array.isArray(c)){if(!Array.isArray(a)||c.length!=a.length)return!1;b=0;for(d=c.length;b<d;b++)if(!l.deepEqual(c[b],a[b]))return!1;return!0}if(c instanceof Object){if(Array.isArray(a)||!(a instanceof Object))return!1;for(b in c)if(!l.deepEqual(c[b],a[b]))return!1;
for(b in a)if(!l.deepEqual(c[b],a[b]))return!1;return!0}return typeof c===typeof a&&c==a};l.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{}),!0}catch(c){}return!1};l.lazy=function(c,a,b){if(l.canDefineProperty()){var d=!0,e;Object.defineProperty(c,a,{get:function(){d&&(e=b(),d=!1);return e},set:function(a){e=a;d=!1},configurable:!0,enumerable:!0})}else c[a]=b()};l.traverse=function(c,a){var b=c;if(a)for(var d=a.split("."),e=0;e<d.length;e++){var f=
d[e];f in b||(b[f]={});b=b[f]}return b};l.isFactory=function(c){return c&&"function"===typeof c.factory}},function(w,l,h){var r=h(5),c=h(6).digits,a=function(){a=r.create;return r};l.create=function(b){var d=a();d.types=[{name:"number",test:function(a){return"number"===typeof a}},{name:"Complex",test:function(a){return a&&a.isComplex}},{name:"BigNumber",test:function(a){return a&&a.isBigNumber}},{name:"Fraction",test:function(a){return a&&a.isFraction}},{name:"Unit",test:function(a){return a&&a.isUnit}},
{name:"string",test:function(a){return"string"===typeof a}},{name:"Array",test:Array.isArray},{name:"Matrix",test:function(a){return a&&a.isMatrix}},{name:"DenseMatrix",test:function(a){return a&&a.isDenseMatrix}},{name:"SparseMatrix",test:function(a){return a&&a.isSparseMatrix}},{name:"ImmutableDenseMatrix",test:function(a){return a&&a.isImmutableDenseMatrix}},{name:"Range",test:function(a){return a&&a.isRange}},{name:"Index",test:function(a){return a&&a.isIndex}},{name:"boolean",test:function(a){return"boolean"===
typeof a}},{name:"ResultSet",test:function(a){return a&&a.isResultSet}},{name:"Help",test:function(a){return a&&a.isHelp}},{name:"function",test:function(a){return"function"===typeof a}},{name:"Date",test:function(a){return a instanceof Date}},{name:"RegExp",test:function(a){return a instanceof RegExp}},{name:"Object",test:function(a){return"object"===typeof a}},{name:"null",test:function(a){return null===a}},{name:"undefined",test:function(a){return void 0===a}}];d.conversions=[{from:"number",to:"BigNumber",
convert:function(a){if(15<c(a))throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+a+"). Use function bignumber(x) to convert to BigNumber.");return new b.BigNumber(a)}},{from:"number",to:"Complex",convert:function(a){return new b.Complex(a,0)}},{from:"number",to:"string",convert:function(a){return a+""}},{from:"BigNumber",to:"Complex",convert:function(a){return new b.Complex(a.toNumber(),0)}},{from:"number",to:"Fraction",convert:function(a){if(15<
c(a))throw new TypeError("Cannot implicitly convert a number with >15 significant digits to Fraction (value: "+a+"). Use function fraction(x) to convert to Fraction.");return new b.Fraction(a)}},{from:"string",to:"number",convert:function(a){var b=Number(a);if(isNaN(b))throw Error('Cannot convert "'+a+'" to a number');return b}},{from:"boolean",to:"number",convert:function(a){return+a}},{from:"boolean",to:"BigNumber",convert:function(a){return new b.BigNumber(+a)}},{from:"boolean",to:"string",convert:function(a){return+a}},
{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new b.BigNumber(0)}},{from:"Array",to:"Matrix",convert:function(a){return new b.DenseMatrix(a)}},{from:"Matrix",to:"Array",convert:function(a){return a.valueOf()}}];return d}},function(w,l,h){var r,c,a;"use strict";(function(b){!(c=[],r=b,a="function"===typeof r?r.apply(l,c):r,void 0!==a&&(w.exports=a))})(function(){function a(){function c(a){for(var b,
d=0;d<r.types.length;d++){var e=r.types[d];if(e.name===a){b=e.test;break}}if(!b){for(var f,d=0;d<r.types.length;d++)if(e=r.types[d],e.name.toLowerCase()==a.toLowerCase()){f=e.name;break}throw Error('Unknown type "'+a+'"'+(f?'. Did you mean "'+f+'"?':""));}return b}function e(a){for(var b="",c=0;c<a.length;c++){var d=a[c];if(""!=d.name)if(""==b)b=d.name;else if(b!=d.name)throw a=Error("Function names do not match (expected: "+b+", actual: "+d.name+")"),a.data={actual:d.name,expected:b},a;}return b}
function f(a,b,c,d,e){var f=n(d);e=e?e.split(","):null;var g=a||"unnamed",k=e&&-1!==e.indexOf("any");a={fn:a,index:c,actual:d,expected:e};b=e?b>c&&!k?"Unexpected type of argument in function "+g+" (expected: "+e.join(" or ")+", actual: "+f+", index: "+c+")":"Too few arguments in function "+g+" (expected: "+e.join(" or ")+", index: "+c+")":"Too many arguments in function "+g+" (expected: "+c+", actual: "+b+")";b=new TypeError(b);b.data=a;return b}function g(a){this.name=a||"refs";this.categories={}}
function k(a,b){if("string"===typeof a){var c=a.trim(),d="..."===c.substr(0,3);d&&(c=c.substr(3));if(""===c)this.types=["any"];else for(this.types=c.split("|"),c=0;c<this.types.length;c++)this.types[c]=this.types[c].trim()}else if(Array.isArray(a))this.types=a;else{if(a instanceof k)return a.clone();throw Error("String or Array expected");}this.conversions=[];this.varArgs=d||b||!1;this.anyType=-1!==this.types.indexOf("any")}function m(a,b){var c;if("string"===typeof a)c=""!==a?a.split(","):[];else if(Array.isArray(a))c=
a;else throw Error("string or Array expected");this.params=Array(c.length);for(var d=0;d<c.length;d++){var e=new k(c[d]);this.params[d]=e;if(d===c.length-1)this.varArgs=e.varArgs;else if(e.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."');}this.fn=b}function h(a,b,c){this.path=a||[];this.param=a[a.length-1]||null;this.signature=b||null;this.childs=c||[]}function p(a){var b,c={},d=[],e,f;for(f in a)if(a.hasOwnProperty(f)&&(b=new m(f,a[f]),!b.ignore()))for(b=b.expand(),e=
0;e<b.length;e++){var g=b[e],k=g.toString(),h=c[k];if(h)if(h=m.compare(g,h),0>h)c[k]=g;else{if(0===h)throw Error('Signature "'+k+'" is defined twice');}else c[k]=g}for(k in c)c.hasOwnProperty(k)&&d.push(c[k]);d.sort(function(a,b){return m.compare(a,b)});for(e=0;e<d.length;e++)if(b=d[e],b.varArgs)for(a=b.params.length-1,c=b.params[a],f=0;f<c.types.length;){if(c.conversions[f])for(k=c.types[f],g=0;g<d.length;g++){var h=d[g],q=h.params[a];if(h!==b&&q&&-1!==q.types.indexOf(k)&&!q.conversions[a]){c.types.splice(f,
1);c.conversions.splice(f,1);f--;break}}f++}return d}function s(a,b){var c,d,e=b.length,f,g=[];for(c=0;c<a.length;c++)d=a[c],d.params.length!==e||f||(f=d),void 0!=d.params[e]&&g.push(d);g.sort(function(a,b){return k.compare(a.params[e],b.params[e])});var m=[];for(c=0;c<g.length;c++){d=g[c];var q=d.params[e],n=m.filter(function(a){return a.param.overlapping(q)})[0];if(n){if(n.param.varArgs)throw Error('Conflicting types "'+n.param+'" and "'+q+'"');n.signatures.push(d)}else m.push({param:q,signatures:[d]})}d=
Array(m.length);for(c=0;c<m.length;c++)g=m[c],d[c]=s(g.signatures,b.concat(g.param));return new h(b,f,d)}function q(a,b){var c=new g,d=p(b);if(0==d.length)throw Error("No signatures provided");for(var e=s(d,[]),k=[],m=a||"",h=0,q=0;q<d.length;q++){var n=d[q].params.length;n>h&&(h=n)}q=[];for(n=0;n<h;n++)q[n]="arg"+n;k.push("function "+m+"("+q.join(", ")+") {");k.push('  "use strict";');k.push("  var name = '"+m+"';");k.push(e.toCode(c,"  "));k.push("}");e=[c.toCode(),"return "+k.join("\n")].join("\n");
c=(new Function(c.name,"createError",e))(c,f);e={};for(k=0;k<d.length;k++)m=d[k],m.fn&&!m.hasConversions()&&(h=m.params.join(","),e[h]=m.fn);c.signatures=e;return c}function n(a){for(var b,c=0;c<r.types.length;c++){var d=r.types[c];if("Object"===d.name)b=d;else if(d.test(a))return d.name}return b&&b.test(a)?b.name:"unknown"}g.prototype.add=function(a,b){var c=b||"fn";this.categories[c]||(this.categories[c]=[]);var d=this.categories[c].indexOf(a);-1==d&&(d=this.categories[c].length,this.categories[c].push(a));
return c+d};g.prototype.toCode=function(){var a=[],b=this.name+".categories",c=this.categories,d;for(d in c)if(c.hasOwnProperty(d))for(var e=c[d],f=0;f<e.length;f++)a.push("var "+d+f+" = "+b+"['"+d+"']["+f+"];");return a.join("\n")};k.compare=function(a,b){if(a.anyType)return 1;if(b.anyType)return-1;if(-1!==a.types.indexOf("Object"))return 1;if(-1!==b.types.indexOf("Object"))return-1;if(a.hasConversions()){if(b.hasConversions()){var c,d,e;for(c=0;c<a.conversions.length;c++)if(void 0!==a.conversions[c]){d=
a.conversions[c];break}for(c=0;c<b.conversions.length;c++)if(void 0!==b.conversions[c]){e=b.conversions[c];break}return r.conversions.indexOf(d)-r.conversions.indexOf(e)}return 1}if(b.hasConversions())return-1;var f,g;for(c=0;c<r.types.length;c++)if(r.types[c].name===a.types[0]){f=c;break}for(c=0;c<r.types.length;c++)if(r.types[c].name===b.types[0]){g=c;break}return f-g};k.prototype.overlapping=function(a){for(var b=0;b<this.types.length;b++)if(-1!==a.types.indexOf(this.types[b]))return!0;return!1};
k.prototype.clone=function(){var a=new k(this.types.slice(),this.varArgs);a.conversions=this.conversions.slice();return a};k.prototype.hasConversions=function(){return 0<this.conversions.length};k.prototype.contains=function(a){for(var b=0;b<this.types.length;b++)if(a[this.types[b]])return!0;return!1};k.prototype.toString=function(a){for(var b=[],c={},d=0;d<this.types.length;d++){var e=this.conversions[d],e=a&&e?e.to:this.types[d];e in c||(c[e]=!0,b.push(e))}return(this.varArgs?"...":"")+b.join("|")};
m.prototype.clone=function(){return new m(this.params.slice(),this.fn)};m.prototype.expand=function(){function a(c,d){if(d.length<c.params.length){var e,f,g,h=c.params[d.length];if(h.varArgs){f=h.clone();for(e=0;e<r.conversions.length;e++)if(g=r.conversions[e],-1===h.types.indexOf(g.from)&&-1!==h.types.indexOf(g.to)){var q=f.types.length;f.types[q]=g.from;f.conversions[q]=g}a(c,d.concat(f))}else{for(e=0;e<h.types.length;e++)a(c,d.concat(new k(h.types[e])));for(e=0;e<r.conversions.length;e++)g=r.conversions[e],
-1===h.types.indexOf(g.from)&&-1!==h.types.indexOf(g.to)&&(f=new k(g.from),f.conversions[0]=g,a(c,d.concat(f)))}}else b.push(new m(d,c.fn))}var b=[];a(this,[]);return b};m.compare=function(a,b){if(a.params.length>b.params.length)return 1;if(a.params.length<b.params.length)return-1;var c,d=a.params.length,e=0,f=0;for(c=0;c<d;c++)a.params[c].hasConversions()&&e++,b.params[c].hasConversions()&&f++;if(e>f)return 1;if(e<f)return-1;for(c=0;c<a.params.length;c++)if(d=k.compare(a.params[c],b.params[c]),0!==
d)return d;return 0};m.prototype.hasConversions=function(){for(var a=0;a<this.params.length;a++)if(this.params[a].hasConversions())return!0;return!1};m.prototype.ignore=function(){for(var a={},b=0;b<r.ignore.length;b++)a[r.ignore[b]]=!0;for(b=0;b<this.params.length;b++)if(this.params[b].contains(a))return!0;return!1};m.prototype.toCode=function(a,b){for(var c=Array(this.params.length),d=0;d<this.params.length;d++){var e=this.params[d],f=e.conversions[0];c[d]=e.varArgs?"varArgs":f?a.add(f.convert,
"convert")+"(arg"+d+")":"arg"+d}return(d=this.fn?a.add(this.fn,"signature"):void 0)?b+"return "+d+"("+c.join(", ")+"); // signature: "+this.params.join(", "):""};m.prototype.toString=function(){return this.params.join(", ")};h.prototype.toCode=function(a,b,e){var f=[];if(this.param){var g=this.path.length-1,k=this.param.conversions[0],k="// type: "+(k?k.from+" (convert to "+k.to+")":this.param);if(this.param.varArgs){if(this.param.anyType)f.push(b+"if (arguments.length > "+g+") {"),f.push(b+"  var varArgs = [];"),
f.push(b+"  for (var i = "+g+"; i < arguments.length; i++) {"),f.push(b+"    varArgs.push(arguments[i]);");else{var m=function(b,e){for(var f=[],g=0;g<b.length;g++)f[g]=a.add(c(b[g]),"test")+"("+e+")";return f.join(" || ")}.bind(this);e=this.param.types;for(var h=[],q=0;q<e.length;q++)void 0===this.param.conversions[q]&&h.push(e[q]);f.push(b+"if ("+m(e,"arg"+g)+") { "+k);f.push(b+"  var varArgs = [arg"+g+"];");f.push(b+"  for (var i = "+(g+1)+"; i < arguments.length; i++) {");f.push(b+"    if ("+
m(h,"arguments[i]")+") {");f.push(b+"      varArgs.push(arguments[i]);");for(q=0;q<e.length;q++)if(g=this.param.conversions[q])m=a.add(c(e[q]),"test"),g=a.add(g.convert,"convert"),f.push(b+"    }"),f.push(b+"    else if ("+m+"(arguments[i])) {"),f.push(b+"      varArgs.push("+g+"(arguments[i]));");f.push(b+"    } else {");f.push(b+"      throw createError(name, arguments.length, i, arguments[i], '"+h.join(",")+"');");f.push(b+"    }")}f.push(b+"  }");f.push(this.signature.toCode(a,b+"  "));f.push(b+
"}")}else this.param.anyType?(f.push(b+"// type: any"),f.push(this._innerCode(a,b,e))):(h=this.param.types[0],m="any"!==h?a.add(c(h),"test"):null,f.push(b+"if ("+m+"(arg"+g+")) { "+k),f.push(this._innerCode(a,b+"  ",e)),f.push(b+"}"))}else f.push(this._innerCode(a,b,e));return f.join("\n")};h.prototype._innerCode=function(a,b,c){var d=[],e;this.signature&&(d.push(b+"if (arguments.length === "+this.path.length+") {"),d.push(this.signature.toCode(a,b+"  ")),d.push(b+"}"));var f;for(e=0;e<this.childs.length;e++)if(this.childs[e].param.anyType){f=
this.childs[e];break}for(e=0;e<this.childs.length;e++)d.push(this.childs[e].toCode(a,b,f));c&&!this.param.anyType&&d.push(c.toCode(a,b,f));(a=this._exceptions(a,b))&&d.push(a);return d.join("\n")};h.prototype._exceptions=function(a,b){var c=this.path.length;if(0===this.childs.length)return[b+"if (arguments.length > "+c+") {",b+"  throw createError(name, arguments.length, "+c+", arguments["+c+"]);",b+"}"].join("\n");for(var d={},e=[],f=0;f<this.childs.length;f++){var g=this.childs[f];if(g.param)for(var k=
0;k<g.param.types.length;k++){var m=g.param.types[k];m in d||g.param.conversions[k]||(d[m]=!0,e.push(m))}}return b+"throw createError(name, arguments.length, "+c+", arguments["+c+"], '"+e.join(",")+"');"};var l=[{name:"number",test:function(a){return"number"===typeof a}},{name:"string",test:function(a){return"string"===typeof a}},{name:"boolean",test:function(a){return"boolean"===typeof a}},{name:"Function",test:function(a){return"function"===typeof a}},{name:"Array",test:Array.isArray},{name:"Date",
test:function(a){return a instanceof Date}},{name:"RegExp",test:function(a){return a instanceof RegExp}},{name:"Object",test:function(a){return"object"===typeof a}},{name:"null",test:function(a){return null===a}},{name:"undefined",test:function(a){return void 0===a}}],t={},x=[],v=[],r={config:t,types:l,conversions:x,ignore:v},r=q("typed",{Object:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);b=e(b);return q(b,a)},"string, Object":q,"...Function":function(a){for(var b=e(a),c={},
d=0;d<a.length;d++){var f=a[d];if("object"!==typeof f.signatures)throw a=new TypeError("Function is no typed-function (index: "+d+")"),a.data={index:d},a;for(var g in f.signatures)if(f.signatures.hasOwnProperty(g))if(c.hasOwnProperty(g)){if(f.signatures[g]!==c[g])throw a=Error('Signature "'+g+'" is defined twice'),a.data={signature:g},a;}else c[g]=f.signatures[g]}return q(b,c)}});r.config=t;r.types=l;r.conversions=x;r.ignore=v;r.create=a;r.find=function(a,b){if(!a.signatures)throw new TypeError("Function is no typed-function");
var c;if("string"===typeof b){c=b.split(",");for(var d=0;d<c.length;d++)c[d]=c[d].trim()}else if(Array.isArray(b))c=b;else throw new TypeError("String array or a comma separated string expected");d=c.join(",");if(d=a.signatures[d])return d;throw new TypeError("Signature not found (signature: "+(a.name||"unnamed")+"("+c.join(", ")+"))");};r.convert=function(a,b){var c=n(a);if(b===c)return a;for(var d=0;d<r.conversions.length;d++){var e=r.conversions[d];if(e.from===c&&e.to===b)return e.convert(a)}throw Error("Cannot convert from "+
c+" to "+b);};r.addType=function(a){if(!a||"string"!==typeof a.name||"function"!==typeof a.test)throw new TypeError("Object with properties {name: string, test: function} expected");r.types.push(a)};r.addConversion=function(a){if(!a||"string"!==typeof a.from||"string"!==typeof a.to||"function"!==typeof a.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");r.conversions.push(a)};return r}return a()})},function(w,l,h){var r=h(7);l.isNumber=function(c){return"number"===
typeof c};l.isInteger=function(c){return isFinite(c)?c==Math.round(c):!1};l.sign=function(c){return 0<c?1:0>c?-1:0};l.format=function(c,a){if("function"===typeof a)return a(c);if(Infinity===c)return"Infinity";if(-Infinity===c)return"-Infinity";if(isNaN(c))return"NaN";var b="auto",d=void 0;a&&(a.notation&&(b=a.notation),l.isNumber(a)?d=a:a.precision&&(d=a.precision));switch(b){case "fixed":return l.toFixed(c,d);case "exponential":return l.toExponential(c,d);case "auto":return l.toPrecision(c,d,a&&
a.exponential).replace(/((\.\d*?)(0+))($|e)/,function(a,b,c,d,m){return"."!==c?c+m:m});default:throw Error('Unknown notation "'+b+'". Choose "auto", "exponential", or "fixed".');}};l.toExponential=function(c,a){return(new r(c)).toExponential(a)};l.toFixed=function(c,a){return(new r(c)).toFixed(a)};l.toPrecision=function(c,a,b){return(new r(c)).toPrecision(a,b)};l.digits=function(c){return c.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length};l.DBL_EPSILON=Number.EPSILON||2.220446049250313E-16;
l.nearlyEqual=function(c,a,b){if(null==b)return c==a;if(c==a)return!0;if(isNaN(c)||isNaN(a))return!1;if(isFinite(c)&&isFinite(a)){var d=Math.abs(c-a);return d<l.DBL_EPSILON?!0:d<=Math.max(Math.abs(c),Math.abs(a))*b}return!1}},function(w,l){function h(c){var a=String(c).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!a)throw new SyntaxError("Invalid number");c=a[1];var b=a[2],d=parseFloat(a[4]||"0"),a=b.indexOf("."),d=d+(-1!==a?a-1:b.length-1);this.sign=c;this.coefficients=b.replace(".",
"").replace(/^0*/,function(a){d-=a.length;return""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});0===this.coefficients.length&&(this.coefficients.push(0),d++);this.exponent=d}function r(c){for(var a=[],b=0;b<c;b++)a.push(0);return a}h.prototype.toFixed=function(c){var a=this.roundDigits(this.exponent+1+(c||0)),b=a.coefficients,a=a.exponent+1,d=a+(c||0);b.length<d&&(b=b.concat(r(d-b.length)));0>a&&(b=r(-a+1).concat(b),a=1);c&&b.splice(a,0,0===a?"0.":".");return this.sign+b.join("")};
h.prototype.toExponential=function(c){var a=c?this.roundDigits(c):this.clone(),b=a.coefficients,a=a.exponent;b.length<c&&(b=b.concat(r(c-b.length)));c=b.shift();return this.sign+c+(0<b.length?"."+b.join(""):"")+"e"+(0<=a?"+":"")+a};h.prototype.toPrecision=function(c,a){var b=a&&void 0!==a.lower?a.lower:.001,d=a&&void 0!==a.upper?a.upper:1E5,e=Math.abs(Math.pow(10,this.exponent));if(e<b||e>=d)return this.toExponential(c);d=c?this.roundDigits(c):this.clone();b=d.coefficients;d=d.exponent;b.length<c&&
(b=b.concat(r(c-b.length)));b=b.concat(r(d-b.length+1+(b.length<c?c-b.length:0)));b=r(-d).concat(b);d=0<d?d:0;d<b.length-1&&b.splice(d+1,0,".");return this.sign+b.join("")};h.prototype.clone=function(){var c=new h("0");c.sign=this.sign;c.coefficients=this.coefficients.slice(0);c.exponent=this.exponent;return c};h.prototype.roundDigits=function(c){for(var a=this.clone(),b=a.coefficients;0>=c;)b.unshift(0),a.exponent++,c++;if(b.length>c&&5<=b.splice(c)[0])for(c-=1,b[c]++;10===b[c];)b.pop(),0===c&&(b.unshift(0),
a.exponent++,c++),c--,b[c]++;return a};w.exports=h},function(w,l,h){var r=h(9);l.mixin=function(c){var a=new r;c.on=a.on.bind(a);c.off=a.off.bind(a);c.once=a.once.bind(a);c.emit=a.emit.bind(a);return c}},function(w,l){function h(){}h.prototype={on:function(h,c,a){var b=this.e||(this.e={});(b[h]||(b[h]=[])).push({fn:c,ctx:a});return this},once:function(h,c,a){var b=this,d=function(){b.off(h,d);c.apply(a,arguments)};return this.on(h,d,a)},emit:function(h){var c=[].slice.call(arguments,1),a=((this.e||
(this.e={}))[h]||[]).slice(),b=0,d=a.length;for(b;b<d;b++)a[b].fn.apply(a[b].ctx,c);return this},off:function(h,c){var a=this.e||(this.e={}),b=a[h],d=[];if(b&&c)for(var e=0,f=b.length;e<f;e++)b[e].fn!==c&&d.push(b[e]);d.length?a[h]=d:delete a[h];return this}};w.exports=h},function(w,l,h){var r=h(3).lazy,c=h(3).isFactory,a=h(3).traverse,b=h(3).extend,d=h(11);l.math=!0;l.name="import";l.factory=function(e,f,g,k,m){function h(a,b){var e=arguments.length;if(1!=e&&2!=e)throw new d("import",e,1,2);b||(b=
{});if(c(a))n(a,b);else if(Array.isArray(a))a.forEach(function(a){h(a,b)});else if("object"===typeof a)for(var f in a)a.hasOwnProperty(f)&&(e=a[f],"function"==typeof e||"number"===typeof e||"string"===typeof e||"boolean"===typeof e||null===e||e&&!0===e.isUnit||e&&!0===e.isComplex?p(f,e,b):c(a)?n(a,b):h(e,b));else if(!b.silent)throw new TypeError("Factory, Object, or Array expected");}function p(a,c,d){d.wrap&&"function"===typeof c&&(c=q(c));if(l(m[a])&&l(c))c=d.override?k(b({},m[a].signatures,c.signatures)):
k(m[a],c),m[a]=c,s(a,c),m.emit("import",a,function(){return c});else if(void 0===m[a]||d.override)m[a]=c,s(a,c),m.emit("import",a,function(){return c});else if(!d.silent)throw Error('Cannot import "'+a+'": already exists');}function s(a,b){b&&"function"===typeof b.transform&&(m.expression.transform[a]=b.transform)}function q(a){var b=function(){for(var b=[],c=0,d=arguments.length;c<d;c++){var e=arguments[c];b[c]=e&&e.valueOf()}return a.apply(m,b)};a.transform&&(b.transform=a.transform);return b}function n(c,
d){if("string"===typeof c.name){var e=c.name,f=c.path?a(m,c.path):m,h=f.hasOwnProperty(e)?f[e]:void 0,q=function(){var a=g(c);if(l(h)&&l(a))return a=d.override?k(b({},h.signatures,a.signatures)):k(h,a);if(void 0===h||d.override)return a;if(!d.silent)throw Error('Cannot import "'+e+'": already exists');};!1!==c.lazy?r(f,e,q):f[e]=q();m.emit("import",e,q,c.path)}else g(c)}function l(a){return"function"===typeof a&&"object"===typeof a.signatures}return h};l.lazy=!0},function(w,l){function h(l,c,a,b){if(!(this instanceof
h))throw new SyntaxError("Constructor must be called with the new operator");this.fn=l;this.count=c;this.min=a;this.max=b;this.message="Wrong number of arguments in function "+l+" ("+c+" provided, "+a+(void 0!=b?"-"+b:"")+" expected)";this.stack=Error().stack}h.prototype=Error();h.prototype.constructor=Error;h.prototype.name="ArgumentsError";h.prototype.isArgumentsError=!0;w.exports=h},function(w,l,h){var r=h(3);l.name="config";l.math=!0;l.factory=function(c,a,b,d,e){return function(b){if(b){var c=
r.clone(a);r.deepExtend(a,b);b=r.clone(a);e.emit("config",b,c);return b}return r.clone(a)}}},function(w,l,h){var r=h(14).string.isString;l.name="Matrix";l.path="type";l.factory=function(c,a,b,d){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");}e.prototype.type="Matrix";e.prototype.isMatrix=!0;e.storage=function(a){if(!r(a))throw new TypeError("format must be a string value");var b=e._storage[a];if(!b)throw new SyntaxError("Unsupported matrix storage format: "+
a);return b};e._storage={};e.prototype.storage=function(){throw Error("Cannot invoke storage on a Matrix interface");};e.prototype.datatype=function(){throw Error("Cannot invoke datatype on a Matrix interface");};e.prototype.create=function(a,b){throw Error("Cannot invoke create on a Matrix interface");};e.prototype.subset=function(a,b,c){throw Error("Cannot invoke subset on a Matrix interface");};e.prototype.get=function(a){throw Error("Cannot invoke get on a Matrix interface");};e.prototype.set=
function(a,b,c){throw Error("Cannot invoke set on a Matrix interface");};e.prototype.resize=function(a,b){throw Error("Cannot invoke resize on a Matrix interface");};e.prototype.clone=function(){throw Error("Cannot invoke clone on a Matrix interface");};e.prototype.size=function(){throw Error("Cannot invoke size on a Matrix interface");};e.prototype.map=function(a,b){throw Error("Cannot invoke map on a Matrix interface");};e.prototype.forEach=function(a){throw Error("Cannot invoke forEach on a Matrix interface");
};e.prototype.toArray=function(){throw Error("Cannot invoke toArray on a Matrix interface");};e.prototype.valueOf=function(){throw Error("Cannot invoke valueOf on a Matrix interface");};e.prototype.format=function(a){throw Error("Cannot invoke format on a Matrix interface");};e.prototype.toString=function(){throw Error("Cannot invoke toString on a Matrix interface");};return e}},function(w,l,h){l.array=h(15);l["boolean"]=h(21);l["function"]=h(22);l.number=h(6);l.object=h(3);l.string=h(16);l.types=
h(18);l.emitter=h(8)},function(w,l,h){function r(a,b,c){var d=a.length;if(d!=b[c])throw new g(d,b[c]);if(c<b.length-1){var e=c+1;for(c=0;c<d;c++){if(!Array.isArray(a[c]))throw new g(b.length-1,b.length,"<");r(a[c],b,e)}}else for(c=0;c<d;c++)if(Array.isArray(a[c]))throw new g(b.length+1,b.length,">");}function c(a,b,d,e){var g,k=b[d],h=Math.min(a.length,k);a.length=k;if(d<b.length-1){var t=d+1;for(d=0;d<h;d++)g=a[d],Array.isArray(g)||(g=[g],a[d]=g),c(g,b,t,e);for(d=h;d<k;d++)g=[],a[d]=g,c(g,b,t,e)}else{for(d=
0;d<h;d++)for(;Array.isArray(a[d]);)a[d]=a[d][0];if(e!==l.UNINITIALIZED)for(d=h;d<k;d++)a[d]=f.clone(e)}}function a(b,c,d){var e;if(d<c){var f=d+1;d=0;for(e=b.length;d<e;d++)b[d]=a(b[d],c,f)}else for(;Array.isArray(b);)b=b[0];return b}function b(a,c,d){var e;if(Array.isArray(a)){var f=d+1;d=0;for(e=a.length;d<e;d++)a[d]=b(a[d],c,f)}else for(;d<c;d++)a=[a];return a}var d=h(6),e=h(16),f=h(3);h(18);var g=h(19),k=h(20);l.size=function(a){for(var b=[];Array.isArray(a);)b.push(a.length),a=a[0];return b};
l.validate=function(a,b){if(0==b.length){if(Array.isArray(a))throw new g(a.length,0);}else r(a,b,0)};l.validateIndex=function(a,b){if(!d.isNumber(a)||!d.isInteger(a))throw new TypeError("Index must be an integer (value: "+a+")");if(0>a)throw new k(a);if(void 0!==b&&a>=b)throw new k(a,b);};l.UNINITIALIZED={};l.resize=function(a,b,f){if(!Array.isArray(a)||!Array.isArray(b))throw new TypeError("Array expected");if(0===b.length)throw Error("Resizing to scalar is not supported");b.forEach(function(a){if(!d.isNumber(a)||
!d.isInteger(a)||0>a)throw new TypeError("Invalid size, must contain positive integers (size: "+e.format(b)+")");});c(a,b,0,void 0!==f?f:0);return a};l.squeeze=function(b,c){for(var d=c||l.size(b);Array.isArray(b)&&1===b.length;)b=b[0],d.shift();for(var e=d.length;1===d[e-1];)e--;e<d.length&&(b=a(b,e,0),d.length=e);return b};l.unsqueeze=function(a,c,d,e){e=e||l.size(a);if(d)for(var f=0;f<d;f++)a=[a],e.unshift(1);for(a=b(a,c,0);e.length<c;)e.push(1);return a};l.flatten=function(a){if(!Array.isArray(a))return a;
var b=[];a.forEach(function s(a){Array.isArray(a)?a.forEach(s):b.push(a)});return b};l.isArray=Array.isArray},function(w,l,h){function r(a,c){if(Array.isArray(a)){for(var e="[",f=a.length,g=0;g<f;g++)0!=g&&(e+=", "),e+=r(a[g],c);return e+"]"}return l.format(a,c)}var c=h(6).format,a=h(17).format;l.isString=function(a){return"string"===typeof a};l.endsWith=function(a,c){return a.substring(a.length-c.length,a.length)===c};l.format=function(b,d){return"number"===typeof b?c(b,d):b&&!0===b.isBigNumber?
a(b,d):b&&!0===b.isFraction?d&&"decimal"===d.fraction?b.toString():b.s*b.n+"/"+b.d:Array.isArray(b)?r(b,d):l.isString(b)?'"'+b+'"':"function"===typeof b?b.syntax?b.syntax+"":"function":"object"===typeof b?"function"===typeof b.format?b.format(d):b.toString():String(b)}},function(w,l){l.format=function(h,r){if("function"===typeof r)return r(h);if(!h.isFinite())return h.isNaN()?"NaN":h.gt(0)?"Infinity":"-Infinity";var c="auto",a=void 0;void 0!==r&&(r.notation&&(c=r.notation),"number"===typeof r?a=r:
r.precision&&(a=r.precision));switch(c){case "fixed":return l.toFixed(h,a);case "exponential":return l.toExponential(h,a);case "auto":var c=.001,b=1E5;r&&r.exponential&&(void 0!==r.exponential.lower&&(c=r.exponential.lower),void 0!==r.exponential.upper&&(b=r.exponential.upper));h.constructor.config({toExpNeg:Math.round(Math.log(c)/Math.LN10),toExpPos:Math.round(Math.log(b)/Math.LN10)});if(h.isZero())return"0";var d=h.abs();return(d.gte(c)&&d.lt(b)?h.toSignificantDigits(a).toFixed():l.toExponential(h,
a)).replace(/((\.\d*?)(0+))($|e)/,function(a,b,c,d,h){return"."!==c?c+h:h});default:throw Error('Unknown notation "'+c+'". Choose "auto", "exponential", or "fixed".');}};l.toExponential=function(h,l){return void 0!==l?h.toExponential(l-1):h.toExponential()};l.toFixed=function(h,l){return h.toFixed(l||0)}},function(w,l){l.type=function(h){var l=typeof h;return"object"===l?null===h?"null":h instanceof Boolean?"boolean":h instanceof Number?"number":h instanceof String?"string":Array.isArray(h)?"Array":
h instanceof Date?"Date":h instanceof RegExp?"RegExp":"Object":"function"===l?"Function":l}},function(w,l){function h(l,c,a){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");this.actual=l;this.expected=c;this.relation=a;this.message="Dimension mismatch ("+(Array.isArray(l)?"["+l.join(", ")+"]":l)+" "+(this.relation||"!=")+" "+(Array.isArray(c)?"["+c.join(", ")+"]":c)+")";this.stack=Error().stack}h.prototype=new RangeError;h.prototype.constructor=RangeError;
h.prototype.name="DimensionError";h.prototype.isDimensionError=!0;w.exports=h},function(w,l){function h(l,c,a){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");this.index=l;3>arguments.length?(this.min=0,this.max=c):(this.min=c,this.max=a);this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+
this.index+")";this.stack=Error().stack}h.prototype=new RangeError;h.prototype.constructor=RangeError;h.prototype.name="IndexError";h.prototype.isIndexError=!0;w.exports=h},function(w,l){l.isBoolean=function(h){return"boolean"==typeof h}},function(w,l){l.memoize=function(h,l){return function a(){"object"!==typeof a.cache&&(a.cache={});for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];d=l?l(b):JSON.stringify(b);return d in a.cache?a.cache[d]:a.cache[d]=h.apply(h,b)}}},function(w,l,h){var r=
h(14),c=h(19),a=r.string,b=r.array,d=r.object;w=r.number;var e=Array.isArray,f=w.isNumber,g=w.isInteger,k=a.isString,m=b.validateIndex;l.name="DenseMatrix";l.path="type";l.factory=function(u,p,s,q){function n(a,c){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(c&&!k(c))throw Error("Invalid datatype: "+c);if(a&&!0===a.isMatrix)"DenseMatrix"===a.type?(this._data=d.clone(a._data),this._size=d.clone(a._size)):(this._data=a.toArray(),this._size=a.size()),
this._datatype=c||a._datatype;else if(a&&e(a.data)&&e(a.size))this._data=a.data,this._size=a.size,this._datatype=c||a.datatype;else{if(e(a))this._data=D(a),this._size=b.size(this._data),b.validate(this._data,this._size);else{if(a)throw new TypeError("Unsupported type of data ("+r.types.type(a)+")");this._data=[];this._size=[0]}this._datatype=c}}function l(a,b,c,d){var e=d==c-1,f=b.dimension(d);return e?f.map(function(b){return a[b]}).valueOf():f.map(function(e){return l(a[e],b,c,d+1)}).valueOf()}
function t(a,e,f,g){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var k=e.size(),h=e.isScalar(),m;f&&!0===f.isMatrix?(m=f.size(),f=f.valueOf()):m=b.size(f);if(h){if(0!==m.length)throw new TypeError("Scalar expected");a.set(e.min(),f,g)}else{if(k.length<a._size.length)throw new c(k.length,a._size.length,"<");if(m.length<k.length){for(var q=h=0;1===k[h]&&1===m[h];)h++;for(;1===k[h];)q++,h++;f=b.unsqueeze(f,k.length,q,m)}if(!d.deepEqual(k,m))throw new c(k,m,">");m=e.max().map(function(a){return a+
1});v(a,m,g);x(a._data,e,f,k.length,0)}return a}function x(a,b,c,d,e){var f=e==d-1,g=b.dimension(e);f?g.forEach(function(b,d){m(b);a[b]=c[d[0]]}):g.forEach(function(f,g){m(f);x(a[f],b,c[g[0]],d,e+1)})}function v(a,b,c){for(var e=d.clone(a._size),f=!1;e.length<b.length;)e.push(0),f=!0;for(var g=0,k=b.length;g<k;g++)b[g]>e[g]&&(e[g]=b[g],f=!0);f&&y(a,e,c)}function D(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];e(d)?a[b]=D(d):d&&!0===d.isMatrix&&(a[b]=D(d.valueOf()))}return a}p=s(h(13));n.prototype=
new p;n.prototype.type="DenseMatrix";n.prototype.isDenseMatrix=!0;n.prototype.storage=function(){return"dense"};n.prototype.datatype=function(){return this._datatype};n.prototype.create=function(a,b){return new n(a,b)};n.prototype.subset=function(a,b,d){switch(arguments.length){case 1:var e;if(!a||!0!==a.isIndex)throw new TypeError("Invalid index");if(a.isScalar())e=this.get(a.min());else{e=a.size();if(e.length!=this._size.length)throw new c(e.length,this._size.length);for(var f=a.min(),g=a.max(),
k=0,h=this._size.length;k<h;k++)m(f[k],this._size[k]),m(g[k],this._size[k]);e=new n(l(this._data,a,e.length,0),this._datatype)}return e;case 2:case 3:return t(this,a,b,d);default:throw new SyntaxError("Wrong number of arguments");}};n.prototype.get=function(a){if(!e(a))throw new TypeError("Array expected");if(a.length!=this._size.length)throw new c(a.length,this._size.length);for(var b=0;b<a.length;b++)m(a[b],this._size[b]);for(var b=this._data,f=0,g=a.length;f<g;f++){var k=a[f];m(k,b.length);b=b[k]}return d.clone(b)};
n.prototype.set=function(a,b,d){if(!e(a))throw new TypeError("Array expected");if(a.length<this._size.length)throw new c(a.length,this._size.length,"<");var f,g;f=a.map(function(a){return a+1});v(this,f,d);var k=this._data;d=0;for(f=a.length-1;d<f;d++)g=a[d],m(g,k.length),k=k[g];g=a[a.length-1];m(g,k.length);k[g]=b;return this};n.prototype.resize=function(a,b,c){if(!e(a))throw new TypeError("Array expected");c=c?this.clone():this;return y(c,a,b)};var y=function(a,c,f){if(0===c.length){for(a=a._data;e(a);)a=
a[0];return d.clone(a)}a._size=d.clone(c);a._data=b.resize(a._data,a._size,f);return a};n.prototype.clone=function(){return new n({data:d.clone(this._data),size:d.clone(this._size),datatype:this._datatype})};n.prototype.size=function(){return this._size};n.prototype.map=function(a){var b=this,c=function(d,f){return e(d)?d.map(function(a,b){return c(a,f.concat(b))}):a(d,f,b)};return new n({data:c(this._data,[]),size:d.clone(this._size),datatype:this._datatype})};n.prototype.forEach=function(a){var b=
this,c=function(d,f){e(d)?d.forEach(function(a,b){c(a,f.concat(b))}):a(d,f,b)};c(this._data,[])};n.prototype.toArray=function(){return d.clone(this._data)};n.prototype.valueOf=function(){return this._data};n.prototype.format=function(b){return a.format(this._data,b)};n.prototype.toString=function(){return a.format(this._data)};n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}};n.prototype.diagonal=function(a){if(a){if(!0===a.isBigNumber&&
(a=a.toNumber()),!f(a)||!g(a))throw new TypeError("The parameter k must be an integer number");}else a=0;var b=0<a?a:0;a=0>a?-a:0;for(var c=Math.min(this._size[0]-a,this._size[1]-b),e=[],k=0;k<c;k++)e[k]=d.clone(this._data[k+a][k+b]);return new n({data:e,size:[c],datatype:this._datatype})};n.diagonal=function(a,c,d,h,m){if(!e(a))throw new TypeError("Array expected, size parameter");if(2!==a.length)throw Error("Only two dimensions matrix are supported");a=a.map(function(a){a&&!0===a.isBigNumber&&(a=
a.toNumber());if(!f(a)||!g(a)||1>a)throw Error("Size values must be positive integers");return a});if(d){if(d&&!0===d.isBigNumber&&(d=d.toNumber()),!f(d)||!g(d))throw new TypeError("The parameter k must be an integer number");}else d=0;h&&k(m)&&(h=q.convert(h,m));m=0<d?d:0;d=0>d?-d:0;var s=a[0],p=a[1],l=Math.min(s-d,p-m),t;if(e(c)){if(c.length!==l)throw Error("Invalid value array length");t=function(a){return c[a]}}else if(c&&!0===c.isMatrix){t=c.size();if(1!==t.length||t[0]!==l)throw Error("Invalid matrix length");
t=function(a){return c.get([a])}}else t=function(){return c};h||(h=t(0)&&!0===t(0).isBigNumber?new u.BigNumber(0):0);var x=[];if(0<a.length)for(x=b.resize(x,a,h),a=0;a<l;a++)x[a+d][a+m]=t(a);return new n({data:x,size:[s,p]})};n.fromJSON=function(a){return new n(a)};n.prototype.swapRows=function(a,b){if(!(f(a)&&g(a)&&f(b)&&g(b)))throw Error("Row index must be positive integers");if(2!==this._size.length)throw Error("Only two dimensional matrix is supported");m(a,this._size[0]);m(b,this._size[0]);n._swapRows(a,
b,this._data);return this};n._swapRows=function(a,b,c){var d=c[a];c[a]=c[b];c[b]=d};u.Matrix._storage.dense=n;return u.Matrix._storage["default"]=n};l.lazy=!1},function(w,l,h){var r=h(25),c=h(26);l.name="sin";l.factory=function(a,b,d,e){var f=e.find(d(h(31)),["number"]),g=e.find(d(h(33)),["number"]),k=e("sin",{number:Math.sin,Complex:function(b){return new a.Complex(Math.sin(b.re)*f(-b.im),Math.cos(b.re)*g(b.im))},BigNumber:function(b){return c(b,a.BigNumber,1,!1)},Unit:function(b){if(!b.hasBase(a.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");
return Math.sin(b.value)},"Array | Matrix":function(a){return r(a,k,!0)}});k.toTex="\\sin\\left(${args[0]}\\right)";return k}},function(w,l){w.exports=function r(c,a,b){return c&&"function"===typeof c.map?c.map(function(c){return r(c,a,b)}):a(c)}},function(w,l,h){var r=h(27),c=h(30);w.exports=function(a,b,d,e){if(a.isNaN()||!a.isFinite())return new b(NaN);var f=b.precision,g=new b(a);if(a=g.isNegative())g.s=-g.s;var k=f+(Math.log(f)|0)+3;b.config({precision:k});g=r(g,b.constructor({precision:k}),
d);g[0].constructor=b;if(g[1])return g=g[0],e&&g.isZero()&&(g=new b(Infinity)),b.config({precision:f}),g;g=g[0];if(d){d=c(g.div(3125),d);b.config({precision:Math.min(k,f+15)});for(var g=new b(5),h=new b(16),l=new b(20),p=0;5>p;++p){var k=d.times(d),s=k.times(d),k=s.times(k);d=h.times(k).minus(l.times(s)).plus(g.times(d))}a&&(d.s=-d.s)}else for(g.abs().lt(b.ONE)?(h=64,a=3):(h=256,a=4),d=c(g.div(h),d),b.config({precision:Math.min(k,f+8)}),g=new b(8);0<a;--a)k=d.times(d),d=k.times(k),d=g.times(d.minus(k)).plus(b.ONE);
e&&(d=d.e<=-f?new b(Infinity):b.ONE.div(d));b.config({precision:f});return d.toDP(f-1)}},function(w,l,h){var r=h(28);w.exports=function(c,a,b){var d=r.pi(a.constructor({precision:a.precision+2})),e=r.tau(a);if(c.abs().lte(d.toDP(c.dp())))return[c,!1];if(0==c.div(d.toDP(c.dp())).toNumber()%2)return[new a(b^1),!0];var f=c.mod(e);if(f.toDP(c.dp(),1).isZero())return[new a(b^1),!0];f.gt(d)&&(b?(f=f.minus(d),f.s=-f.s):f=e.minus(f));f.constructor=c.constructor;return[f,!1]}},function(w,l,h){function r(a){return a[0].precision}
w=h(22).memoize;var c=h(29);l.e=w(function(a){return(new a(1)).exp()},r);l.phi=w(function(a){return(new a(1)).plus((new a(5)).sqrt()).div(2)},r);l.pi=w(function(a){var b=a.constructor({precision:a.precision+4}),b=(new b(4)).times(c((new b(1)).div(5))).minus(c((new b(1)).div(239)));return(new a(4)).times(b)},r);l.tau=w(function(a){var b=l.pi(a.constructor({precision:a.precision+2}));return(new a(2)).times(b)},r)},function(w,l){w.exports=function(h){for(var l=h,c=NaN,a=h.times(h),b=!0,d=3;!l.equals(c);d+=
2)h=h.times(a),c=l,l=(b=!b)?l.plus(h.div(d)):l.minus(h.div(d));return l}},function(w,l){w.exports=function(h,l){for(var c=h.constructor.ONE,a=h,b=NaN,d=h.times(h),e=l?a:a=c,f=!0,g=l;!a.equals(b);g+=2)e=e.times(d),c=c.times(g+1).times(g+2),b=a,a=(f=!f)?a.plus(e.div(c)):a.minus(e.div(c));return a}},function(w,l,h){function r(a){return(Math.exp(a)+Math.exp(-a))/2}var c=h(25),a=h(32);l.name="cosh";l.factory=function(b,d,e,f){var g=f("cosh",{number:r,Complex:function(a){var c=Math.exp(a.re),d=Math.exp(-a.re);
return new b.Complex(Math.cos(a.im)*(c+d)/2,Math.sin(a.im)*(c-d)/2)},BigNumber:function(c){return a(c,b.BigNumber,!1,!1)},Unit:function(a){if(!a.hasBase(b.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return r(a.value)},"Array | Matrix":function(a){return c(a,g)}});g.toTex="\\cosh\\left(${args[0]}\\right)";return g}},function(w,l){w.exports=function(h,l,c,a){if(h.isNaN())return new l(NaN);if(!h.isFinite())return a?new l(0):new l(c?h:Infinity);var b=l.precision;l.config({precision:b+
4});h=new l(h);h.constructor=l;h=h.exp();h=c?h.minus(l.ONE.div(h)):h.plus(l.ONE.div(h));h=a?(new l(2)).div(h):h.div(2);l.config({precision:b});return new l(h.toPrecision(b))}},function(w,l,h){function r(a){return 1>Math.abs(a)?a+a*a*a/6+a*a*a*a*a/120:(Math.exp(a)-Math.exp(-a))/2}var c=h(25),a=h(32);l.name="sinh";l.factory=function(b,d,e,f){var g=f("sinh",{number:r,Complex:function(a){var c=Math.cos(a.im),d=Math.sin(a.im),e=Math.exp(a.re);a=Math.exp(-a.re);return new b.Complex(c*(e-a)/2,d*(e+a)/2)},
BigNumber:function(c){return a(c,b.BigNumber,!0,!1)},Unit:function(a){if(!a.hasBase(b.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return r(a.value)},"Array | Matrix":function(a){return c(a,g,!0)}});g.toTex="\\sinh\\left(${args[0]}\\right)";return g}},function(w,l,h){var r=h(25),c=h(26);l.name="cos";l.factory=function(a,b,d,e){var f=e.find(d(h(31)),["number"]),g=e.find(d(h(33)),["number"]),k=e("cos",{number:Math.cos,Complex:function(b){return new a.Complex(Math.cos(b.re)*
f(-b.im),Math.sin(b.re)*g(-b.im))},BigNumber:function(b){return c(b,a.BigNumber,0,!1)},Unit:function(b){if(!b.hasBase(a.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return Math.cos(b.value)},"Array | Matrix":function(a){return r(a,k)}});k.toTex="\\cos\\left(${args[0]}\\right)";return k}},function(w,l,h){var r=h(25);l.name="sqrt";l.factory=function(c,a,b,d){function e(b){return 0<=b||a.predictable?Math.sqrt(b):f(new c.Complex(b,0))}function f(a){var b=Math.sqrt(a.re*
a.re+a.im*a.im),d;d=0<=a.re?.5*Math.sqrt(2*(b+a.re)):Math.abs(a.im)/Math.sqrt(2*(b-a.re));b=0>=a.re?.5*Math.sqrt(2*(b-a.re)):Math.abs(a.im)/Math.sqrt(2*(b+a.re));return 0<=a.im?new c.Complex(d,b):new c.Complex(d,-b)}var g=d("sqrt",{number:e,Complex:f,BigNumber:function(b){return!b.isNegative()||a.predictable?b.sqrt():e(b.toNumber())},"Array | Matrix":function(a){return r(a,g,!0)}});g.toTex="\\sqrt{${args[0]}}";return g}},function(w,l,h){l.name="norm";l.factory=function(l,c,a,b){function d(a,b){var c=
a.size();if(1==c.length){if(b===Number.POSITIVE_INFINITY||"inf"===b){var h=0;a.forEach(function(a){a=e(a);p(a,h)&&(h=a)},!0);return h}if(b===Number.NEGATIVE_INFINITY||"-inf"===b){var q;a.forEach(function(a){a=e(a);if(!q||s(a,q))q=a},!0);return q||0}if("fro"===b)return d(a,2);if("number"===typeof b&&!isNaN(b)){if(!u(b,0)){var l=0;a.forEach(function(a){l=f(g(e(a),b),l)},!0);return g(l,1/b)}return Number.POSITIVE_INFINITY}throw Error("Unsupported parameter value");}if(2==c.length){if(1===b){var t=[],
r=0;a.forEach(function(a,b){var c=b[1],d=f(t[c]||0,e(a));p(d,r)&&(r=d);t[c]=d},!0);return r}if(b===Number.POSITIVE_INFINITY||"inf"===b){var w=[],z=0;a.forEach(function(a,b){var c=b[0],d=f(w[c]||0,e(a));p(d,z)&&(z=d);w[c]=d},!0);return z}if("fro"===b)return k(n(m(W(a),a)));if(2===b)throw Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");throw Error("Unsupported parameter value");}}var e=a(h(37)),f=a(h(38)),g=a(h(48)),k=a(h(35)),m=a(h(53)),u=a(h(44)),
p=a(h(56)),s=a(h(60)),q=a(h(39)),n=a(h(61)),W=a(h(62));l=b.find(e,["Complex"]);var t=b("norm",{number:Math.abs,Complex:l,BigNumber:function(a){return a.abs()},"boolean | null":function(a){return Math.abs(a)},Array:function(a){return d(q(a),2)},Matrix:function(a){return d(a,2)},"number | Complex | BigNumber | boolean | null, number | BigNumber | string":function(a){return t(a)},"Array, number | BigNumber | string":function(a,b){return d(q(a),b)},"Matrix, number | BigNumber | string":function(a,b){return d(a,
b)}});t.toTex={1:"\\left\\|${args[0]}\\right\\|",2:"\\mathrm{${name}}\\left(${args}\\right)"};return t}},function(w,l,h){var r=h(25);l.name="abs";l.factory=function(c,a,b,d){var e=d("abs",{number:Math.abs,Complex:function(a){var b=Math.abs(a.re);a=Math.abs(a.im);if(1E3>b&&1E3>a)return Math.sqrt(b*b+a*a);if(b>=a)return a/=b,b*Math.sqrt(1+a*a);b/=a;return a*Math.sqrt(1+b*b)},BigNumber:function(a){return a.abs()},Fraction:function(a){return a.abs()},"Array | Matrix":function(a){return r(a,e,!0)}});e.toTex=
"\\left|${args[0]}\\right|";return e}},function(w,l,h){var r=h(3).extend;l.name="add";l.factory=function(c,a,b,d){var e=b(h(39)),f=b(h(40));c=h(41);var g=b(h(42)),k=b(h(43)),m=b(h(45)),l=b(h(46)),p=b(h(47)),s=d("add",r({"Matrix, Matrix":function(a,b){var c;switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":c=k(a,b,f);break;default:c=g(b,a,f,!0)}break;default:switch(b.storage()){case "sparse":c=g(a,b,f,!1);break;default:c=l(a,b,f)}}return c},"Array, Array":function(a,b){return s(e(a),
e(b)).valueOf()},"Array, Matrix":function(a,b){return s(e(a),b)},"Matrix, Array":function(a,b){return s(a,e(b))},"Matrix, any":function(a,b){var c;switch(a.storage()){case "sparse":c=m(a,b,f,!1);break;default:c=p(a,b,f,!1)}return c},"any, Matrix":function(a,b){var c;switch(b.storage()){case "sparse":c=m(b,a,f,!0);break;default:c=p(b,a,f,!0)}return c},"Array, any":function(a,b){return p(e(a),b,f,!1).valueOf()},"any, Array":function(a,b){return p(e(b),a,f,!0).valueOf()}},f.signatures));s.toTex="\\left(${args[0]}"+
c.operators.add+"${args[1]}\\right)";return s}},function(w,l){l.name="matrix";l.factory=function(h,l,c,a){function b(a,b,c){return new (h.Matrix.storage(b||"default"))(a,c)}l=a("matrix",{"":function(){return b([])},string:function(a){return b([],a)},"string, string":function(a,c){return b([],a,c)},Array:function(a){return b(a)},Matrix:function(a){return b(a,a.storage())},"Array | Matrix, string":b,"Array | Matrix, string, string":b});l.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",
2:"\\left(${args[0]}\\right)"};return l}},function(w,l){l.factory=function(h,l,c,a){return a("add",{"number, number":function(a,c){return a+c},"Complex, Complex":function(a,c){return new h.Complex(a.re+c.re,a.im+c.im)},"BigNumber, BigNumber":function(a,c){return a.plus(c)},"Fraction, Fraction":function(a,c){return a.add(c)},"Unit, Unit":function(a,c){if(null==a.value)throw Error("Parameter x contains a unit with undefined value");if(null==c.value)throw Error("Parameter y contains a unit with undefined value");
if(!a.equalBase(c))throw Error("Units do not match");var e=a.clone();e.value+=c.value;e.fixPrefix=!1;return e}})}},function(w,l){l.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",
Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega","true":"\\mathrm{True}","false":"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",
oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"};l.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",
or:"\\vee"};l.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var h={deg:"^\\circ"};l.toSymbol=function(r,c){if("undefined"===typeof c?0:c)return h.hasOwnProperty(r)?h[r]:"\\mathrm{"+r+"}";if(l.symbols.hasOwnProperty(r))return l.symbols[r];if(-1!==r.indexOf("_")){var a=r.indexOf("_");return l.toSymbol(r.substring(0,a))+"_{"+l.toSymbol(r.substring(a+1))+"}"}return r}},function(w,l,h){var r=h(19);l.name="algorithm01";l.factory=function(c,a,b,d){var e=c.DenseMatrix;return function(a,b,c,h){var l=
a._data,p=a._size,s=a._datatype;a=b._values;var q=b._index,n=b._ptr,w=b._size,t=b._datatype;if(p.length!==w.length)throw new r(p.length,w.length);if(p[0]!==w[0]||p[1]!==w[1])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+w+")");if(!a)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");b=p[0];p=p[1];c=(s="string"===typeof s&&s===t?s:void 0)?d.find(c,[s,s]):c;for(var x=[],t=0;t<b;t++)x[t]=[];for(var v=[],D=[],w=0;w<p;w++){for(var y=w+
1,A=n[w+1],E=n[w];E<A;E++)t=q[E],v[t]=h?c(a[E],l[t][w]):c(l[t][w],a[E]),D[t]=y;for(t=0;t<b;t++)x[t][w]=D[t]===y?v[t]:l[t][w]}return new e({data:x,size:[b,p],datatype:s})}}},function(w,l,h){var r=h(19);l.name="algorithm04";l.factory=function(c,a,b,d){var e=b(h(44)),f=c.SparseMatrix;return function(a,b,c){var h=a._values,l=a._index,s=a._ptr,q=a._size,n=a._datatype;a=b._values;var w=b._index,t=b._ptr,x=b._size,v=b._datatype;if(q.length!==x.length)throw new r(q.length,x.length);if(q[0]!==x[0]||q[1]!==
x[1])throw new RangeError("Dimension mismatch. Matrix A ("+q+") must match Matrix B ("+x+")");var D=q[0],q=q[1],y;b=e;var x=0,A=c;"string"===typeof n&&n===v&&(y=n,b=d.find(e,[y,y]),x=d.convert(0,y),A=d.find(c,[y,y]));c=h&&a?[]:void 0;n=[];v=[];y=new f({values:c,index:n,ptr:v,size:[D,q],datatype:y});var D=h&&a?[]:void 0,E=h&&a?[]:void 0,B=[],ca=[],C,z,H,G;for(z=0;z<q;z++){v[z]=n.length;var L=z+1;C=s[z];G=s[z+1];for(H=C;H<G;H++)C=l[H],n.push(C),B[C]=L,D&&(D[C]=h[H]);C=t[z];G=t[z+1];for(H=C;H<G;H++)if(C=
w[H],B[C]===L){if(D){var N=A(D[C],a[H]);b(N,x)?B[C]=null:D[C]=N}}else n.push(C),ca[C]=L,E&&(E[C]=a[H]);if(D&&E)for(H=v[z];H<n.length;)C=n[H],B[C]===L?(c[H]=D[C],H++):ca[C]===L?(c[H]=E[C],H++):n.splice(H,1)}v[q]=n.length;return y}}},function(w,l,h){var r=h(6).nearlyEqual;l.factory=function(c,a,b,d){return d("equalScalar",{"boolean, boolean":function(a,b){return a===b},"number, number":function(b,c){return b===c||r(b,c,a.epsilon)},"BigNumber, BigNumber":function(a,b){return a.eq(b)},"Fraction, Fraction":function(a,
b){return a.equals(b)},"Complex, Complex":function(b,c){return(b.re===c.re||r(b.re,c.re,a.epsilon))&&(b.im===c.im||r(b.im,c.im,a.epsilon))},"Unit, Unit":function(b,c){if(!b.equalBase(c))throw Error("Cannot compare units with different base");return b.value===c.value||r(b.value,c.value,a.epsilon)},"string, string":function(a,b){return a===b}})}},function(w,l){l.name="algorithm10";l.factory=function(h,l,c,a){var b=h.DenseMatrix;return function(c,e,f,g){var k=c._values,h=c._index,l=c._ptr,p=c._size,
s=c._datatype;if(!k)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");c=p[0];var p=p[1],q,n=f;"string"===typeof s&&(q=s,e=a.convert(e,q),n=a.find(f,[q,q]));f=[];q=new b({data:f,size:[c,p],datatype:q});for(var s=[],r=[],t=0;t<p;t++){for(var x=t+1,v=l[t+1],w=l[t];w<v;w++){var y=h[w];s[y]=k[w];r[y]=x}for(v=0;v<c;v++)0===t&&(f[v]=[]),f[v][t]=r[v]===x?g?n(e,s[v]):n(s[v],e):e}return q}}},function(w,l,h){h(14);var r=h(19);l.name="algorithm13";l.factory=function(c,a,b,d){var e=
c.DenseMatrix,f=function(a,b,c,d,e,h){var q=[];if(b===c.length-1)for(b=0;b<d;b++)q[b]=a(e[b],h[b]);else for(var n=0;n<d;n++)q[n]=f(a,b+1,c,c[b+1],e[n],h[n]);return q};return function(a,b,c){var h=a._data,l=a._size,s=a._datatype,q=b._data,n=b._size,w=b._datatype;a=[];if(l.length!==n.length)throw new r(l.length,n.length);for(var t=0;t<l.length;t++){if(l[t]!==n[t])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+n+")");a[t]=l[t]}var x,l=c;"string"===typeof s&&s===w&&
(x=s,d.convert(b,x),l=d.find(c,[x,x]));b=0<a.length?f(l,0,a,a[0],h,q):[];return new e({data:b,size:a,datatype:x})}}},function(w,l,h){var r=h(3).clone;l.name="algorithm14";l.factory=function(c,a,b,d){var e=c.DenseMatrix,f=function(a,b,c,d,e,h,q){var n=[];if(b===c.length-1)for(b=0;b<d;b++)n[b]=q?a(h,e[b]):a(e[b],h);else for(var l=0;l<d;l++)n[l]=f(a,b+1,c,c[b+1],e[l],h,q);return n};return function(a,b,c,h){var l=a._data,s=a._size;a=a._datatype;var q,n=c;"string"===typeof a&&(q=a,b=d.convert(b,q),n=d.find(c,
[q,q]));b=0<s.length?f(n,0,s,s[0],l,b,h):[];return new e({data:b,size:r(s),datatype:q})}}},function(w,l,h){var r=h(6).isInteger,c=h(15).size;l.name="pow";l.factory=function(a,b,d,e){function f(c,d){return r(d)||0<=c||b.predictable?Math.pow(c,d):g(new a.Complex(c,0),new a.Complex(d,0))}function g(a,b){return p(n(q(a),b))}function k(a,b){if(!r(b)||0>b)throw new TypeError("For A^b, b must be a positive integer (value is "+b+")");var d=c(a);if(2!=d.length)throw Error("For A^b, A must be 2 dimensional (A has "+
d.length+" dimensions)");if(d[0]!=d[1])throw Error("For A^b, A must be square (size is "+d[0]+"x"+d[1]+")");for(var d=s(d[0]).valueOf(),e=a;1<=b;)1==(b&1)&&(d=n(e,d)),b>>=1,e=n(e,e);return d}function m(a,b){return w(k(a.valueOf(),b))}var l=h(41),p=d(h(49)),s=d(h(50)),q=d(h(51)),n=d(h(53)),w=d(h(39));d=e("pow",{"number, number":f,"Complex, Complex":g,"BigNumber, BigNumber":function(c,d){return d.isInteger()||0<=c||b.predictable?c.pow(d):g(new a.Complex(c.toNumber(),0),new a.Complex(d.toNumber(),0))},
"Fraction, Fraction":function(a,c){if(1!==c.d){if(b.predictable)throw Error("Function pow does not support non-integer exponents for fractions.");return f(a.valueOf(),c.valueOf())}return a.pow(c)},"Array, number":k,"Array, BigNumber":function(a,b){return k(a,b.toNumber())},"Matrix, number":m,"Matrix, BigNumber":function(a,b){return m(a,b.toNumber())}});d.toTex="\\left(${args[0]}\\right)"+l.operators.pow+"{${args[1]}}";return d}},function(w,l,h){var r=h(25);l.name="exp";l.factory=function(c,a,b,d){var e=
d("exp",{number:Math.exp,Complex:function(a){var b=Math.exp(a.re);return new c.Complex(b*Math.cos(a.im),b*Math.sin(a.im))},BigNumber:function(a){return a.exp()},"Array | Matrix":function(a){return r(a,e)}});e.toTex="\\exp\\left(${args[0]}\\right)";return e}},function(w,l,h){var r=h(15),c=h(6).isInteger;l.name="eye";l.factory=function(a,b,d,e){function f(a,b){switch(a.length){case 0:return b?k(b):[];case 1:return g(a[0],a[0],b);case 2:return g(a[0],a[1],b);default:throw Error("Vector containing two values expected");
}}function g(b,d,e){var f=b&&!0===b.isBigNumber?a.BigNumber:d&&!0===d.isBigNumber?a.BigNumber:null;b&&!0===b.isBigNumber&&(b=b.toNumber());d&&!0===d.isBigNumber&&(d=d.toNumber());if(!c(b)||1>b)throw Error("Parameters in function eye must be positive integers");if(!c(d)||1>d)throw Error("Parameters in function eye must be positive integers");var g=f?new a.BigNumber(1):1,f=f?new f(0):0,k=[b,d];if(e)return a.Matrix.storage(e).diagonal(k,g,0,f);e=r.resize([],k,f);b=b<d?b:d;for(d=0;d<b;d++)e[d][d]=g;return e}
var k=d(h(39));d=e("eye",{"":function(){return"matrix"===b.matrix?k([]):[]},string:function(a){return k(a)},"number | BigNumber":function(a){return g(a,a,"matrix"===b.matrix?"default":void 0)},"number | BigNumber, string":function(a,b){return g(a,a,b)},"number | BigNumber, number | BigNumber":function(a,c){return g(a,c,"matrix"===b.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(a,b,c){return g(a,b,c)},Array:function(a){return f(a)},"Array, string":function(a,b){return f(a,
b)},Matrix:function(a){return f(a.valueOf(),a.storage())},"Matrix, string":function(a,b){return f(a.valueOf(),b)}});d.toTex="\\mathrm{${name}}\\left(${args}\\right)";return d}},function(w,l,h){var r=h(25);l.name="log";l.factory=function(c,a,b,d){function e(a){return new c.Complex(Math.log(Math.sqrt(a.re*a.re+a.im*a.im)),Math.atan2(a.im,a.re))}var f=b(h(52)),g=d("log",{number:function(b){return 0<=b||a.predictable?Math.log(b):g(new c.Complex(b,0))},Complex:e,BigNumber:function(b){return!b.isNegative()||
a.predictable?b.ln():e(new c.Complex(b.toNumber(),0))},"Array | Matrix":function(a){return r(a,g)},"any, any":function(a,b){return f(g(a),g(b))}});g.toTex={1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"};return g}},function(w,l){l.factory=function(h,l,c,a){return a("divide",{"number, number":function(a,c){return a/c},"Complex, Complex":function(a,c){var e=c.re*c.re+c.im*c.im;return 0!=e?new h.Complex((a.re*c.re+a.im*c.im)/e,(a.im*c.re-a.re*c.im)/e):new h.Complex(0!=
a.re?a.re/0:0,0!=a.im?a.im/0:0)},"BigNumber, BigNumber":function(a,c){return a.div(c)},"Fraction, Fraction":function(a,c){return a.div(c)},"Unit, number":function(a,c){var e=a.clone();e.value=(null===e.value?e._normalize(1):e.value)/c;return e}})}},function(w,l,h){var r=h(3).extend,c=h(15);l.name="multiply";l.factory=function(a,b,d,e){b=h(41);var f=d(h(39)),g=d(h(40)),k=d(h(54)),m=d(h(44)),l=d(h(55)),p=d(h(47)),s=a.DenseMatrix,q=a.SparseMatrix,n=e("multiply",r({"Array, Array":function(a,b){w(c.size(a),
c.size(b));var d=n(f(a),f(b));return d&&!0===d.isMatrix?d.valueOf():d},"Matrix, Matrix":function(a,b){var c=a.size(),d=b.size();w(c,d);if(1===c.length){if(1===d.length){var f=c[0];if(0===f)throw Error("Cannot multiply two empty vectors");var h=a._data,n=a._datatype,l=b._data,p=b._datatype,c=g,d=k;n&&p&&n===p&&"string"===typeof n&&(c=e.find(g,[n,n]),d=e.find(k,[n,n]));n=d(h[0],l[0]);for(p=1;p<f;p++)n=c(n,d(h[p],l[p]));return n}a:{switch(b.storage()){case "dense":var f=a._data,u=a._datatype,h=b._data,
r=b._datatype,c=a._size[0],d=b._size[1],n=g,p=k;u&&r&&u===r&&"string"===typeof u&&(l=u,n=e.find(g,[l,l]),p=e.find(k,[l,l]));u=[];for(r=0;r<d;r++){for(var G=p(f[0],h[0][r]),L=1;L<c;L++)G=n(G,p(f[L],h[L][r]));u[r]=G}f=1===d?u[0]:new s({data:u,size:[d],datatype:l});break a}throw Error("Not implemented");}return f}if(1===d.length){a:{switch(a.storage()){case "dense":f=a._data;d=a._size;u=a._datatype;l=b._data;r=b._datatype;c=d[0];d=d[1];n=g;p=k;u&&r&&u===r&&"string"===typeof u&&(h=u,n=e.find(g,[h,h]),
p=e.find(k,[h,h]));u=[];for(r=0;r<c;r++){for(var G=f[r],L=p(G[0],l[0]),N=1;N<d;N++)L=n(L,p(G[N],l[N]));u[r]=L}f=1===c?u[0]:new s({data:u,size:[c],datatype:h});break a;case "sparse":var n=a._values,p=a._index,u=a._ptr,M=a._datatype;if(!n)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");var r=b._data,F=b._datatype,h=a._size[0],G=b._size[0],l=[],c=[],d=[],L=g,N=k,J=m,K=0;M&&F&&M===F&&"string"===typeof M&&(f=M,L=e.find(g,[f,f]),N=e.find(k,[f,f]),J=e.find(m,[f,f]),K=e.convert(0,f));
for(var M=[],F=[],I=d[0]=0;I<G;I++){var Q=r[I];if(!J(Q,K))for(var P=u[I+1],R=u[I];R<P;R++){var fa=p[R];F[fa]?M[fa]=L(M[fa],N(Q,n[R])):(F[fa]=!0,c.push(fa),M[fa]=N(Q,n[R]))}}n=c.length;for(p=0;p<n;p++)l[p]=M[c[p]];d[1]=c.length;f=1===h?1===l.length?l[0]:0:new q({values:l,index:c,ptr:d,size:[h,1],datatype:f});break a}f=void 0}return f}return t(a,b)},"Matrix, Array":function(a,b){return n(a,f(b))},"Array, Matrix":function(a,b){return n(f(a,b.storage()),b)},"Matrix, any":function(a,b){var c;switch(a.storage()){case "sparse":c=
l(a,b,k,!1);break;case "dense":c=p(a,b,k,!1)}return c},"any, Matrix":function(a,b){var c;switch(b.storage()){case "sparse":c=l(b,a,k,!0);break;case "dense":c=p(b,a,k,!0)}return c},"Array, any":function(a,b){return p(f(a),b,k,!1).valueOf()},"any, Array":function(a,b){return p(f(b),a,k,!0).valueOf()}},k.signatures)),w=function(a,b){switch(a.length){case 1:switch(b.length){case 1:if(a[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(a[0]!==
b[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+a[0]+") must match Matrix rows ("+b[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)");}break;case 2:switch(b.length){case 1:if(a[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+a[1]+") must match Vector length ("+b[0]+")");break;case 2:if(a[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+
a[1]+") must match Matrix B rows ("+b[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)");}break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+a.length+" dimensions)");}},t=function(a,b){switch(a.storage()){case "dense":switch(b.storage()){case "dense":var c;var d=a._data,f=a._size,h=a._datatype,n=b._data,l=b._datatype,p=f[0],u=f[1],t=b._size[1],r,w=g,W=k;h&&l&&h===l&&"string"===typeof h&&(r=
h,w=e.find(g,[r,r]),W=e.find(k,[r,r]));for(var G=[],F=0;F<p;F++){var J=d[F];G[F]=[];for(var K=0;K<t;K++){for(var I=W(J[0],n[0][K]),Q=1;Q<u;Q++)I=w(I,W(J[Q],n[Q][K]));G[F][K]=I}}c=1===p&&1===t?G[0][0]:new s({data:G,size:[p,t],datatype:r});return c;case "sparse":var P;var R=a._data,fa=a._size,Ta=a._datatype,Y=b._values,X=b._index,sa=b._ptr,V=b._size,Z=b._datatype;if(!Y)throw Error("Cannot multiply Dense Matrix times Pattern only Matrix");var ia=fa[0],ra=V[1],la,xa=g,ua=k,ya=m,za=0;Ta&&Z&&Ta===Z&&"string"===
typeof Ta&&(la=Ta,xa=e.find(g,[la,la]),ua=e.find(k,[la,la]),ya=e.find(m,[la,la]),za=e.convert(0,la));for(var aa=[],va=[],Ea=[],Ka=new q({values:aa,index:va,ptr:Ea,size:[ia,ra],datatype:la}),$=0;$<ra;$++){Ea[$]=va.length;var da=sa[$],ea=sa[$+1];if(ea>da)for(var ba=0,ja=0;ja<ia;ja++){for(var ga=ja+1,ma,oa=da;oa<ea;oa++){var wa=X[oa];ba!==ga?(ma=ua(R[ja][wa],Y[oa]),ba=ga):ma=xa(ma,ua(R[ja][wa],Y[oa]))}ba!==ga||ya(ma,za)||(va.push(ja),aa.push(ma))}}Ea[ra]=va.length;P=1===ia&&1===ra?1===aa.length?aa[0]:
0:Ka;return P}break;case "sparse":switch(b.storage()){case "dense":var U;var ka=a._values,Ma=a._index,Na=a._ptr,Aa=a._datatype;if(!ka)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");var Oa=b._data,Pa=b._datatype,ha=a._size[0],Ba=b._size[0],Ua=b._size[1],ta,mb=g,hb=k,nb=m,ob=0;Aa&&Pa&&Aa===Pa&&"string"===typeof Aa&&(ta=Aa,mb=e.find(g,[ta,ta]),hb=e.find(k,[ta,ta]),nb=e.find(m,[ta,ta]),ob=e.convert(0,ta));for(var O=[],Fa=[],T=[],zb=new q({values:O,index:Fa,ptr:T,size:[ha,Ua],datatype:ta}),
Va=[],pb=[],Ga=0;Ga<Ua;Ga++){T[Ga]=Fa.length;for(var qb=Ga+1,La=0;La<Ba;La++){var ib=Oa[La][Ga];if(!nb(ib,ob))for(var Ab=Na[La+1],Qa=Na[La];Qa<Ab;Qa++){var Ha=Ma[Qa];pb[Ha]!==qb?(pb[Ha]=qb,Fa.push(Ha),Va[Ha]=hb(ib,ka[Qa])):Va[Ha]=mb(Va[Ha],hb(ib,ka[Qa]))}}for(var Bb=Fa.length,Wa=T[Ga];Wa<Bb;Wa++)O[Wa]=Va[Fa[Wa]]}T[Ua]=Fa.length;U=1===ha&&1===Ua?1===O.length?O[0]:0:zb;return U;case "sparse":var rb;var jb=a._values,sb=a._index,Xa=a._ptr,Ya=a._datatype,kb=b._values,Cb=b._index,tb=b._ptr,ub=b._datatype,
vb=a._size[0],Za=b._size[1],Ra=jb&&kb,Ia,wb=g,lb=k;Ya&&ub&&Ya===ub&&"string"===typeof Ya&&(Ia=Ya,wb=e.find(g,[Ia,Ia]),lb=e.find(k,[Ia,Ia]));for(var $a=Ra?[]:void 0,Ca=[],ab=[],Db=new q({values:$a,index:Ca,ptr:ab,size:[vb,Za],datatype:Ia}),bb=Ra?[]:void 0,cb=[],qa,db,eb,Ja,xb,yb,pa,Sa,Da=0;Da<Za;Da++){ab[Da]=Ca.length;var fb=Da+1;xb=tb[Da];yb=tb[Da+1];for(Ja=xb;Ja<yb;Ja++)if(Sa=Cb[Ja],Ra)for(db=Xa[Sa],eb=Xa[Sa+1],qa=db;qa<eb;qa++)pa=sb[qa],cb[pa]!==fb?(cb[pa]=fb,Ca.push(pa),bb[pa]=lb(kb[Ja],jb[qa])):
bb[pa]=wb(bb[pa],lb(kb[Ja],jb[qa]));else for(db=Xa[Sa],eb=Xa[Sa+1],qa=db;qa<eb;qa++)pa=sb[qa],cb[pa]!==fb&&(cb[pa]=fb,Ca.push(pa));if(Ra)for(var Eb=Ca.length,gb=ab[Da];gb<Eb;gb++)$a[gb]=bb[Ca[gb]]}ab[Za]=Ca.length;rb=1===vb&&1===Za&&Ra?1===$a.length?$a[0]:0:Db;return rb}}};n.toTex="\\left(${args[0]}"+b.operators.multiply+"${args[1]}\\right)";return n}},function(w,l){l.factory=function(h,l,c,a){return a("multiplyScalar",{"number, number":function(a,c){return a*c},"Complex, Complex":function(a,c){return new h.Complex(a.re*
c.re-a.im*c.im,a.re*c.im+a.im*c.re)},"BigNumber, BigNumber":function(a,c){return a.times(c)},"Fraction, Fraction":function(a,c){return a.mul(c)},"number, Unit":function(a,c){var e=c.clone();e.value=null===e.value?e._normalize(a):e.value*a;return e},"Unit, number":function(a,c){var e=a.clone();e.value=null===e.value?e._normalize(c):e.value*c;return e}})}},function(w,l,h){l.name="algorithm11";l.factory=function(l,c,a,b){var d=a(h(44)),e=l.SparseMatrix;return function(a,c,k,h){var l=a._values,p=a._index,
s=a._ptr,q=a._size,n=a._datatype;if(!l)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var r=q[0],q=q[1],t;a=d;var x=0,v=k;"string"===typeof n&&(t=n,a=b.find(d,[t,t]),x=b.convert(0,t),c=b.convert(c,t),v=b.find(k,[t,t]));k=[];var n=[],w=[];t=new e({values:k,index:n,ptr:w,size:[r,q],datatype:t});for(r=0;r<q;r++){w[r]=n.length;for(var y=s[r+1],A=s[r];A<y;A++){var E=p[A],B=h?v(c,l[A]):v(l[A],c);a(B,x)||(n.push(E),k.push(B))}}w[q]=n.length;return t}}},function(w,l,h){var r=
h(6).nearlyEqual;l.name="larger";l.factory=function(c,a,b,d){var e=b(h(39)),f=b(h(57)),g=b(h(58)),k=b(h(59)),m=b(h(46)),l=b(h(47));c=h(41);var p=d("larger",{"boolean, boolean":function(a,b){return a>b},"number, number":function(b,c){return b>c&&!r(b,c,a.epsilon)},"BigNumber, BigNumber":function(a,b){return a.gt(b)},"Fraction, Fraction":function(a,b){return 1===a.compare(b)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function(b,
c){if(!b.equalBase(c))throw Error("Cannot compare units with different base");return b.value>c.value&&!r(b.value,c.value,a.epsilon)},"string, string":function(a,b){return a>b},"Matrix, Matrix":function(a,b){var c;switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":c=g(a,b,p);break;default:c=f(b,a,p,!0)}break;default:switch(b.storage()){case "sparse":c=f(a,b,p,!1);break;default:c=m(a,b,p)}}return c},"Array, Array":function(a,b){return p(e(a),e(b)).valueOf()},"Array, Matrix":function(a,
b){return p(e(a),b)},"Matrix, Array":function(a,b){return p(a,e(b))},"Matrix, any":function(a,b){var c;switch(a.storage()){case "sparse":c=k(a,b,p,!1);break;default:c=l(a,b,p,!1)}return c},"any, Matrix":function(a,b){var c;switch(b.storage()){case "sparse":c=k(b,a,p,!0);break;default:c=l(b,a,p,!0)}return c},"Array, any":function(a,b){return l(e(a),b,p,!1).valueOf()},"any, Array":function(a,b){return l(e(b),a,p,!0).valueOf()}});p.toTex="\\left(${args[0]}"+c.operators.larger+"${args[1]}\\right)";return p}},
function(w,l,h){var r=h(19);l.name="algorithm03";l.factory=function(c,a,b,d){var e=c.DenseMatrix;return function(a,b,c,h){var l=a._data,p=a._size,s=a._datatype;a=b._values;var q=b._index,n=b._ptr,w=b._size,t=b._datatype;if(p.length!==w.length)throw new r(p.length,w.length);if(p[0]!==w[0]||p[1]!==w[1])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+w+")");if(!a)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");b=p[0];var p=p[1],x,w=
0,v=c;"string"===typeof s&&s===t&&(x=s,w=d.convert(0,x),v=d.find(c,[x,x]));c=[];for(s=0;s<b;s++)c[s]=[];for(var s=[],t=[],D=0;D<p;D++){for(var y=D+1,A=n[D+1],E=n[D];E<A;E++){var B=q[E];s[B]=h?v(a[E],l[B][D]):v(l[B][D],a[E]);t[B]=y}for(A=0;A<b;A++)c[A][D]=t[A]===y?s[A]:h?v(w,l[A][D]):v(l[A][D],w)}return new e({data:c,size:[b,p],datatype:x})}}},function(w,l,h){var r=h(19);l.name="algorithm07";l.factory=function(c,a,b,d){var e=c.DenseMatrix,f=function(a,b,c,d,e){var f=a._values,h=a._index,l=a._ptr;a=
l[b];for(b=l[b+1];a<b;a++)l=h[a],c[l]=e,d[l]=f[a]};return function(a,b,c){var h=a._size,l=a._datatype,s=b._size,q=b._datatype;if(h.length!==s.length)throw new r(h.length,s.length);if(h[0]!==s[0]||h[1]!==s[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+s+")");var s=h[0],h=h[1],n,w=0,t=c;"string"===typeof l&&l===q&&(n=l,w=d.convert(0,n),t=d.find(c,[n,n]));l=[];for(c=0;c<s;c++)l[c]=[];var q=new e({data:l,size:[s,h],datatype:n}),x=[],v=[],D=[],y=[];for(n=0;n<h;n++){var A=
n+1;f(a,n,D,x,A);f(b,n,y,v,A);for(c=0;c<s;c++)l[c][n]=t(D[c]===A?x[c]:w,y[c]===A?v[c]:w)}return q}}},function(w,l){l.name="algorithm12";l.factory=function(h,l,c,a){var b=h.DenseMatrix;return function(c,e,f,g){var k=c._values,h=c._index,l=c._ptr,p=c._size,s=c._datatype;if(!k)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");c=p[0];var p=p[1],q,n=f;"string"===typeof s&&(q=s,e=a.convert(e,q),n=a.find(f,[q,q]));f=[];q=new b({data:f,size:[c,p],datatype:q});for(var s=[],
r=[],t=0;t<p;t++){for(var x=t+1,v=l[t+1],w=l[t];w<v;w++){var y=h[w];s[y]=k[w];r[y]=x}for(v=0;v<c;v++)0===t&&(f[v]=[]),f[v][t]=r[v]===x?g?n(e,s[v]):n(s[v],e):g?n(e,0):n(0,e)}return q}}},function(w,l,h){var r=h(6).nearlyEqual;l.name="smaller";l.factory=function(c,a,b,d){var e=b(h(39)),f=b(h(57)),g=b(h(58)),k=b(h(59)),l=b(h(46)),u=b(h(47));c=h(41);var p=d("smaller",{"boolean, boolean":function(a,b){return a<b},"number, number":function(b,c){return b<c&&!r(b,c,a.epsilon)},"BigNumber, BigNumber":function(a,
b){return a.lt(b)},"Fraction, Fraction":function(a,b){return-1===a.compare(b)},"Complex, Complex":function(a,b){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function(b,c){if(!b.equalBase(c))throw Error("Cannot compare units with different base");return b.value<c.value&&!r(b.value,c.value,a.epsilon)},"string, string":function(a,b){return a<b},"Matrix, Matrix":function(a,b){var c;switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":c=g(a,b,
p);break;default:c=f(b,a,p,!0)}break;default:switch(b.storage()){case "sparse":c=f(a,b,p,!1);break;default:c=l(a,b,p)}}return c},"Array, Array":function(a,b){return p(e(a),e(b)).valueOf()},"Array, Matrix":function(a,b){return p(e(a),b)},"Matrix, Array":function(a,b){return p(a,e(b))},"Matrix, any":function(a,b){var c;switch(a.storage()){case "sparse":c=k(a,b,p,!1);break;default:c=u(a,b,p,!1)}return c},"any, Matrix":function(a,b){var c;switch(b.storage()){case "sparse":c=k(b,a,p,!0);break;default:c=
u(b,a,p,!0)}return c},"Array, any":function(a,b){return u(e(a),b,p,!1).valueOf()},"any, Array":function(a,b){return u(e(b),a,p,!0).valueOf()}});p.toTex="\\left(${args[0]}"+c.operators.smaller+"${args[1]}\\right)";return p}},function(w,l,h){var r=h(3).clone,c=h(16).format;l.name="trace";l.factory=function(a,b,d,e){var f=d(h(39)),g=d(h(38)),k=e("trace",{Array:function(a){return k(f(a))},Matrix:function(a){var b;switch(a.storage()){case "dense":a:{var d=a._size;b=a._data;switch(d.length){case 1:if(1==
d[0]){b=r(b[0]);break a}throw new RangeError("Matrix must be square (size: "+c(d)+")");case 2:var e=d[0];if(e===d[1]){for(a=d=0;a<e;a++)d=g(d,b[a][a]);b=d;break a}throw new RangeError("Matrix must be square (size: "+c(d)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+c(d)+")");}}break;case "sparse":b=a._values;var e=a._index,d=a._ptr,f=a._size;a=f[1];if(f[0]===a){f=0;if(0<b.length)for(var k=0;k<a;k++)for(var h=d[k+1],l=d[k];l<h;l++){var x=e[l];if(x===k){f=g(f,b[l]);break}if(x>
k)break}b=f}else throw new RangeError("Matrix must be square (size: "+c(f)+")");}return b},any:r});k.toTex="\\mathrm{tr}\\left(${args[0]}\\right)";return k}},function(w,l,h){var r=h(3).clone,c=h(16).format;l.name="transpose";l.factory=function(a,b,d,e){b=h(41);var f=d(h(39)),g=a.DenseMatrix,k=a.SparseMatrix,l=e("transpose",{Array:function(a){return l(f(a)).valueOf()},Matrix:function(a){var b=a.size(),d;switch(b.length){case 1:d=a.clone();break;case 2:var e=b[0],f=b[1];if(0===f)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+
c(b)+")");switch(a.storage()){case "dense":b=a._data;d=[];for(var h,l=0;l<f;l++){h=d[l]=[];for(var m=0;m<e;m++)h[m]=r(b[m][l])}d=new g({data:d,size:[f,e],datatype:a._datatype});break;case "sparse":b=a._values;d=a._index;h=a._ptr;for(var l=b?[]:void 0,m=[],v=[],w=[],y=0;y<e;y++)w[y]=0;var A,y=0;for(A=d.length;y<A;y++)w[d[y]]++;for(A=y=0;A<e;A++)v.push(y),y+=w[A],w[A]=v[A];v.push(y);for(y=0;y<f;y++){A=h[y+1];for(var E=h[y];E<A;E++){var B=w[d[E]]++;m[B]=y;b&&(l[B]=r(b[E]))}}d=new k({values:l,index:m,
ptr:v,size:[f,e],datatype:a._datatype})}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+c(this._size)+")");}return d},any:function(a){return r(a)}});l.toTex="\\left(${args[0]}\\right)"+b.operators.transpose;return l}},function(w,l,h){var r=h(3).extend;l.name="divide";l.factory=function(c,a,b,d){var e=b(h(52)),f=b(h(53)),g=b(h(64)),k=b(h(39)),l=b(h(55)),u=b(h(47));c=d("divide",r({"Array | Matrix, Array | Matrix":function(a,b){return f(a,g(b))},"Matrix, any":function(a,
b){var c;switch(a.storage()){case "sparse":c=l(a,b,e,!1);break;case "dense":c=u(a,b,e,!1)}return c},"Array, any":function(a,b){return u(k(a),b,e,!1).valueOf()},"any, Array | Matrix":function(a,b){return f(a,g(b))}},e.signatures));c.toTex="\\frac{${args[0]}}{${args[1]}}";return c}},function(w,l,h){var r=h(14);l.name="inv";l.factory=function(c,a,b,d){function e(a,b,c){var d,e;if(1==b){b=a[0][0];if(0==b)throw Error("Cannot calculate inverse, determinant is zero");return[[g(1,b)]]}if(2==b){b=p(a);if(0==
b)throw Error("Cannot calculate inverse, determinant is zero");return[[g(a[1][1],b),g(u(a[0][1]),b)],[g(u(a[1][0]),b),g(a[0][0],b)]]}var f=a.concat();for(a=0;a<b;a++)f[a]=f[a].concat();for(var h=s(b).valueOf(),r=0;r<c;r++){for(a=r;a<b&&0==f[a][r];)a++;if(a==b||0==f[a][r])throw Error("Cannot calculate inverse, determinant is zero");a!=r&&(d=f[r],f[r]=f[a],f[a]=d,d=h[r],h[r]=h[a],h[a]=d);var w=f[r],E=h[r];for(a=0;a<b;a++){var B=f[a],G=h[a];if(a!=r){if(0!=B[r]){e=g(u(B[r]),w[r]);for(d=r;d<c;d++)B[d]=
k(B[d],l(e,w[d]));for(d=0;d<c;d++)G[d]=k(G[d],l(e,E[d]))}}else{e=w[r];for(d=r;d<c;d++)B[d]=g(B[d],e);for(d=0;d<c;d++)G[d]=g(G[d],e)}}}return h}var f=b(h(39)),g=b(h(52)),k=b(h(40)),l=b(h(53)),u=b(h(65)),p=b(h(66)),s=b(h(50));c=d("inv",{"Array | Matrix":function(a){var b=!0===a.isMatrix?a.size():r.array.size(a);switch(b.length){case 1:if(1==b[0])return!0===a.isMatrix?f([g(1,a.valueOf()[0])]):[g(1,a[0])];throw new RangeError("Matrix must be square (size: "+r.string.format(b)+")");case 2:var c=b[0],d=
b[1];if(c==d)return!0===a.isMatrix?f(e(a.valueOf(),c,d),a.storage()):e(a,c,d);throw new RangeError("Matrix must be square (size: "+r.string.format(b)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+r.string.format(b)+")");}},any:function(a){return g(1,a)}});c.toTex="\\left(${args[0]}\\right)^{-1}";return c}},function(w,l,h){var r=h(25);l.name="unaryMinus";l.factory=function(c,a,b,d){a=h(41);var e=d("unaryMinus",{number:function(a){return-a},Complex:function(a){return new c.Complex(-a.re,
-a.im)},BigNumber:function(a){return a.neg()},Fraction:function(a){a=a.clone();a.s=-a.s;return a},Unit:function(a){var b=a.clone();b.value=-a.value;return b},"Array | Matrix":function(a){return r(a,e,!0)}});e.toTex=a.operators.unaryMinus+"\\left(${args[0]}\\right)";return e}},function(w,l,h){w=h(14);var r=w.object,c=w.string;l.name="det";l.factory=function(a,b,d,e){var f=d(h(39)),g=d(h(38)),k=d(h(67)),l=d(h(53)),u=d(h(65));a=e("det",{any:function(a){return r.clone(a)},"Array | Matrix":function(a){var b;
a&&!0===a.isMatrix?b=a.size():Array.isArray(a)?(a=f(a),b=a.size()):b=[];switch(b.length){case 0:return r.clone(a);case 1:if(1==b[0])return r.clone(a.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+c.format(b)+")");case 2:var d=b[0];if(d==b[1]){a=a.clone().valueOf();if(1==d)d=r.clone(a[0][0]);else if(2==d)d=k(l(a[0][0],a[1][1]),l(a[1][0],a[0][1]));else{var e=a;for(b=0;b<d-1;b++){for(var h=void 0,t=void 0,x=Array(e.length),v=0,h=1;h<e.length;h++)v=g(v,e[h][h]);for(h=0;h<e.length;h++){x[h]=
Array(e.length);x[h][h]=u(v);for(t=0;t<h;t++)x[h][t]=0;for(t=h+1;t<e.length;t++)x[h][t]=e[h][t];h+1<e.length&&(v=k(v,e[h+1][h+1]))}e=l(x,a)}d=0==d%2?u(e[0][0]):e[0][0]}return d}throw new RangeError("Matrix must be square (size: "+c.format(b)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+c.format(b)+")");}}});a.toTex="\\det\\left(${args[0]}\\right)";return a}},function(w,l,h){var r=h(19);l.name="subtract";l.factory=function(c,a,b,d){a=h(41);var e=b(h(39)),f=b(h(40)),g=
b(h(65)),k=b(h(42)),l=b(h(57)),u=b(h(68)),p=b(h(45)),s=b(h(46)),q=b(h(47)),n=d("subtract",{"number, number":function(a,b){return a-b},"Complex, Complex":function(a,b){return new c.Complex(a.re-b.re,a.im-b.im)},"BigNumber, BigNumber":function(a,b){return a.minus(b)},"Fraction, Fraction":function(a,b){return a.sub(b)},"Unit, Unit":function(a,b){if(null==a.value)throw Error("Parameter x contains a unit with undefined value");if(null==b.value)throw Error("Parameter y contains a unit with undefined value");
if(!a.equalBase(b))throw Error("Units do not match");var c=a.clone();c.value-=b.value;c.fixPrefix=!1;return c},"Matrix, Matrix":function(a,b){var c=a.size(),d=b.size();if(c.length!==d.length)throw new r(c.length,d.length);switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":c=u(a,b,n);break;default:c=l(b,a,n,!0)}break;default:switch(b.storage()){case "sparse":c=k(a,b,n,!1);break;default:c=s(a,b,n)}}return c},"Array, Array":function(a,b){return n(e(a),e(b)).valueOf()},"Array, Matrix":function(a,
b){return n(e(a),b)},"Matrix, Array":function(a,b){return n(a,e(b))},"Matrix, any":function(a,b){var c;switch(a.storage()){case "sparse":c=p(a,g(b),f);break;default:c=q(a,b,n)}return c},"any, Matrix":function(a,b){var c;switch(b.storage()){case "sparse":c=p(b,a,n,!0);break;default:c=q(b,a,n,!0)}return c},"Array, any":function(a,b){return q(e(a),b,n,!1).valueOf()},"any, Array":function(a,b){return q(e(b),a,n,!0).valueOf()}});n.toTex="\\left(${args[0]}"+a.operators.subtract+"${args[1]}\\right)";return n}},
function(w,l,h){var r=h(19);l.name="algorithm05";l.factory=function(c,a,b,d){var e=b(h(44)),f=c.SparseMatrix;return function(a,b,c){var h=a._values,l=a._index,s=a._ptr,q=a._size,n=a._datatype;a=b._values;var w=b._index,t=b._ptr,x=b._size,v=b._datatype;if(q.length!==x.length)throw new r(q.length,x.length);if(q[0]!==x[0]||q[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+q+") must match Matrix B ("+x+")");var D=q[0],q=q[1],y;b=e;var x=0,A=c;"string"===typeof n&&n===v&&(y=n,b=d.find(e,
[y,y]),x=d.convert(0,y),A=d.find(c,[y,y]));c=h&&a?[]:void 0;n=[];v=[];y=new f({values:c,index:n,ptr:v,size:[D,q],datatype:y});var D=c?[]:void 0,E=c?[]:void 0,B=[],G=[],C,z,H,J;for(z=0;z<q;z++){v[z]=n.length;var L=z+1;H=s[z];for(J=s[z+1];H<J;H++)C=l[H],n.push(C),B[C]=L,D&&(D[C]=h[H]);H=t[z];for(J=t[z+1];H<J;H++)C=w[H],B[C]!==L&&n.push(C),G[C]=L,E&&(E[C]=a[H]);if(c)for(H=v[z];H<n.length;){C=n[H];J=B[C];var N=G[C];if(J===L||N===L)C=A(J===L?D[C]:x,N===L?E[C]:x),b(C,x)?n.splice(H,1):(c.push(C),H++)}}v[q]=
n.length;return y}}},function(w,l,h){l.name="dotMultiply";l.factory=function(l,c,a,b){var d=a(h(39)),e=a(h(54));l=h(41);var f=a(h(70)),g=a(h(71)),k=a(h(55)),m=a(h(46)),u=a(h(47)),p=b("dotMultiply",{"any, any":e,"Matrix, Matrix":function(a,b){var c;switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":c=g(a,b,e,!1);break;default:c=f(b,a,e,!0)}break;default:switch(b.storage()){case "sparse":c=f(a,b,e,!1);break;default:c=m(a,b,e)}}return c},"Array, Array":function(a,b){return p(d(a),d(b)).valueOf()},
"Array, Matrix":function(a,b){return p(d(a),b)},"Matrix, Array":function(a,b){return p(a,d(b))},"Matrix, any":function(a,b){var c;switch(a.storage()){case "sparse":c=k(a,b,e,!1);break;default:c=u(a,b,e,!1)}return c},"any, Matrix":function(a,b){var c;switch(b.storage()){case "sparse":c=k(b,a,e,!0);break;default:c=u(b,a,e,!0)}return c},"Array, any":function(a,b){return u(d(a),b,e,!1).valueOf()},"any, Array":function(a,b){return u(d(b),a,e,!0).valueOf()}});p.toTex="\\left(${args[0]}"+l.operators.dotMultiply+
"${args[1]}\\right)";return p}},function(w,l,h){var r=h(19);l.name="algorithm02";l.factory=function(c,a,b,d){var e=b(h(44)),f=c.SparseMatrix;return function(a,b,c,h){var l=a._data,s=a._size,q=a._datatype;a=b._values;var n=b._index,w=b._ptr,t=b._size,x=b._datatype;if(s.length!==t.length)throw new r(s.length,t.length);if(s[0]!==t[0]||s[1]!==t[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+t+")");if(!a)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");
b=s[0];var s=s[1],v,t=e,D=0,y=c;"string"===typeof q&&q===x&&(v=q,t=d.find(e,[v,v]),D=d.convert(0,v),y=d.find(c,[v,v]));c=[];for(var q=[],x=[],A=0;A<s;A++){x[A]=q.length;for(var E=w[A+1],B=w[A];B<E;B++){var G=n[B],C=h?y(a[B],l[G][A]):y(l[G][A],a[B]);t(C,D)||(q.push(G),c.push(C))}}x[s]=q.length;return new f({values:c,index:q,ptr:x,size:[b,s],datatype:v})}}},function(w,l,h){var r=h(19);l.name="algorithm09";l.factory=function(c,a,b,d){var e=b(h(44)),f=c.SparseMatrix;return function(a,b,c){var h=a._values,
l=a._index,s=a._ptr,q=a._size,n=a._datatype;a=b._values;var w=b._index,t=b._ptr,x=b._size,v=b._datatype;if(q.length!==x.length)throw new r(q.length,x.length);if(q[0]!==x[0]||q[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+q+") must match Matrix B ("+x+")");var D=q[0],q=q[1],y;b=e;var x=0,A=c;"string"===typeof n&&n===v&&(y=n,b=d.find(e,[y,y]),x=d.convert(0,y),A=d.find(c,[y,y]));c=h&&a?[]:void 0;n=[];v=[];y=new f({values:c,index:n,ptr:v,size:[D,q],datatype:y});var D=c?[]:void 0,E=
[],B,G,C,z;for(G=0;G<q;G++){v[G]=n.length;var H=G+1;if(D)for(B=t[G],z=t[G+1],C=B;C<z;C++)B=w[C],E[B]=H,D[B]=a[C];B=s[G];z=s[G+1];for(C=B;C<z;C++)if(B=l[C],D){var J=A(h[C],E[B]===H?D[B]:x);b(J,x)||(n.push(B),c.push(J))}else n.push(B)}v[q]=n.length;return y}}},function(w,l,h){var r=h(15).size;l.name="cross";l.factory=function(c,a,b,d){function e(a,b){var c=r(a),d=r(b);if(1!=c.length||1!=d.length||3!=c[0]||3!=d[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+c.join(", ")+"], B = ["+
d.join(", ")+"])");return[g(k(a[1],b[2]),k(a[2],b[1])),g(k(a[2],b[0]),k(a[0],b[2])),g(k(a[0],b[1]),k(a[1],b[0]))]}var f=b(h(39)),g=b(h(67)),k=b(h(53));c=d("cross",{"Matrix, Matrix":function(a,b){return f(e(a.toArray(),b.toArray()))},"Matrix, Array":function(a,b){return f(e(a.toArray(),b))},"Array, Matrix":function(a,b){return f(e(a,b.toArray()))},"Array, Array":e});c.toTex="\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)";return c}},function(w,l,h){var r=h(15).size;l.name="dot";l.factory=
function(c,a,b,d){function e(a,b){var c=r(a),d=r(b),e=c[0];if(1!==c.length||1!==d.length)throw new RangeError("Vector expected");if(c[0]!=d[0])throw new RangeError("Vectors must have equal length ("+c[0]+" != "+d[0]+")");if(0==e)throw new RangeError("Cannot calculate the dot product of empty vectors");for(d=c=0;d<e;d++)c=f(c,g(a[d],b[d]));return c}var f=b(h(38)),g=b(h(53));c=d("dot",{"Matrix, Matrix":function(a,b){return e(a.toArray(),b.toArray())},"Matrix, Array":function(a,b){return e(a.toArray(),
b)},"Array, Matrix":function(a,b){return e(a,b.toArray())},"Array, Array":e});c.toTex="\\left(${args[0]}\\cdot${args[1]}\\right)";return c}}])})},function(J,G,P){var w;!(w=function(){function l(){if(!d){d=!0;a&&clearInterval(a);var b=f;if(d&&b.length){f=[];var c;for(c=0;c<b.length;c+=1)b[c](e)}}}function h(a){d?a(e):f.push(a);return h}var r,c,a,b="undefined"!==typeof window&&window.document,d=!b,e=b?document:null,f=[];if(b){if(document.addEventListener)document.addEventListener("DOMContentLoaded",
l,!1),window.addEventListener("load",l,!1);else if(window.attachEvent){window.attachEvent("onload",l);c=document.createElement("div");try{r=null===window.frameElement}catch(g){}c.doScroll&&r&&window.external&&(a=setInterval(function(){try{c.doScroll(),l()}catch(a){}},30))}"complete"===document.readyState&&l()}h.version="2.0.1";h.load=function(a,b,c,d){d.isBuild?c(null):h(c)};return h}.call(G,P,G,J),void 0!==w&&(J.exports=w))}]);
</script>
</body>
</html>
