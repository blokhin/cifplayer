<!--
Materials Informatics HTML5 Player --- in-browser ultra-fast and
lightweight renderer of the crystallographic data.
Author: Evgeny Blokhin
License: MIT
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
<title>Materials Informatics HTML5 Player</title>
<style>
body{margin:0;padding:0;overflow:hidden;background:#fff;}
html, body{height:100%;}
#infopanel{position:absolute;top:20px;left:20px;width:150px;height:150px;text-align:left;z-index:100;line-height:22px;font-family:Arial;font-size:0.75em;}
#zoompanel{position:absolute;top:28px;right:20px;width:50px;height:102px;z-index:100;background:no-repeat url(data:image/gif;base64,R0lGODlhMgBmAKEBAAAAAP///8zMzP///yH5BAEKAAMALAAAAAAyAGYAAAL+nI+py+0uopzi2UtzvhxNLHXWJ4YiY55Gqg6sRzVvNx+bHKk5FPNV+cOReMBR77EzgoY+0LK2SOI4N2MQdfVBo9mEFHlUTqlhcNd2xjLFXLTmDWd+Ye64vepK5+v3/nWOxudnR4clOAhX2Ea2Bjb2BPioEMnVSGTIuDVJqQljiSmpRblpBqnnNZp3Kki2ZNW5khq7qgoL62bW+akmunqLqocHLFvZctiyq1VLu/m7zKcj7DlTljmoRoyd2Gs8zczaHb78La6dXd6cjC6kvl7p7D4LH19LH21cbT+8rT/+fk7jVruA5DyVm2ewG8BQAd0t3BMPIMJSrexle9iQjcWCVBiLXOoHkSG9LR1PcCqoMFgQRH4UkZLHkl/Il+Ni4jl5yKYclTl1SsEJ0+dOkRuJjlSJMtqpkow+9uPIlKLTo7QmWmkaUWJSqU/QDRwmLt+rlGJzoYxRlh2xKmnVvniTbmvNOGrDETIr12tbkP749sobVprfY4P/Aba7F+RXxT8KAAA7);}
#dpanel{position:absolute;top:134px;right:20px;width:50px;height:50px;z-index:100;background:no-repeat url(data:image/gif;base64,R0lGODlhMgAyAIABAMzMzAAAACH5BAEKAAEALAAAAAAyADIAAAKtjI+py+0Po5y02nuB3rz731HgSIJTiaKnhjXbCrTMK9FyYkP5bey85fuJWLUSJjgzZogR1TJWJB2ZOiWQ+nBeoU1rBbnQfrEO8ZBblT5hoykakUp134e4OUnv2dVZcn3/EVUGyAHTR3iWZjeWp7C3FeVlGGmyxuZxyEcJpieZ1ckJWrkCOjc66RfWBsmIaXkW4rZV2BKqSlubOmirSMjb6yvki/sz3CiEnKxsUAAAOw==);}
#optionpanel{position:absolute;bottom:2px;left:0;width:100%;height:30px;z-index:500;text-align:center;font-family:Arial;font-size:1.33em;}
#landing{position:absolute;left:0;top:0;right:0;bottom:0;height:auto;margin:50px;border:10px #eee dashed;text-align:center;font-family:Verdana;font-size:2.05em;color:#ddd;letter-spacing:-1px;padding:25px;font-weight:bold;line-height:1.05em;}
#landing a{color:#ddd;font-size:0.9em;}
</style>
</head>
<body>
<script type="text/javascript">
/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details
*/
'use strict';var player=function(P){function R(q){if(F[q])return F[q].exports;var h=F[q]={exports:{},id:q,loaded:!1};P[q].call(h.exports,h,h.exports,R);h.loaded=!0;return h.exports}var F={};R.m=P;R.c=F;R.p="";return R(0)}([function(P,R,F){!function(){var q=[F(1),F(3),F(4)];(function(h,g,p){function c(a,b,d){d||(d=15658734);var c=new s.Geometry;c.vertices.push(new s.Vector3(a[0],a[1],a[2]));c.vertices.push(new s.Vector3(b[0],b[1],b[2]));a=new s.LineBasicMaterial({color:d});r.atombox.add(new s.Line(c,
a))}function a(a){var b=document.createElement("canvas"),d=b.getContext("2d"),c=3.5*d.measureText(a).width;b.width=c;b.height=26;d.font="normal 26px Arial";d.textAlign="center";d.textBaseline="middle";d.fillStyle="#000000";d.fillText(a,b.width/2,b.height/2);a=new s.Texture(b);a.needsUpdate=!0;a=new s.SpriteMaterial({map:a});a=new s.Sprite(a);a.renderOrder=1;b=new s.Object3D;a.scale.set(c,26,1);b.add(a);b.name="label";return b}function b(){r.loaded=!0;r.container=document.createElement("div");r.container.style.backgroundColor=
"#ffffff";document.body.appendChild(r.container);r.scene=new s.Scene;r.camera=new s.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,2E4);r.camera.position.set(0,0,3E3);var a=new s.AmbientLight(10066329);r.scene.add(a);a=new s.PointLight(6710886,1);a.position.set(1500,1500,1500);r.scene.add(a);r.renderer=new s.CanvasRenderer;r.renderer.setClearColor(16777215,1);r.renderer.setSize(window.innerWidth,window.innerHeight);r.container.appendChild(r.renderer.domElement);a=document.createElement("div");
a.setAttribute("id","zoompanel");document.body.appendChild(a);a.onclick=function(a){a=a||window.event;a.cancelBubble?a.cancelBubble=!0:(a.stopPropagation(),a.preventDefault());r.camera.fov-=7.5*(79<(a.pageY?a.pageY:a.clientY)?-1:1);r.camera.updateProjectionMatrix()};r.controls=new s.TrackballControls(r.camera);r.controls.rotateSpeed=1.75;r.controls.staticMoving=!0;d()}function d(){var b=r.scene.getObjectByName("atombox");b&&r.scene.remove(b);r.atombox=new s.Object3D;(b=document.getElementById("infopanel"))&&
b.parentNode.removeChild(b);r.obj3d.descr&&(b=document.createElement("div"),b.setAttribute("id","infopanel"),b.innerHTML="<span style=color:#900>a = "+r.obj3d.descr.a+" &#8491;</span><br /><span style=color:#090>b = "+r.obj3d.descr.b+" &#8491;</span><br /><span style=color:#009>c = "+r.obj3d.descr.c+" &#8491;</span><br />&#945; = "+r.obj3d.descr.alpha+"&deg;<br />&#946; = "+r.obj3d.descr.beta+"&deg;<br />&#947; = "+r.obj3d.descr.gamma+"&deg;<br />",document.body.appendChild(b));(b=document.getElementById("optionpanel"))&&
b.parentNode.removeChild(b);b=document.createElement("div");b.setAttribute("id","optionpanel");b.innerHTML="<input type=radio name=optionpanel id=optionpanel_none /><label for=optionpanel_none>none</label>";b.innerHTML+=" <input type=radio name=optionpanel id=optionpanel_S checked=checked /><label for=optionpanel_S>chemical elements</label>";b.innerHTML+=" <input type=radio name=optionpanel id=optionpanel_N /><label for=optionpanel_N>id's</label>";if(r.obj3d.overlayed)for(var d in r.obj3d.overlayed)b.innerHTML+=
" <input type=radio name=optionpanel id=optionpanel_"+d+" /><label for=optionpanel_"+d+">"+r.obj3d.overlayed[d]+"</label>";document.body.appendChild(b);b.onclick=function(b){b=b||window.event;r.current_overlay=(b.target||b.srcElement).id.replace("optionpanel_","");var d=r.scene.getObjectByName("atombox"),d=d.children,e=d.filter(function(a){return"label"==a.name}),c=e.length;for(b=0;b<c;b++)r.atombox.remove(e[b]),r.scene.remove(e[b]);if(-1!==r.available_overlays.indexOf(r.current_overlay))for(d=d.filter(function(a){return"atom"==
a.name}),c=d.length,b=0;b<c;b++)e=a(d[b].overlays[r.current_overlay]),e.position.set(d[b].position.x,d[b].position.y,d[b].position.z),r.atombox.add(e);r.renderer.render(r.scene,r.camera)};r.current_overlay="S";var e;d={w:6,h:6};b={w:10,h:8};50<r.obj3d.atoms.length?e=d:e=b;b=r.obj3d.atoms.length;for(d=0;d<b;d++){var l=parseInt(100*r.obj3d.atoms[d].x),k=parseInt(100*r.obj3d.atoms[d].y),u=parseInt(100*r.obj3d.atoms[d].z),m=new s.Mesh(new s.SphereBufferGeometry(65*r.obj3d.atoms[d].r,e.w,e.h),new s.MeshLambertMaterial({color:r.obj3d.atoms[d].c,
overdraw:.5}));m.position.set(l,k,u);m.name="atom";m.overlays=r.obj3d.atoms[d].overlays;r.atombox.add(m);m=a(m.overlays[r.current_overlay]);m.position.set(l,k,u);r.atombox.add(m)}if(r.obj3d.cell.length){var n;e=[];for(d=0;3>d;d++)b=Math.round(1E3*parseFloat(r.obj3d.cell[d][0]))/10,l=Math.round(1E3*parseFloat(r.obj3d.cell[d][1]))/10,k=Math.round(1E3*parseFloat(r.obj3d.cell[d][2]))/10,e.push([b,l,k]),0==d?n=10027008:1==d?n=39168:2==d&&(n=153),r.atombox.add(new s.ArrowHelper((new s.Vector3(b,l,k)).normalize(),
new s.Vector3(0,0,0),Math.sqrt(b*b+l*l+k*k),n,75,10));d=[e[0][0]+e[1][0],e[0][1]+e[1][1],e[0][2]+e[1][2]];b=[e[0][0]+e[2][0],e[0][1]+e[2][1],e[0][2]+e[2][2]];l=[d[0]+e[2][0],d[1]+e[2][1],d[2]+e[2][2]];k=[e[1][0]+e[2][0],e[1][1]+e[2][1],e[1][2]+e[2][2]];n=[];n.push([e[0],d]);n.push([e[0],b]);n.push([e[1],k]);n.push([e[1],d]);n.push([e[2],k]);n.push([e[2],b]);n.push([d,l]);n.push([b,l]);n.push([l,k]);b=n.length;for(d=0;d<b;d++)c(n[d][0],n[d][1])}r.atombox.name="atombox";r.scene.add(r.atombox);f()}function e(){r.loaded&&
(r.camera.aspect=window.innerWidth/window.innerHeight,r.camera.updateProjectionMatrix(),r.renderer.setSize(window.innerWidth,window.innerHeight),r.controls.handleResize(),f())}function f(){requestAnimationFrame(f);r.renderer.render(r.scene,r.camera);r.controls.update()}function l(){var a=document.location.hash.substr(1);if(-1==a.indexOf("://"))return alert("Error: not a valid url!");m(a)}function k(){if(window.parent&&window.parent.cifdata)w(window.parent.cifdata,!1);else if(window.FileReader){var a=
document.getElementById("landing");a&&a.parentNode.removeChild(a);a=document.createElement("div");a.setAttribute("id","landing");a.innerHTML="Please drag & drop a CIF file here<br>or <a href=/ id=play_demo>display example</a>.";document.body.appendChild(a);document.getElementById("play_demo").onclick=u}else u()}function u(a){a=a||window.event;a.cancelBubble?a.cancelBubble=!0:(a.stopPropagation(),a.preventDefault());w(r.sample,!1)}function A(){var a=document.location.hash.substr(1);-1!=a.indexOf("://")&&
window.open(a,"d_"+Math.random())}function m(a){var b=document.createElement("a");b.href=a;b.hostname!==window.location.hostname&&(a=r.webproxy+"?url="+a);var d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.onreadystatechange=function(){4==d.readyState&&(200==d.status?w(d.responseText,!0):(alert("Error: HTTP "+d.status+" status received during retrieving data from the server"),r.loaded||k()))};d.open("GET",a);d.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT");
d.send(1)}function w(a,e){var c=document.getElementById("dpanel");c&&(c.style.display="none");r.obj3d=h.to_player(a);if(r.obj3d){var f=document.getElementById("landing");f&&f.parentNode.removeChild(f);e&&(c?c.style.display="block":(c=document.createElement("div"),c.setAttribute("id","dpanel"),document.body.appendChild(c),c.onclick=A));r.loaded?d():b()}}function t(a){a.stopPropagation();a.preventDefault();if(1<a.dataTransfer.files.length)return alert("Error: only one file at the time may be rendered!");
a=a.dataTransfer.files[0];if(!a||!a.size)return alert("Error: file cannot be read (unaccessible?)");var b=new FileReader;b.onloadend=function(a){w(a.target.result,!1)};b.abort=function(){alert("Error: file reading has been cancelled!")};b.onerror=function(a){alert("Error: file reading has been cancelled: "+a.target.error.name)};b.readAsText(a)}function n(a){a.stopPropagation();a.preventDefault();a.dataTransfer.dropEffect="copy"}var r={version:"0.12.0",loaded:!1,container:null,stats:null,camera:null,
scene:null,renderer:null,controls:null,atombox:null,available_overlays:["S","N"],current_overlay:"S",obj3d:!1,webproxy:"proxy.php",sample:"data_global\n_cell_length_a 24\n_cell_length_b 5.91\n_cell_length_c 5.85\n_cell_angle_alpha 90\n_cell_angle_beta 90\n_cell_angle_gamma 90\n_symmetry_space_group_name_H-M 'P1'\nloop_\n_symmetry_equiv_pos_as_xyz\nx,y,z\nloop_\n_atom_site_label\n_atom_site_type_symbol\n_atom_site_fract_x\n_atom_site_fract_y\n_atom_site_fract_z\nO1 O 0.425 0.262 0.009\nO2 O -0.425 0.262 0.009\nH3 H 0.444 0.258 0.154\nH4 H -0.444 0.258 0.154\nH5 H 0.396 0.124 0.012\nH6 H -0.396 0.124 0.012\nO7 O 0.425 0.236 0.510\nO8 O -0.425 0.236 0.510\nH9 H 0.444 0.239 0.656\nH10 H -0.444 0.239 0.656\nH11 H 0.396 0.374 0.512\nH12 H -0.396 0.374 0.512\nSr13 Sr 0.342 0.964 0.467\nSr14 Sr -0.342 0.964 0.467\nSr15 Sr 0.342 0.535 0.967\nSr16 Sr -0.342 0.535 0.967\nO17 O 0.348 0.971 0.019\nO18 O -0.348 0.971 0.019\nO19 O 0.348 0.528 0.519\nO20 O -0.348 0.528 0.519\nO21 O 0.263 0.803 0.701\nO22 O -0.263 0.803 0.701\nO23 O 0.264 0.695 0.200\nO24 O -0.264 0.695 0.200\nZr25 Zr 0.261 0.000 0.998\nZr26 Zr -0.261 0.000 0.998\nZr27 Zr 0.261 0.499 0.498\nZr28 Zr -0.261 0.499 0.498\nO29 O 0.257 0.304 0.806\nO30 O -0.257 0.304 0.806\nO31 O 0.257 0.195 0.306\nO32 O -0.257 0.195 0.306\nSr33 Sr 0.173 0.993 0.524\nSr34 Sr -0.173 0.993 0.524\nSr35 Sr 0.173 0.506 0.024\nSr36 Sr -0.173 0.506 0.024\nO37 O 0.173 0.947 0.986\nO38 O -0.173 0.947 0.986\nO39 O 0.173 0.551 0.486\nO40 O -0.173 0.551 0.486\nO41 O 0.098 0.204 0.295\nO42 O -0.098 0.204 0.295\nO43 O 0.098 0.295 0.795\nO44 O -0.098 0.295 0.795\nZr45 Zr 0.086 0.004 0.998\nZr46 Zr -0.086 0.004 0.998\nZr47 Zr 0.086 0.495 0.498\nZr48 Zr -0.086 0.495 0.498\nO49 O 0.074 0.709 0.211\nO50 O -0.074 0.709 0.211\nO51 O 0.074 0.790 0.711\nO52 O -0.074 0.790 0.711\nSr53 Sr 0 0.991 0.467\nSr54 Sr 0 0.508 0.967\nO55 O 0 0.076 0.020\nO56 O 0 0.423 0.520"},
s=g.THREE||g;p(function(){window.addEventListener("resize",e,!1);window.addEventListener("hashchange",l,!1);window.FileReader&&(window.addEventListener("dragover",n,!1),window.addEventListener("drop",t,!1));document.location.hash.length?l():k()})}).apply(null,q)}()},function(P,R,F){String.prototype.startswith=function(q){return 0===this.indexOf(q)};String.prototype.endswith=function(q,h){var g=this.toString();if(void 0===h||h>g.length)h=g.length;h-=q.length;g=g.indexOf(q,h);return-1!==g&&g===h};String.prototype.trim=
function(){return this.replace(/^\s+|\s+$/g,"")};R={warning:window.alert.bind(window),error:window.alert.bind(window)};F=F(2);F=F.math||F;P.exports=function(q,h){function g(a){if(0<a.indexOf("_cell_angle_gamma ")&&0<a.indexOf("loop_"))return"CIF";a=a.toString().split("\n");return 6<a.length&&"direct"==a[6].toLowerCase().substr(0,6)?"POSCAR":"unknown"}function p(a,b,d,c,u,A){if(!(a&&b&&d&&c&&u&&A))return h.error("Error: invalid cell definition!"),!1;c=c*Math.PI/180;u=u*Math.PI/180;A=A*Math.PI/180;
var m=[0,0,1],w=[1,0,0],m=q.divide(m,q.norm(m)),w=q.subtract(w,q.multiply(q.dot(w,m),m)),w=q.divide(w,q.norm(w)),t=q.cross(m,w);a=q.multiply(a,[1,0,0]);b=q.multiply(b,[q.cos(A),q.sin(A),0]);var n=q.cos(u);c=q.divide(q.subtract(q.cos(c),q.multiply(q.cos(u),q.cos(A))),q.sin(A));u=q.sqrt(q.subtract(q.subtract(1,q.multiply(n,n)),q.multiply(c,c)));d=q.multiply(d,[n,c,u]);return q.multiply([a,b,d],[w,t,m])}function c(a){a.symops&&h.warning("Warning! Reading of symmetry operations is not yet implemented, expect errors now...");
var b;b=6==Object.keys(a.cell).length?p(a.cell.a,a.cell.b,a.cell.c,a.cell.alpha,a.cell.beta,a.cell.gamma):a.cell;var d=[],c=[],u=[],A=[],d=b[0].map(function(a,d){return b.map(function(a){return a[d]})}),c=c.concat.apply(c,d),m=0,w=a.atoms.length;if(a.types)for(m=0;m<w;m++)A.push([a.atoms[m].x,a.atoms[m].y,a.atoms[m].z]);else{for(var t=[],d={},m=0;m<w;m++)-1==Object.keys(d).indexOf(a.atoms[m].symbol)?d[a.atoms[m].symbol]=[[a.atoms[m].x,a.atoms[m].y,a.atoms[m].z]]:d[a.atoms[m].symbol].push([a.atoms[m].x,
a.atoms[m].y,a.atoms[m].z]);var m=1,n;for(n in d){for(w=0;w<d[n].length;w++)A.push(d[n][w]),t.push(m);m++}}u=u.concat.apply(u,A);A=!1;A=(a.sg_name?a.sg_name:"")+(a.ng_name?" ("+a.ng_name+")":"");return{cell:c,atoms:u,types:t||a.types,symlabel:A}}function a(a){var b=[],c=[],k=[];a=a.toString().split("\n");var u={cell:{},atoms:[]},A=!1,m=!1,w=!1,t="",t=[],m=[],n="a b c alpha beta gamma".split(" "),r=["_atom_site_label","_atom_site_type_symbol","_atom_site_fract_x","_atom_site_fract_y","_atom_site_fract_z"],
s=["label","symbol","x","y","z"],x,g=a.length;for(x=0;x<g;x++)if(!a[x].startswith("#"))if(t=a[x].toLowerCase().trim()){m=!1;if(t.startswith("data_"))m=!0,A=!1,k=[],w=!1;else if(t.startswith("_cell_")){A=!1;t=t.split(" ");m=t[0].split("_");m=m[m.length-1];-1!==n.indexOf(m)&&t[t.length-1]&&(u.cell[m]=parseFloat(t[t.length-1]));continue}else if(t.startswith("_symmetry_space_group_name_h-m")||t.startswith("_space_group.patterson_name_h-m")){A=!1;u.sg_name=a[x].substr(31).replace(/"/g,"").replace(/'/g,
"");continue}else if(t.startswith("_space_group.it_number")||t.startswith("_space_group_it_number")||t.startswith("_symmetry_int_tables_number")){A=!1;t=t.split(" ");u.ng_name=t[t.length-1];continue}else if(t.startswith("loop_")){A=!0;k=[];w=!1;continue}if(A)if(t.startswith("_symmetry_equiv")||t.startswith("_space_group"))w=!0;else if(t.startswith("_"))k.push(t);else if(w)c.push(t.replace(/"/g,"").replace(/'/g,""));else{var m={},t=t.replace(/\t/g," ").split(" ").filter(function(a){return a?!0:!1}),
h,v=k.length;for(h=0;h<v;h++){var I=r.indexOf(k[h]);-1!==I&&t[h]&&(-1!==["x","y","z"].indexOf(s[I])?t[h]=parseFloat(t[h]):t[h]=t[h].charAt(0).toUpperCase()+t[h].slice(1).toLowerCase(),m[s[I]]=t[h])}void 0!==m.x&&void 0!==m.y&&void 0!==m.z&&(!m.symbol&&m.label&&(m.symbol=m.label.replace(/[0-9]/g,"")),!d.JmolColors[m.symbol]&&2<m.symbol.length&&(m.symbol=m.symbol.substr(0,m.symbol.length-1)),!d.JmolColors[m.symbol]&&1<m.symbol.length&&(m.symbol=m.symbol.substr(0,m.symbol.length-1)),m.symbol&&u.atoms.push(m))}else m&&
u.atoms.length&&(1<c.length&&(u.symops=c),b.push(u),u={cell:{},atoms:[]},c=[])}else A=!1,k=[],w=!1;u.atoms.length&&(1<c.length&&(u.symops=c),b.push(u));return b.length?b[b.length-1]:!1}function b(a){a=a.toString().split("\n");var b=[],d=[],c=1,u=[],A=[],m=["x","y","z","symbol"],w,t=a.length,n=[],r=0;for(w=1;w<t;w++)if(1==w)c=parseFloat(a[w]);else if(-1!==[2,3,4].indexOf(w))b.push(a[w].split(" ").filter(function(a){return a?!0:!1}).map(Number));else if(5==w)for(u=a[w].split(" ").filter(function(a){return a?
!0:!1}).map(Number),n=0;n<u.length;n++)for(var s=0;s<u[n];s++)A.push(n+1);else if(6<w){s={};n=a[w].replace("#","").replace("!","").split(" ").filter(function(a){return a?!0:!1});if(!n.length)break;else if(3==n.length)n.push("Xx"+A[r]);else if(3>n.length)return h.error("Error: invalid atom definition!"),!1;for(u=0;4>u;u++)s[m[u]]=3>u?parseFloat(n[u]):n[u];s.symbol=s.symbol.replace(/\W/g,"");d.push(s);r++}b=q.multiply(b,c);return d.length?{cell:b,atoms:d,types:A}:!1}var d={JmolColors:{D:"#FFFFC0",H:"#FFFFFF",
He:"#D9FFFF",Li:"#CC80FF",Be:"#C2FF00",B:"#FFB5B5",C:"#909090",N:"#3050F8",O:"#FF0D0D",F:"#90E050",Ne:"#B3E3F5",Na:"#AB5CF2",Mg:"#8AFF00",Al:"#BFA6A6",Si:"#F0C8A0",P:"#FF8000",S:"#FFFF30",Cl:"#1FF01F",Ar:"#80D1E3",K:"#8F40D4",Ca:"#3DFF00",Sc:"#E6E6E6",Ti:"#BFC2C7",V:"#A6A6AB",Cr:"#8A99C7",Mn:"#9C7AC7",Fe:"#E06633",Co:"#F090A0",Ni:"#50D050",Cu:"#C88033",Zn:"#7D80B0",Ga:"#C28F8F",Ge:"#668F8F",As:"#BD80E3",Se:"#FFA100",Br:"#A62929",Kr:"#5CB8D1",Rb:"#702EB0",Sr:"#00FF00",Y:"#94FFFF",Zr:"#94E0E0",Nb:"#73C2C9",
Mo:"#54B5B5",Tc:"#3B9E9E",Ru:"#248F8F",Rh:"#0A7D8C",Pd:"#006985",Ag:"#C0C0C0",Cd:"#FFD98F",In:"#A67573",Sn:"#668080",Sb:"#9E63B5",Te:"#D47A00",I:"#940094",Xe:"#429EB0",Cs:"#57178F",Ba:"#00C900",La:"#70D4FF",Ce:"#FFFFC7",Pr:"#D9FFC7",Nd:"#C7FFC7",Pm:"#A3FFC7",Sm:"#8FFFC7",Eu:"#61FFC7",Gd:"#45FFC7",Tb:"#30FFC7",Dy:"#1FFFC7",Ho:"#00FF9C",Er:"#00E675",Tm:"#00D452",Yb:"#00BF38",Lu:"#00AB24",Hf:"#4DC2FF",Ta:"#4DA6FF",W:"#2194D6",Re:"#267DAB",Os:"#266696",Ir:"#175487",Pt:"#D0D0E0",Au:"#FFD123",Hg:"#B8B8D0",
Tl:"#A6544D",Pb:"#575961",Bi:"#9E4FB5",Po:"#AB5C00",At:"#754F45",Rn:"#428296",Fr:"#420066",Ra:"#007D00",Ac:"#70ABFA",Th:"#00BAFF",Pa:"#00A1FF",U:"#008FFF",Np:"#0080FF",Pu:"#006BFF",Am:"#545CF2",Cm:"#785CE3",Bk:"#8A4FE3",Cf:"#A136D4",Es:"#B31FD4",Fm:"#B31FBA",Md:"#B30DA6",No:"#BD0D87",Lr:"#C70066",Rf:"#CC0059",Db:"#D1004F",Sg:"#D90045",Bh:"#E00038",Hs:"#E6002E",Mt:"#EB0026"},AseRadii:{X:.66,H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,
Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.39,Fe:1.32,Co:1.26,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.87,Hf:1.75,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,
Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69,Bk:3,Cf:3,Es:3,Fm:3,Md:3,No:3,Lr:3,Rf:3,Db:3,Sg:3,Bh:3,Hs:3,Mt:3}};return{to_player:function(c){var f;switch(g(c)){case "CIF":f=a(c);break;case "POSCAR":f=b(c);break;default:h.error("Error: file format cannot be recognized!")}if(!f)return!1;c=f;var l=!1,k;6==Object.keys(c.cell).length?(k=p(c.cell.a,c.cell.b,c.cell.c,c.cell.alpha,c.cell.beta,c.cell.gamma),l=c.cell):k=c.cell;var u=[],A=c.atoms.length;
for(f=0;f<A;f++)u.push([c.atoms[f].x,c.atoms[f].y,c.atoms[f].z]);var u=q.multiply(u,k),l={atoms:[],cell:k,descr:l,overlayed:null},m,A=c.atoms.length;for(f=0;f<A;f++)k=d.JmolColors[c.atoms[f].symbol]?d.JmolColors[c.atoms[f].symbol]:"0xffff00",m=d.AseRadii[c.atoms[f].symbol]?d.AseRadii[c.atoms[f].symbol]:.66,l.atoms.push({x:u[f][0],y:u[f][1],z:u[f][2],c:k,r:m,overlays:{S:c.atoms[f].symbol,N:f+1}});return l},to_flatten:function(d){var f;switch(g(d)){case "CIF":f=a(d);break;case "POSCAR":f=b(d);break;
default:h.error("Error: file format cannot be recognized!")}return f?c(f):!1},version:"0.0.1"}}(F,R)},function(P,R,F){(function(q,h){P.exports=h()})(this,function(){return function(q){function h(p){if(g[p])return g[p].exports;var c=g[p]={exports:{},id:p,loaded:!1};q[p].call(c.exports,c,c.exports,h);c.loaded=!0;return c.exports}var g={};h.m=q;h.c=g;h.p="";return h(0)}([function(q,h,g){h=g(1).create();h.import(g(13));h.import(g(23));h.import(g(24));h.import(g(34));h.import(g(35));h.import(g(36));h.import(g(63));
h.import(g(53));h.import(g(67));h.import(g(69));h.import(g(70));q.exports=h},function(q,h,g){q.exports=g(2)},function(q,h,g){var p=g(3).isFactory,c=g(3).deepExtend,a=g(4),b=g(8),d=g(10),e=g(12);h.create=function(f){function l(a){if(!p(a))throw Error("Factory object with properties `type`, `name`, and `factory` expected");var b=k.indexOf(a);-1===b?(b=!0===a.math?a.factory(A.type,m,l,A.typed,A):a.factory(A.type,m,l,A.typed),k.push(a),u.push(b)):b=u[b];return b}if("function"!==typeof Object.create)throw Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");
var k=[],u=[],A=b.mixin({});A.type={};A.expression={transform:Object.create(A)};A.typed=a.create(A.type);var m={epsilon:1E-14,matrix:"matrix",number:"number",precision:64,predictable:!1};f&&c(m,f);A["import"]=l(d);A.config=l(e);return A}},function(q,h){h.clone=function p(c){var a=typeof c;if("number"===a||"string"===a||"boolean"===a||null===c||void 0===c)return c;if("function"===typeof c.clone)return c.clone();if(Array.isArray(c))return c.map(function(a){return p(a)});if(c instanceof Number)return new Number(c.valueOf());
if(c instanceof String)return new String(c.valueOf());if(c instanceof Boolean)return new Boolean(c.valueOf());if(c instanceof Date)return new Date(c.valueOf());if(c&&!0===c.isBigNumber)return c;if(c instanceof RegExp)throw new TypeError("Cannot clone "+c);var a={},b;for(b in c)c.hasOwnProperty(b)&&(a[b]=p(c[b]));return a};h.extend=function(h,c){for(var a in c)c.hasOwnProperty(a)&&(h[a]=c[a]);return h};h.deepExtend=function c(a,b){if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");
for(var d in b)if(b.hasOwnProperty(d))if(b[d]&&b[d].constructor===Object)void 0===a[d]&&(a[d]={}),a[d].constructor===Object?c(a[d],b[d]):a[d]=b[d];else{if(Array.isArray(b[d]))throw new TypeError("Arrays are not supported by deepExtend");a[d]=b[d]}return a};h.deepEqual=function(c,a){var b,d;if(Array.isArray(c)){if(!Array.isArray(a)||c.length!=a.length)return!1;b=0;for(d=c.length;b<d;b++)if(!h.deepEqual(c[b],a[b]))return!1;return!0}if(c instanceof Object){if(Array.isArray(a)||!(a instanceof Object))return!1;
for(b in c)if(!h.deepEqual(c[b],a[b]))return!1;for(b in a)if(!h.deepEqual(c[b],a[b]))return!1;return!0}return typeof c===typeof a&&c==a};h.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(c){}return!1};h.lazy=function(c,a,b){if(h.canDefineProperty()){var d=!0,e;Object.defineProperty(c,a,{get:function(){d&&(e=b(),d=!1);return e},set:function(a){e=a;d=!1},configurable:!0,enumerable:!0})}else c[a]=b()};h.traverse=function(c,a){var b=
c;if(a)for(var d=a.split("."),e=0;e<d.length;e++){var f=d[e];f in b||(b[f]={});b=b[f]}return b};h.isFactory=function(c){return c&&"function"===typeof c.factory}},function(q,h,g){var p=g(5),c=g(6).digits,a=function(){a=p.create;return p};h.create=function(b){var d=a();d.types=[{name:"number",test:function(a){return"number"===typeof a}},{name:"Complex",test:function(a){return a&&a.isComplex}},{name:"BigNumber",test:function(a){return a&&a.isBigNumber}},{name:"Fraction",test:function(a){return a&&a.isFraction}},
{name:"Unit",test:function(a){return a&&a.isUnit}},{name:"string",test:function(a){return"string"===typeof a}},{name:"Array",test:Array.isArray},{name:"Matrix",test:function(a){return a&&a.isMatrix}},{name:"DenseMatrix",test:function(a){return a&&a.isDenseMatrix}},{name:"SparseMatrix",test:function(a){return a&&a.isSparseMatrix}},{name:"ImmutableDenseMatrix",test:function(a){return a&&a.isImmutableDenseMatrix}},{name:"Range",test:function(a){return a&&a.isRange}},{name:"Index",test:function(a){return a&&
a.isIndex}},{name:"boolean",test:function(a){return"boolean"===typeof a}},{name:"ResultSet",test:function(a){return a&&a.isResultSet}},{name:"Help",test:function(a){return a&&a.isHelp}},{name:"function",test:function(a){return"function"===typeof a}},{name:"Date",test:function(a){return a instanceof Date}},{name:"RegExp",test:function(a){return a instanceof RegExp}},{name:"Object",test:function(a){return"object"===typeof a}},{name:"null",test:function(a){return null===a}},{name:"undefined",test:function(a){return void 0===
a}}];d.conversions=[{from:"number",to:"BigNumber",convert:function(a){if(15<c(a))throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+a+"). Use function bignumber(x) to convert to BigNumber.");return new b.BigNumber(a)}},{from:"number",to:"Complex",convert:function(a){return new b.Complex(a,0)}},{from:"number",to:"string",convert:function(a){return a+""}},{from:"BigNumber",to:"Complex",convert:function(a){return new b.Complex(a.toNumber(),0)}},
{from:"number",to:"Fraction",convert:function(a){if(15<c(a))throw new TypeError("Cannot implicitly convert a number with >15 significant digits to Fraction (value: "+a+"). Use function fraction(x) to convert to Fraction.");return new b.Fraction(a)}},{from:"string",to:"number",convert:function(a){var b=Number(a);if(isNaN(b))throw Error('Cannot convert "'+a+'" to a number');return b}},{from:"boolean",to:"number",convert:function(a){return+a}},{from:"boolean",to:"BigNumber",convert:function(a){return new b.BigNumber(+a)}},
{from:"boolean",to:"string",convert:function(a){return+a}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new b.BigNumber(0)}},{from:"Array",to:"Matrix",convert:function(a){return new b.DenseMatrix(a)}},{from:"Matrix",to:"Array",convert:function(a){return a.valueOf()}}];return d}},function(q,h,g){var p,c,a;"use strict";(function(b){!(c=[],p=b,a="function"===typeof p?p.apply(h,c):
p,void 0!==a&&(q.exports=a))})(function(){function a(){function d(a){for(var b,d=0;d<p.types.length;d++){var c=p.types[d];if(c.name===a){b=c.test;break}}if(!b){for(var e,d=0;d<p.types.length;d++)if(c=p.types[d],c.name.toLowerCase()==a.toLowerCase()){e=c.name;break}throw Error('Unknown type "'+a+'"'+(e?'. Did you mean "'+e+'"?':""));}return b}function c(a){for(var b="",d=0;d<a.length;d++){var e=a[d];if(""!=e.name)if(""==b)b=e.name;else if(b!=e.name)throw a=Error("Function names do not match (expected: "+
b+", actual: "+e.name+")"),a.data={actual:e.name,expected:b},a;}return b}function f(a,b,d,c,e){var f=n(c);e=e?e.split(","):null;var l=a||"unnamed",k=e&&-1!==e.indexOf("any");a={fn:a,index:d,actual:c,expected:e};b=e?b>d&&!k?"Unexpected type of argument in function "+l+" (expected: "+e.join(" or ")+", actual: "+f+", index: "+d+")":"Too few arguments in function "+l+" (expected: "+e.join(" or ")+", index: "+d+")":"Too many arguments in function "+l+" (expected: "+d+", actual: "+b+")";b=new TypeError(b);
b.data=a;return b}function l(a){this.name=a||"refs";this.categories={}}function k(a,b){if("string"===typeof a){var d=a.trim(),c="..."===d.substr(0,3);c&&(d=d.substr(3));if(""===d)this.types=["any"];else for(this.types=d.split("|"),d=0;d<this.types.length;d++)this.types[d]=this.types[d].trim()}else if(Array.isArray(a))this.types=a;else{if(a instanceof k)return a.clone();throw Error("String or Array expected");}this.conversions=[];this.varArgs=c||b||!1;this.anyType=-1!==this.types.indexOf("any")}function u(a,
b){var d;if("string"===typeof a)d=""!==a?a.split(","):[];else if(Array.isArray(a))d=a;else throw Error("string or Array expected");this.params=Array(d.length);for(var c=0;c<d.length;c++){var e=new k(d[c]);this.params[c]=e;if(c===d.length-1)this.varArgs=e.varArgs;else if(e.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."');}this.fn=b}function A(a,b,d){this.path=a||[];this.param=a[a.length-1]||null;this.signature=b||null;this.childs=d||[]}function m(a){var b,d={},c=[],e,f;
for(f in a)if(a.hasOwnProperty(f)&&(b=new u(f,a[f]),!b.ignore()))for(b=b.expand(),e=0;e<b.length;e++){var l=b[e],k=l.toString(),m=d[k];if(m)if(m=u.compare(l,m),0>m)d[k]=l;else{if(0===m)throw Error('Signature "'+k+'" is defined twice');}else d[k]=l}for(k in d)d.hasOwnProperty(k)&&c.push(d[k]);c.sort(function(a,b){return u.compare(a,b)});for(e=0;e<c.length;e++)if(b=c[e],b.varArgs)for(a=b.params.length-1,d=b.params[a],f=0;f<d.types.length;){if(d.conversions[f])for(k=d.types[f],l=0;l<c.length;l++){var m=
c[l],n=m.params[a];if(m!==b&&n&&-1!==n.types.indexOf(k)&&!n.conversions[a]){d.types.splice(f,1);d.conversions.splice(f,1);f--;break}}f++}return c}function w(a,b){var d,c,e=b.length,f,l=[];for(d=0;d<a.length;d++)c=a[d],c.params.length!==e||f||(f=c),void 0!=c.params[e]&&l.push(c);l.sort(function(a,b){return k.compare(a.params[e],b.params[e])});var u=[];for(d=0;d<l.length;d++){c=l[d];var m=c.params[e],n=u.filter(function(a){return a.param.overlapping(m)})[0];if(n){if(n.param.varArgs)throw Error('Conflicting types "'+
n.param+'" and "'+m+'"');n.signatures.push(c)}else u.push({param:m,signatures:[c]})}c=Array(u.length);for(d=0;d<u.length;d++)l=u[d],c[d]=w(l.signatures,b.concat(l.param));return new A(b,f,c)}function t(a,b){var d=new l,c=m(b);if(0==c.length)throw Error("No signatures provided");for(var e=w(c,[]),k=[],u=a||"",n=0,A=0;A<c.length;A++){var t=c[A].params.length;t>n&&(n=t)}A=[];for(t=0;t<n;t++)A[t]="arg"+t;k.push("function "+u+"("+A.join(", ")+") {");k.push('  "use strict";');k.push("  var name = '"+u+
"';");k.push(e.toCode(d,"  "));k.push("}");e=[d.toCode(),"return "+k.join("\n")].join("\n");d=(new Function(d.name,"createError",e))(d,f);e={};for(k=0;k<c.length;k++)u=c[k],u.fn&&!u.hasConversions()&&(n=u.params.join(","),e[n]=u.fn);d.signatures=e;return d}function n(a){for(var b,d=0;d<p.types.length;d++){var c=p.types[d];if("Object"===c.name)b=c;else if(c.test(a))return c.name}return b&&b.test(a)?b.name:"unknown"}l.prototype.add=function(a,b){var d=b||"fn";this.categories[d]||(this.categories[d]=
[]);var c=this.categories[d].indexOf(a);-1==c&&(c=this.categories[d].length,this.categories[d].push(a));return d+c};l.prototype.toCode=function(){var a=[],b=this.name+".categories",d=this.categories,c;for(c in d)if(d.hasOwnProperty(c))for(var e=d[c],f=0;f<e.length;f++)a.push("var "+c+f+" = "+b+"['"+c+"']["+f+"];");return a.join("\n")};k.compare=function(a,b){if(a.anyType)return 1;if(b.anyType)return-1;if(-1!==a.types.indexOf("Object"))return 1;if(-1!==b.types.indexOf("Object"))return-1;if(a.hasConversions()){if(b.hasConversions()){var d,
c,e;for(d=0;d<a.conversions.length;d++)if(void 0!==a.conversions[d]){c=a.conversions[d];break}for(d=0;d<b.conversions.length;d++)if(void 0!==b.conversions[d]){e=b.conversions[d];break}return p.conversions.indexOf(c)-p.conversions.indexOf(e)}return 1}if(b.hasConversions())return-1;var f,l;for(d=0;d<p.types.length;d++)if(p.types[d].name===a.types[0]){f=d;break}for(d=0;d<p.types.length;d++)if(p.types[d].name===b.types[0]){l=d;break}return f-l};k.prototype.overlapping=function(a){for(var b=0;b<this.types.length;b++)if(-1!==
a.types.indexOf(this.types[b]))return!0;return!1};k.prototype.clone=function(){var a=new k(this.types.slice(),this.varArgs);a.conversions=this.conversions.slice();return a};k.prototype.hasConversions=function(){return 0<this.conversions.length};k.prototype.contains=function(a){for(var b=0;b<this.types.length;b++)if(a[this.types[b]])return!0;return!1};k.prototype.toString=function(a){for(var b=[],d={},c=0;c<this.types.length;c++){var e=this.conversions[c],e=a&&e?e.to:this.types[c];e in d||(d[e]=!0,
b.push(e))}return(this.varArgs?"...":"")+b.join("|")};u.prototype.clone=function(){return new u(this.params.slice(),this.fn)};u.prototype.expand=function(){function a(d,c){if(c.length<d.params.length){var e,f,l,m=d.params[c.length];if(m.varArgs){f=m.clone();for(e=0;e<p.conversions.length;e++)if(l=p.conversions[e],-1===m.types.indexOf(l.from)&&-1!==m.types.indexOf(l.to)){var n=f.types.length;f.types[n]=l.from;f.conversions[n]=l}a(d,c.concat(f))}else{for(e=0;e<m.types.length;e++)a(d,c.concat(new k(m.types[e])));
for(e=0;e<p.conversions.length;e++)l=p.conversions[e],-1===m.types.indexOf(l.from)&&-1!==m.types.indexOf(l.to)&&(f=new k(l.from),f.conversions[0]=l,a(d,c.concat(f)))}}else b.push(new u(c,d.fn))}var b=[];a(this,[]);return b};u.compare=function(a,b){if(a.params.length>b.params.length)return 1;if(a.params.length<b.params.length)return-1;var d,c=a.params.length,e=0,f=0;for(d=0;d<c;d++)a.params[d].hasConversions()&&e++,b.params[d].hasConversions()&&f++;if(e>f)return 1;if(e<f)return-1;for(d=0;d<a.params.length;d++)if(c=
k.compare(a.params[d],b.params[d]),0!==c)return c;return 0};u.prototype.hasConversions=function(){for(var a=0;a<this.params.length;a++)if(this.params[a].hasConversions())return!0;return!1};u.prototype.ignore=function(){for(var a={},b=0;b<p.ignore.length;b++)a[p.ignore[b]]=!0;for(b=0;b<this.params.length;b++)if(this.params[b].contains(a))return!0;return!1};u.prototype.toCode=function(a,b){for(var d=Array(this.params.length),c=0;c<this.params.length;c++){var e=this.params[c],f=e.conversions[0];d[c]=
e.varArgs?"varArgs":f?a.add(f.convert,"convert")+"(arg"+c+")":"arg"+c}return(c=this.fn?a.add(this.fn,"signature"):void 0)?b+"return "+c+"("+d.join(", ")+"); // signature: "+this.params.join(", "):""};u.prototype.toString=function(){return this.params.join(", ")};A.prototype.toCode=function(a,b,c){var e=[];if(this.param){var f=this.path.length-1,l=this.param.conversions[0],l="// type: "+(l?l.from+" (convert to "+l.to+")":this.param);if(this.param.varArgs){if(this.param.anyType)e.push(b+"if (arguments.length > "+
f+") {"),e.push(b+"  var varArgs = [];"),e.push(b+"  for (var i = "+f+"; i < arguments.length; i++) {"),e.push(b+"    varArgs.push(arguments[i]);");else{var k=function(b,c){for(var e=[],f=0;f<b.length;f++)e[f]=a.add(d(b[f]),"test")+"("+c+")";return e.join(" || ")}.bind(this);c=this.param.types;for(var u=[],m=0;m<c.length;m++)void 0===this.param.conversions[m]&&u.push(c[m]);e.push(b+"if ("+k(c,"arg"+f)+") { "+l);e.push(b+"  var varArgs = [arg"+f+"];");e.push(b+"  for (var i = "+(f+1)+"; i < arguments.length; i++) {");
e.push(b+"    if ("+k(u,"arguments[i]")+") {");e.push(b+"      varArgs.push(arguments[i]);");for(m=0;m<c.length;m++)if(f=this.param.conversions[m])k=a.add(d(c[m]),"test"),f=a.add(f.convert,"convert"),e.push(b+"    }"),e.push(b+"    else if ("+k+"(arguments[i])) {"),e.push(b+"      varArgs.push("+f+"(arguments[i]));");e.push(b+"    } else {");e.push(b+"      throw createError(name, arguments.length, i, arguments[i], '"+u.join(",")+"');");e.push(b+"    }")}e.push(b+"  }");e.push(this.signature.toCode(a,
b+"  "));e.push(b+"}")}else this.param.anyType?(e.push(b+"// type: any"),e.push(this._innerCode(a,b,c))):(u=this.param.types[0],k="any"!==u?a.add(d(u),"test"):null,e.push(b+"if ("+k+"(arg"+f+")) { "+l),e.push(this._innerCode(a,b+"  ",c)),e.push(b+"}"))}else e.push(this._innerCode(a,b,c));return e.join("\n")};A.prototype._innerCode=function(a,b,d){var c=[],e;this.signature&&(c.push(b+"if (arguments.length === "+this.path.length+") {"),c.push(this.signature.toCode(a,b+"  ")),c.push(b+"}"));var f;for(e=
0;e<this.childs.length;e++)if(this.childs[e].param.anyType){f=this.childs[e];break}for(e=0;e<this.childs.length;e++)c.push(this.childs[e].toCode(a,b,f));d&&!this.param.anyType&&c.push(d.toCode(a,b,f));(a=this._exceptions(a,b))&&c.push(a);return c.join("\n")};A.prototype._exceptions=function(a,b){var d=this.path.length;if(0===this.childs.length)return[b+"if (arguments.length > "+d+") {",b+"  throw createError(name, arguments.length, "+d+", arguments["+d+"]);",b+"}"].join("\n");for(var c={},e=[],f=
0;f<this.childs.length;f++){var l=this.childs[f];if(l.param)for(var k=0;k<l.param.types.length;k++){var u=l.param.types[k];u in c||l.param.conversions[k]||(c[u]=!0,e.push(u))}}return b+"throw createError(name, arguments.length, "+d+", arguments["+d+"], '"+e.join(",")+"');"};var r=[{name:"number",test:function(a){return"number"===typeof a}},{name:"string",test:function(a){return"string"===typeof a}},{name:"boolean",test:function(a){return"boolean"===typeof a}},{name:"Function",test:function(a){return"function"===
typeof a}},{name:"Array",test:Array.isArray},{name:"Date",test:function(a){return a instanceof Date}},{name:"RegExp",test:function(a){return a instanceof RegExp}},{name:"Object",test:function(a){return"object"===typeof a}},{name:"null",test:function(a){return null===a}},{name:"undefined",test:function(a){return void 0===a}}],s={},g=[],h=[],p={config:s,types:r,conversions:g,ignore:h},p=t("typed",{Object:function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(a[d]);b=c(b);return t(b,a)},"string, Object":t,
"...Function":function(a){for(var b=c(a),d={},f=0;f<a.length;f++){var l=a[f];if("object"!==typeof l.signatures)throw a=new TypeError("Function is no typed-function (index: "+f+")"),a.data={index:f},a;for(var k in l.signatures)if(l.signatures.hasOwnProperty(k))if(d.hasOwnProperty(k)){if(l.signatures[k]!==d[k])throw a=Error('Signature "'+k+'" is defined twice'),a.data={signature:k},a;}else d[k]=l.signatures[k]}return t(b,d)}});p.config=s;p.types=r;p.conversions=g;p.ignore=h;p.create=a;p.find=function(a,
b){if(!a.signatures)throw new TypeError("Function is no typed-function");var d;if("string"===typeof b){d=b.split(",");for(var c=0;c<d.length;c++)d[c]=d[c].trim()}else if(Array.isArray(b))d=b;else throw new TypeError("String array or a comma separated string expected");c=d.join(",");if(c=a.signatures[c])return c;throw new TypeError("Signature not found (signature: "+(a.name||"unnamed")+"("+d.join(", ")+"))");};p.convert=function(a,b){var d=n(a);if(b===d)return a;for(var c=0;c<p.conversions.length;c++){var e=
p.conversions[c];if(e.from===d&&e.to===b)return e.convert(a)}throw Error("Cannot convert from "+d+" to "+b);};p.addType=function(a){if(!a||"string"!==typeof a.name||"function"!==typeof a.test)throw new TypeError("Object with properties {name: string, test: function} expected");p.types.push(a)};p.addConversion=function(a){if(!a||"string"!==typeof a.from||"string"!==typeof a.to||"function"!==typeof a.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");
p.conversions.push(a)};return p}return a()})},function(q,h,g){var p=g(7);h.isNumber=function(c){return"number"===typeof c};h.isInteger=function(c){return isFinite(c)?c==Math.round(c):!1};h.sign=function(c){return 0<c?1:0>c?-1:0};h.format=function(c,a){if("function"===typeof a)return a(c);if(Infinity===c)return"Infinity";if(-Infinity===c)return"-Infinity";if(isNaN(c))return"NaN";var b="auto",d=void 0;a&&(a.notation&&(b=a.notation),h.isNumber(a)?d=a:a.precision&&(d=a.precision));switch(b){case "fixed":return h.toFixed(c,
d);case "exponential":return h.toExponential(c,d);case "auto":return h.toPrecision(c,d,a&&a.exponential).replace(/((\.\d*?)(0+))($|e)/,function(a,b,d,c,u){return"."!==d?d+u:u});default:throw Error('Unknown notation "'+b+'". Choose "auto", "exponential", or "fixed".');}};h.toExponential=function(c,a){return(new p(c)).toExponential(a)};h.toFixed=function(c,a){return(new p(c)).toFixed(a)};h.toPrecision=function(c,a,b){return(new p(c)).toPrecision(a,b)};h.digits=function(c){return c.toExponential().replace(/e.*$/,
"").replace(/^0\.?0*|\./,"").length};h.DBL_EPSILON=Number.EPSILON||2.220446049250313E-16;h.nearlyEqual=function(c,a,b){if(null==b)return c==a;if(c==a)return!0;if(isNaN(c)||isNaN(a))return!1;if(isFinite(c)&&isFinite(a)){var d=Math.abs(c-a);return d<h.DBL_EPSILON?!0:d<=Math.max(Math.abs(c),Math.abs(a))*b}return!1}},function(q,h){function g(c){var a=String(c).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!a)throw new SyntaxError("Invalid number");c=a[1];var b=a[2],d=parseFloat(a[4]||"0"),
a=b.indexOf("."),d=d+(-1!==a?a-1:b.length-1);this.sign=c;this.coefficients=b.replace(".","").replace(/^0*/,function(a){d-=a.length;return""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});0===this.coefficients.length&&(this.coefficients.push(0),d++);this.exponent=d}function p(c){for(var a=[],b=0;b<c;b++)a.push(0);return a}g.prototype.toFixed=function(c){var a=this.roundDigits(this.exponent+1+(c||0)),b=a.coefficients,a=a.exponent+1,d=a+(c||0);b.length<d&&(b=b.concat(p(d-b.length)));
0>a&&(b=p(-a+1).concat(b),a=1);c&&b.splice(a,0,0===a?"0.":".");return this.sign+b.join("")};g.prototype.toExponential=function(c){var a=c?this.roundDigits(c):this.clone(),b=a.coefficients,a=a.exponent;b.length<c&&(b=b.concat(p(c-b.length)));c=b.shift();return this.sign+c+(0<b.length?"."+b.join(""):"")+"e"+(0<=a?"+":"")+a};g.prototype.toPrecision=function(c,a){var b=a&&void 0!==a.lower?a.lower:.001,d=a&&void 0!==a.upper?a.upper:1E5,e=Math.abs(Math.pow(10,this.exponent));if(e<b||e>=d)return this.toExponential(c);
d=c?this.roundDigits(c):this.clone();b=d.coefficients;d=d.exponent;b.length<c&&(b=b.concat(p(c-b.length)));b=b.concat(p(d-b.length+1+(b.length<c?c-b.length:0)));b=p(-d).concat(b);d=0<d?d:0;d<b.length-1&&b.splice(d+1,0,".");return this.sign+b.join("")};g.prototype.clone=function(){var c=new g("0");c.sign=this.sign;c.coefficients=this.coefficients.slice(0);c.exponent=this.exponent;return c};g.prototype.roundDigits=function(c){for(var a=this.clone(),b=a.coefficients;0>=c;)b.unshift(0),a.exponent++,c++;
if(b.length>c&&5<=b.splice(c)[0])for(c-=1,b[c]++;10===b[c];)b.pop(),0===c&&(b.unshift(0),a.exponent++,c++),c--,b[c]++;return a};q.exports=g},function(q,h,g){var p=g(9);h.mixin=function(c){var a=new p;c.on=a.on.bind(a);c.off=a.off.bind(a);c.once=a.once.bind(a);c.emit=a.emit.bind(a);return c}},function(q,h){function g(){}g.prototype={on:function(g,c,a){var b=this.e||(this.e={});(b[g]||(b[g]=[])).push({fn:c,ctx:a});return this},once:function(g,c,a){function b(){d.off(g,b);c.apply(a,arguments)}var d=
this;b._=c;return this.on(g,b,a)},emit:function(g){var c=[].slice.call(arguments,1),a=((this.e||(this.e={}))[g]||[]).slice(),b=0,d=a.length;for(b;b<d;b++)a[b].fn.apply(a[b].ctx,c);return this},off:function(g,c){var a=this.e||(this.e={}),b=a[g],d=[];if(b&&c)for(var e=0,f=b.length;e<f;e++)b[e].fn!==c&&b[e].fn._!==c&&d.push(b[e]);d.length?a[g]=d:delete a[g];return this}};q.exports=g},function(q,h,g){var p=g(3).lazy,c=g(3).isFactory,a=g(3).traverse;g(3);var b=g(11);h.math=!0;h.name="import";h.factory=
function(d,e,f,l,k){function u(a,d){var e=arguments.length;if(1!=e&&2!=e)throw new b("import",e,1,2);d||(d={});if(c(a))t(a,d);else if(Array.isArray(a))a.forEach(function(a){u(a,d)});else if("object"===typeof a)for(var f in a)a.hasOwnProperty(f)&&(e=a[f],"function"==typeof e||"number"===typeof e||"string"===typeof e||"boolean"===typeof e||null===e||e&&!0===e.isUnit||e&&!0===e.isComplex?A(f,e,d):c(a)?t(a,d):u(e,d));else if(!d.silent)throw new TypeError("Factory, Object, or Array expected");}function A(a,
b,d){d.wrap&&"function"===typeof b&&(b=w(b));if(n(k[a])&&n(b))b=d.override?l(a,b.signatures):l(k[a],b),k[a]=b,m(a,b),k.emit("import",a,function(){return b});else if(void 0===k[a]||d.override)k[a]=b,m(a,b),k.emit("import",a,function(){return b});else if(!d.silent)throw Error('Cannot import "'+a+'": already exists');}function m(a,b){b&&"function"===typeof b.transform&&(k.expression.transform[a]=b.transform)}function w(a){var b=function(){for(var b=[],d=0,c=arguments.length;d<c;d++){var e=arguments[d];
b[d]=e&&e.valueOf()}return a.apply(k,b)};a.transform&&(b.transform=a.transform);return b}function t(b,d){if("string"===typeof b.name){var c=b.name,e=b.path?a(k,b.path):k,u=e.hasOwnProperty(c)?e[c]:void 0,m=function(){var a=f(b);if(n(u)&&n(a))return d.override||(a=l(u,a)),a;if(void 0===u||d.override)return a;if(!d.silent)throw Error('Cannot import "'+c+'": already exists');};!1!==b.lazy?p(e,c,m):e[c]=m();k.emit("import",c,m,b.path)}else f(b)}function n(a){return"function"===typeof a&&"object"===typeof a.signatures}
return u};h.lazy=!0},function(q,h){function g(h,c,a,b){if(!(this instanceof g))throw new SyntaxError("Constructor must be called with the new operator");this.fn=h;this.count=c;this.min=a;this.max=b;this.message="Wrong number of arguments in function "+h+" ("+c+" provided, "+a+(void 0!=b?"-"+b:"")+" expected)";this.stack=Error().stack}g.prototype=Error();g.prototype.constructor=Error;g.prototype.name="ArgumentsError";g.prototype.isArgumentsError=!0;q.exports=g},function(q,h,g){var p=g(3);h.name="config";
h.math=!0;h.factory=function(c,a,b,d,e){return function(b){if(b){var d=p.clone(a);p.deepExtend(a,b);b=p.clone(a);e.emit("config",b,d);return b}return p.clone(a)}}},function(q,h,g){var p=g(14).string.isString;h.name="Matrix";h.path="type";h.factory=function(c,a,b,d){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");}e.prototype.type="Matrix";e.prototype.isMatrix=!0;e.storage=function(a){if(!p(a))throw new TypeError("format must be a string value");
var b=e._storage[a];if(!b)throw new SyntaxError("Unsupported matrix storage format: "+a);return b};e._storage={};e.prototype.storage=function(){throw Error("Cannot invoke storage on a Matrix interface");};e.prototype.datatype=function(){throw Error("Cannot invoke datatype on a Matrix interface");};e.prototype.create=function(a,b){throw Error("Cannot invoke create on a Matrix interface");};e.prototype.subset=function(a,b,d){throw Error("Cannot invoke subset on a Matrix interface");};e.prototype.get=
function(a){throw Error("Cannot invoke get on a Matrix interface");};e.prototype.set=function(a,b,d){throw Error("Cannot invoke set on a Matrix interface");};e.prototype.resize=function(a,b){throw Error("Cannot invoke resize on a Matrix interface");};e.prototype.clone=function(){throw Error("Cannot invoke clone on a Matrix interface");};e.prototype.size=function(){throw Error("Cannot invoke size on a Matrix interface");};e.prototype.map=function(a,b){throw Error("Cannot invoke map on a Matrix interface");
};e.prototype.forEach=function(a){throw Error("Cannot invoke forEach on a Matrix interface");};e.prototype.toArray=function(){throw Error("Cannot invoke toArray on a Matrix interface");};e.prototype.valueOf=function(){throw Error("Cannot invoke valueOf on a Matrix interface");};e.prototype.format=function(a){throw Error("Cannot invoke format on a Matrix interface");};e.prototype.toString=function(){throw Error("Cannot invoke toString on a Matrix interface");};return e}},function(q,h,g){h.array=g(15);
h["boolean"]=g(21);h["function"]=g(22);h.number=g(6);h.object=g(3);h.string=g(16);h.types=g(18);h.emitter=g(8)},function(q,h,g){function p(a,b,d){var c=a.length;if(c!=b[d])throw new l(c,b[d]);if(d<b.length-1){var e=d+1;for(d=0;d<c;d++){if(!Array.isArray(a[d]))throw new l(b.length-1,b.length,"<");p(a[d],b,e)}}else for(d=0;d<c;d++)if(Array.isArray(a[d]))throw new l(b.length+1,b.length,">");}function c(a,b,d,e){var l,k=b[d],g=Math.min(a.length,k);a.length=k;if(d<b.length-1){var s=d+1;for(d=0;d<g;d++)l=
a[d],Array.isArray(l)||(l=[l],a[d]=l),c(l,b,s,e);for(d=g;d<k;d++)l=[],a[d]=l,c(l,b,s,e)}else{for(d=0;d<g;d++)for(;Array.isArray(a[d]);)a[d]=a[d][0];if(e!==h.UNINITIALIZED)for(d=g;d<k;d++)a[d]=f.clone(e)}}function a(b,d,c){var e;if(c<d){var f=c+1;c=0;for(e=b.length;c<e;c++)b[c]=a(b[c],d,f)}else for(;Array.isArray(b);)b=b[0];return b}function b(a,d,c){var e;if(Array.isArray(a)){var f=c+1;c=0;for(e=a.length;c<e;c++)a[c]=b(a[c],d,f)}else for(;c<d;c++)a=[a];return a}var d=g(6),e=g(16),f=g(3);g(18);var l=
g(19),k=g(20);h.size=function(a){for(var b=[];Array.isArray(a);)b.push(a.length),a=a[0];return b};h.validate=function(a,b){if(0==b.length){if(Array.isArray(a))throw new l(a.length,0);}else p(a,b,0)};h.validateIndex=function(a,b){if(!d.isNumber(a)||!d.isInteger(a))throw new TypeError("Index must be an integer (value: "+a+")");if(0>a)throw new k(a);if(void 0!==b&&a>=b)throw new k(a,b);};h.UNINITIALIZED={};h.resize=function(a,b,f){if(!Array.isArray(a)||!Array.isArray(b))throw new TypeError("Array expected");
if(0===b.length)throw Error("Resizing to scalar is not supported");b.forEach(function(a){if(!d.isNumber(a)||!d.isInteger(a)||0>a)throw new TypeError("Invalid size, must contain positive integers (size: "+e.format(b)+")");});c(a,b,0,void 0!==f?f:0);return a};h.squeeze=function(b,d){for(var c=d||h.size(b);Array.isArray(b)&&1===b.length;)b=b[0],c.shift();for(var e=c.length;1===c[e-1];)e--;e<c.length&&(b=a(b,e,0),c.length=e);return b};h.unsqueeze=function(a,d,c,e){e=e||h.size(a);if(c)for(var f=0;f<c;f++)a=
[a],e.unshift(1);for(a=b(a,d,0);e.length<d;)e.push(1);return a};h.flatten=function(a){if(!Array.isArray(a))return a;var b=[];a.forEach(function w(a){Array.isArray(a)?a.forEach(w):b.push(a)});return b};h.isArray=Array.isArray},function(q,h,g){function p(a,d){if(Array.isArray(a)){for(var c="[",f=a.length,l=0;l<f;l++)0!=l&&(c+=", "),c+=p(a[l],d);return c+"]"}return h.format(a,d)}var c=g(6).format,a=g(17).format;h.isString=function(a){return"string"===typeof a};h.endsWith=function(a,d){return a.substring(a.length-
d.length,a.length)===d};h.format=function(b,d){return"number"===typeof b?c(b,d):b&&!0===b.isBigNumber?a(b,d):b&&!0===b.isFraction?d&&"decimal"===d.fraction?b.toString():b.s*b.n+"/"+b.d:Array.isArray(b)?p(b,d):h.isString(b)?'"'+b+'"':"function"===typeof b?b.syntax?b.syntax+"":"function":"object"===typeof b?"function"===typeof b.format?b.format(d):b.toString():String(b)}},function(q,h){h.format=function(g,p){if("function"===typeof p)return p(g);if(!g.isFinite())return g.isNaN()?"NaN":g.gt(0)?"Infinity":
"-Infinity";var c="auto",a=void 0;void 0!==p&&(p.notation&&(c=p.notation),"number"===typeof p?a=p:p.precision&&(a=p.precision));switch(c){case "fixed":return h.toFixed(g,a);case "exponential":return h.toExponential(g,a);case "auto":var c=.001,b=1E5;p&&p.exponential&&(void 0!==p.exponential.lower&&(c=p.exponential.lower),void 0!==p.exponential.upper&&(b=p.exponential.upper));g.constructor.config({toExpNeg:Math.round(Math.log(c)/Math.LN10),toExpPos:Math.round(Math.log(b)/Math.LN10)});if(g.isZero())return"0";
var d=g.abs();return(d.gte(c)&&d.lt(b)?g.toSignificantDigits(a).toFixed():h.toExponential(g,a)).replace(/((\.\d*?)(0+))($|e)/,function(a,b,d,c,u){return"."!==d?d+u:u});default:throw Error('Unknown notation "'+c+'". Choose "auto", "exponential", or "fixed".');}};h.toExponential=function(g,h){return void 0!==h?g.toExponential(h-1):g.toExponential()};h.toFixed=function(g,h){return g.toFixed(h||0)}},function(q,h){h.type=function(g){var h=typeof g;return"object"===h?null===g?"null":g instanceof Boolean?
"boolean":g instanceof Number?"number":g instanceof String?"string":Array.isArray(g)?"Array":g instanceof Date?"Date":g instanceof RegExp?"RegExp":"Object":"function"===h?"Function":h}},function(q,h){function g(h,c,a){if(!(this instanceof g))throw new SyntaxError("Constructor must be called with the new operator");this.actual=h;this.expected=c;this.relation=a;this.message="Dimension mismatch ("+(Array.isArray(h)?"["+h.join(", ")+"]":h)+" "+(this.relation||"!=")+" "+(Array.isArray(c)?"["+c.join(", ")+
"]":c)+")";this.stack=Error().stack}g.prototype=new RangeError;g.prototype.constructor=RangeError;g.prototype.name="DimensionError";g.prototype.isDimensionError=!0;q.exports=g},function(q,h){function g(h,c,a){if(!(this instanceof g))throw new SyntaxError("Constructor must be called with the new operator");this.index=h;3>arguments.length?(this.min=0,this.max=c):(this.min=c,this.max=a);this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==
this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")";this.stack=Error().stack}g.prototype=new RangeError;g.prototype.constructor=RangeError;g.prototype.name="IndexError";g.prototype.isIndexError=!0;q.exports=g},function(q,h){h.isBoolean=function(g){return"boolean"==typeof g}},function(q,h){h.memoize=function(g,h){return function a(){"object"!==typeof a.cache&&(a.cache={});for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];
d=h?h(b):JSON.stringify(b);return d in a.cache?a.cache[d]:a.cache[d]=g.apply(g,b)}}},function(q,h,g){var p=g(14),c=g(19),a=p.string,b=p.array,d=p.object;q=p.number;var e=Array.isArray,f=q.isNumber,l=q.isInteger,k=a.isString,u=b.validateIndex;h.name="DenseMatrix";h.path="type";h.factory=function(A,m,w,t){function n(a,c){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(c&&!k(c))throw Error("Invalid datatype: "+c);if(a&&!0===a.isMatrix)"DenseMatrix"===
a.type?(this._data=d.clone(a._data),this._size=d.clone(a._size)):(this._data=a.toArray(),this._size=a.size()),this._datatype=c||a._datatype;else if(a&&e(a.data)&&e(a.size))this._data=a.data,this._size=a.size,this._datatype=c||a.datatype;else{if(e(a))this._data=z(a),this._size=b.size(this._data),b.validate(this._data,this._size);else{if(a)throw new TypeError("Unsupported type of data ("+p.types.type(a)+")");this._data=[];this._size=[0]}this._datatype=c}}function r(a,b,d,c){var e=c==d-1,f=b.dimension(c);
return e?f.map(function(b){return a[b]}).valueOf():f.map(function(e){return r(a[e],b,d,c+1)}).valueOf()}function s(a,e,f,l){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var k=e.size(),u=e.isScalar(),n;f&&!0===f.isMatrix?(n=f.size(),f=f.valueOf()):n=b.size(f);if(u){if(0!==n.length)throw new TypeError("Scalar expected");a.set(e.min(),f,l)}else{if(k.length<a._size.length)throw new c(k.length,a._size.length,"<");if(n.length<k.length){for(var m=u=0;1===k[u]&&1===n[u];)u++;for(;1===k[u];)m++,
u++;f=b.unsqueeze(f,k.length,m,n)}if(!d.deepEqual(k,n))throw new c(k,n,">");n=e.max().map(function(a){return a+1});h(a,n,l);x(a._data,e,f,k.length,0)}return a}function x(a,b,d,c,e){var f=e==c-1,l=b.dimension(e);f?l.forEach(function(b,c){u(b);a[b]=d[c[0]]}):l.forEach(function(f,l){u(f);x(a[f],b,d[l[0]],c,e+1)})}function h(a,b,c){for(var e=d.clone(a._size),f=!1;e.length<b.length;)e.push(0),f=!0;for(var l=0,k=b.length;l<k;l++)b[l]>e[l]&&(e[l]=b[l],f=!0);f&&v(a,e,c)}function z(a){for(var b=0,d=a.length;b<
d;b++){var c=a[b];e(c)?a[b]=z(c):c&&!0===c.isMatrix&&(a[b]=z(c.valueOf()))}return a}m=w(g(13));n.prototype=new m;n.prototype.type="DenseMatrix";n.prototype.isDenseMatrix=!0;n.prototype.storage=function(){return"dense"};n.prototype.datatype=function(){return this._datatype};n.prototype.create=function(a,b){return new n(a,b)};n.prototype.subset=function(a,b,d){switch(arguments.length){case 1:var e;if(!a||!0!==a.isIndex)throw new TypeError("Invalid index");if(a.isScalar())e=this.get(a.min());else{e=
a.size();if(e.length!=this._size.length)throw new c(e.length,this._size.length);for(var f=a.min(),l=a.max(),k=0,m=this._size.length;k<m;k++)u(f[k],this._size[k]),u(l[k],this._size[k]);e=new n(r(this._data,a,e.length,0),this._datatype)}return e;case 2:case 3:return s(this,a,b,d);default:throw new SyntaxError("Wrong number of arguments");}};n.prototype.get=function(a){if(!e(a))throw new TypeError("Array expected");if(a.length!=this._size.length)throw new c(a.length,this._size.length);for(var b=0;b<
a.length;b++)u(a[b],this._size[b]);for(var b=this._data,f=0,l=a.length;f<l;f++){var k=a[f];u(k,b.length);b=b[k]}return d.clone(b)};n.prototype.set=function(a,b,d){if(!e(a))throw new TypeError("Array expected");if(a.length<this._size.length)throw new c(a.length,this._size.length,"<");var f,l;f=a.map(function(a){return a+1});h(this,f,d);var k=this._data;d=0;for(f=a.length-1;d<f;d++)l=a[d],u(l,k.length),k=k[l];l=a[a.length-1];u(l,k.length);k[l]=b;return this};n.prototype.resize=function(a,b,d){if(!e(a))throw new TypeError("Array expected");
d=d?this.clone():this;return v(d,a,b)};var v=function(a,c,f){if(0===c.length){for(a=a._data;e(a);)a=a[0];return d.clone(a)}a._size=d.clone(c);a._data=b.resize(a._data,a._size,f);return a};n.prototype.clone=function(){return new n({data:d.clone(this._data),size:d.clone(this._size),datatype:this._datatype})};n.prototype.size=function(){return this._size};n.prototype.map=function(a){var b=this,c=function(d,f){return e(d)?d.map(function(a,b){return c(a,f.concat(b))}):a(d,f,b)};return new n({data:c(this._data,
[]),size:d.clone(this._size),datatype:this._datatype})};n.prototype.forEach=function(a){var b=this,d=function(c,f){e(c)?c.forEach(function(a,b){d(a,f.concat(b))}):a(c,f,b)};d(this._data,[])};n.prototype.toArray=function(){return d.clone(this._data)};n.prototype.valueOf=function(){return this._data};n.prototype.format=function(b){return a.format(this._data,b)};n.prototype.toString=function(){return a.format(this._data)};n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,
datatype:this._datatype}};n.prototype.diagonal=function(a){if(a){if(!0===a.isBigNumber&&(a=a.toNumber()),!f(a)||!l(a))throw new TypeError("The parameter k must be an integer number");}else a=0;var b=0<a?a:0;a=0>a?-a:0;for(var c=Math.min(this._size[0]-a,this._size[1]-b),e=[],k=0;k<c;k++)e[k]=d.clone(this._data[k+a][k+b]);return new n({data:e,size:[c],datatype:this._datatype})};n.diagonal=function(a,d,c,u,m){if(!e(a))throw new TypeError("Array expected, size parameter");if(2!==a.length)throw Error("Only two dimensions matrix are supported");
a=a.map(function(a){a&&!0===a.isBigNumber&&(a=a.toNumber());if(!f(a)||!l(a)||1>a)throw Error("Size values must be positive integers");return a});if(c){if(c&&!0===c.isBigNumber&&(c=c.toNumber()),!f(c)||!l(c))throw new TypeError("The parameter k must be an integer number");}else c=0;u&&k(m)&&(u=t.convert(u,m));m=0<c?c:0;c=0>c?-c:0;var w=a[0],g=a[1],r=Math.min(w-c,g-m),s;if(e(d)){if(d.length!==r)throw Error("Invalid value array length");s=function(a){return d[a]}}else if(d&&!0===d.isMatrix){s=d.size();
if(1!==s.length||s[0]!==r)throw Error("Invalid matrix length");s=function(a){return d.get([a])}}else s=function(){return d};u||(u=s(0)&&!0===s(0).isBigNumber?new A.BigNumber(0):0);var x=[];if(0<a.length)for(x=b.resize(x,a,u),a=0;a<r;a++)x[a+c][a+m]=s(a);return new n({data:x,size:[w,g]})};n.fromJSON=function(a){return new n(a)};n.prototype.swapRows=function(a,b){if(!(f(a)&&l(a)&&f(b)&&l(b)))throw Error("Row index must be positive integers");if(2!==this._size.length)throw Error("Only two dimensional matrix is supported");
u(a,this._size[0]);u(b,this._size[0]);n._swapRows(a,b,this._data);return this};n._swapRows=function(a,b,d){var c=d[a];d[a]=d[b];d[b]=c};A.Matrix._storage.dense=n;return A.Matrix._storage["default"]=n};h.lazy=!1},function(q,h,g){var p=g(25),c=g(26);h.name="sin";h.factory=function(a,b,d,e){var f=e.find(d(g(31)),["number"]),l=e.find(d(g(33)),["number"]),k=e("sin",{number:Math.sin,Complex:function(b){return new a.Complex(Math.sin(b.re)*f(-b.im),Math.cos(b.re)*l(b.im))},BigNumber:function(b){return c(b,
a.BigNumber,1,!1)},Unit:function(b){if(!b.hasBase(a.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return Math.sin(b.value)},"Array | Matrix":function(a){return p(a,k,!0)}});k.toTex="\\sin\\left(${args[0]}\\right)";return k}},function(q,h){q.exports=function p(c,a,b){return c&&"function"===typeof c.map?c.map(function(d){return p(d,a,b)}):a(c)}},function(q,h,g){var p=g(27),c=g(30);q.exports=function(a,b,d,e){if(a.isNaN()||!a.isFinite())return new b(NaN);var f=b.precision,
l=new b(a);if(a=l.isNegative())l.s=-l.s;var k=f+(Math.log(f)|0)+3;b.config({precision:k});l=p(l,b.constructor({precision:k}),d);l[0].constructor=b;if(l[1])return l=l[0],e&&l.isZero()&&(l=new b(Infinity)),b.config({precision:f}),l;l=l[0];if(d){d=c(l.div(3125),d);b.config({precision:Math.min(k,f+15)});for(var l=new b(5),u=new b(16),A=new b(20),m=0;5>m;++m){var k=d.times(d),w=k.times(d),k=w.times(k);d=u.times(k).minus(A.times(w)).plus(l.times(d))}a&&(d.s=-d.s)}else for(l.abs().lt(b.ONE)?(u=64,a=3):(u=
256,a=4),d=c(l.div(u),d),b.config({precision:Math.min(k,f+8)}),l=new b(8);0<a;--a)k=d.times(d),d=k.times(k),d=l.times(d.minus(k)).plus(b.ONE);e&&(d=d.e<=-f?new b(Infinity):b.ONE.div(d));b.config({precision:f});return d.toDP(f-1)}},function(q,h,g){var p=g(28);q.exports=function(c,a,b){var d=p.pi(a.constructor({precision:a.precision+2})),e=p.tau(a);if(c.abs().lte(d.toDP(c.dp())))return[c,!1];if(0<c.dp()&&0==c.div(d.toDP(c.dp())).toNumber()%2)return[new a(b^1),!0];var f=c.mod(e);if(0<c.dp()&&f.toDP(c.dp(),
1).isZero())return[new a(b^1),!0];f.gt(d)&&(b?(f=f.minus(d),f.s=-f.s):f=e.minus(f));f.constructor=c.constructor;return[f,!1]}},function(q,h,g){function p(a){return a[0].precision}q=g(22).memoize;var c=g(29);h.e=q(function(a){return(new a(1)).exp()},p);h.phi=q(function(a){return(new a(1)).plus((new a(5)).sqrt()).div(2)},p);h.pi=q(function(a){var b=a.constructor({precision:a.precision+4}),b=(new b(4)).times(c((new b(1)).div(5))).minus(c((new b(1)).div(239)));return(new a(4)).times(b)},p);h.tau=q(function(a){var b=
h.pi(a.constructor({precision:a.precision+2}));return(new a(2)).times(b)},p)},function(q,h){q.exports=function(g){for(var h=g,c=NaN,a=g.times(g),b=!0,d=3;!h.equals(c);d+=2)g=g.times(a),c=h,h=(b=!b)?h.plus(g.div(d)):h.minus(g.div(d));return h}},function(q,h){q.exports=function(g,h){for(var c=g.constructor.ONE,a=g,b=NaN,d=g.times(g),e=h?a:a=c,f=!0,l=h;!a.equals(b);l+=2)e=e.times(d),c=c.times(l+1).times(l+2),b=a,a=(f=!f)?a.plus(e.div(c)):a.minus(e.div(c));return a}},function(q,h,g){function p(a){return(Math.exp(a)+
Math.exp(-a))/2}var c=g(25),a=g(32);h.name="cosh";h.factory=function(b,d,e,f){var l=f("cosh",{number:p,Complex:function(a){var d=Math.exp(a.re),c=Math.exp(-a.re);return new b.Complex(Math.cos(a.im)*(d+c)/2,Math.sin(a.im)*(d-c)/2)},BigNumber:function(d){return a(d,b.BigNumber,!1,!1)},Unit:function(a){if(!a.hasBase(b.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return p(a.value)},"Array | Matrix":function(a){return c(a,l)}});l.toTex="\\cosh\\left(${args[0]}\\right)";
return l}},function(q,h){q.exports=function(g,h,c,a){if(g.isNaN())return new h(NaN);if(!g.isFinite())return a?new h(0):new h(c?g:Infinity);var b=h.precision;h.config({precision:b+4});g=new h(g);g.constructor=h;g=g.exp();g=c?g.minus(h.ONE.div(g)):g.plus(h.ONE.div(g));g=a?(new h(2)).div(g):g.div(2);h.config({precision:b});return new h(g.toPrecision(b))}},function(q,h,g){function p(a){return 1>Math.abs(a)?a+a*a*a/6+a*a*a*a*a/120:(Math.exp(a)-Math.exp(-a))/2}var c=g(25),a=g(32);h.name="sinh";h.factory=
function(b,d,e,f){var l=f("sinh",{number:p,Complex:function(a){var d=Math.cos(a.im),c=Math.sin(a.im),e=Math.exp(a.re);a=Math.exp(-a.re);return new b.Complex(d*(e-a)/2,c*(e+a)/2)},BigNumber:function(d){return a(d,b.BigNumber,!0,!1)},Unit:function(a){if(!a.hasBase(b.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return p(a.value)},"Array | Matrix":function(a){return c(a,l,!0)}});l.toTex="\\sinh\\left(${args[0]}\\right)";return l}},function(q,h,g){var p=g(25),c=g(26);
h.name="cos";h.factory=function(a,b,d,e){var f=e.find(d(g(31)),["number"]),l=e.find(d(g(33)),["number"]),k=e("cos",{number:Math.cos,Complex:function(b){return new a.Complex(Math.cos(b.re)*f(-b.im),Math.sin(b.re)*l(-b.im))},BigNumber:function(b){return c(b,a.BigNumber,0,!1)},Unit:function(b){if(!b.hasBase(a.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return Math.cos(b.value)},"Array | Matrix":function(a){return p(a,k)}});k.toTex="\\cos\\left(${args[0]}\\right)";return k}},
function(q,h,g){var p=g(25);h.name="sqrt";h.factory=function(c,a,b,d){function e(b){return 0<=b||a.predictable?Math.sqrt(b):f(new c.Complex(b,0))}function f(a){var b=Math.sqrt(a.re*a.re+a.im*a.im),d;d=0<=a.re?.5*Math.sqrt(2*(b+a.re)):Math.abs(a.im)/Math.sqrt(2*(b-a.re));b=0>=a.re?.5*Math.sqrt(2*(b-a.re)):Math.abs(a.im)/Math.sqrt(2*(b+a.re));return 0<=a.im?new c.Complex(d,b):new c.Complex(d,-b)}var l=d("sqrt",{number:e,Complex:f,BigNumber:function(b){return!b.isNegative()||a.predictable?b.sqrt():e(b.toNumber())},
"Array | Matrix":function(a){return p(a,l,!0)},Unit:function(a){return a.pow(.5)}});l.toTex="\\sqrt{${args[0]}}";return l}},function(q,h,g){h.name="norm";h.factory=function(h,c,a,b){function d(a,b){var c=a.size();if(1==c.length){if(b===Number.POSITIVE_INFINITY||"inf"===b){var t=0;a.forEach(function(a){a=e(a);m(a,t)&&(t=a)},!0);return t}if(b===Number.NEGATIVE_INFINITY||"-inf"===b){var g;a.forEach(function(a){a=e(a);if(!g||w(a,g))g=a},!0);return g||0}if("fro"===b)return d(a,2);if("number"===typeof b&&
!isNaN(b)){if(!A(b,0)){var s=0;a.forEach(function(a){s=f(l(e(a),b),s)},!0);return l(s,1/b)}return Number.POSITIVE_INFINITY}throw Error("Unsupported parameter value");}if(2==c.length){if(1===b){var h=[],p=0;a.forEach(function(a,b){var d=b[1],c=f(h[d]||0,e(a));m(c,p)&&(p=c);h[d]=c},!0);return p}if(b===Number.POSITIVE_INFINITY||"inf"===b){var q=[],D=0;a.forEach(function(a,b){var d=b[0],c=f(q[d]||0,e(a));m(c,D)&&(D=c);q[d]=c},!0);return D}if("fro"===b)return k(n(u(r(a),a)));if(2===b)throw Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");
throw Error("Unsupported parameter value");}}var e=a(g(37)),f=a(g(38)),l=a(g(48)),k=a(g(35)),u=a(g(53)),A=a(g(44)),m=a(g(56)),w=a(g(60)),t=a(g(39)),n=a(g(61)),r=a(g(62));h=b.find(e,["Complex"]);var s=b("norm",{number:Math.abs,Complex:h,BigNumber:function(a){return a.abs()},"boolean | null":function(a){return Math.abs(a)},Array:function(a){return d(t(a),2)},Matrix:function(a){return d(a,2)},"number | Complex | BigNumber | boolean | null, number | BigNumber | string":function(a){return s(a)},"Array, number | BigNumber | string":function(a,
b){return d(t(a),b)},"Matrix, number | BigNumber | string":function(a,b){return d(a,b)}});s.toTex={1:"\\left\\|${args[0]}\\right\\|",2:"\\mathrm{${name}}\\left(${args}\\right)"};return s}},function(q,h,g){var p=g(25);h.name="abs";h.factory=function(c,a,b,d){var e=d("abs",{number:Math.abs,Complex:function(a){var b=Math.abs(a.re);a=Math.abs(a.im);if(1E3>b&&1E3>a)return Math.sqrt(b*b+a*a);if(b>=a)return a/=b,b*Math.sqrt(1+a*a);b/=a;return a*Math.sqrt(1+b*b)},BigNumber:function(a){return a.abs()},Fraction:function(a){return a.abs()},
"Array | Matrix":function(a){return p(a,e,!0)},Unit:function(a){a=a.clone();a.value=Math.abs(a.value);return a}});e.toTex="\\left|${args[0]}\\right|";return e}},function(q,h,g){var p=g(3).extend;h.name="add";h.factory=function(c,a,b,d){var e=b(g(39)),f=b(g(40));c=g(41);var l=b(g(42)),k=b(g(43)),u=b(g(45)),A=b(g(46)),m=b(g(47)),w=d("add",p({"Matrix, Matrix":function(a,b){var d;switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":d=k(a,b,f);break;default:d=l(b,a,f,!0)}break;default:switch(b.storage()){case "sparse":d=
l(a,b,f,!1);break;default:d=A(a,b,f)}}return d},"Array, Array":function(a,b){return w(e(a),e(b)).valueOf()},"Array, Matrix":function(a,b){return w(e(a),b)},"Matrix, Array":function(a,b){return w(a,e(b))},"Matrix, any":function(a,b){var d;switch(a.storage()){case "sparse":d=u(a,b,f,!1);break;default:d=m(a,b,f,!1)}return d},"any, Matrix":function(a,b){var d;switch(b.storage()){case "sparse":d=u(b,a,f,!0);break;default:d=m(b,a,f,!0)}return d},"Array, any":function(a,b){return m(e(a),b,f,!1).valueOf()},
"any, Array":function(a,b){return m(e(b),a,f,!0).valueOf()}},f.signatures));w.toTex="\\left(${args[0]}"+c.operators.add+"${args[1]}\\right)";return w}},function(q,h){h.name="matrix";h.factory=function(g,h,c,a){function b(a,b,c){return new (g.Matrix.storage(b||"default"))(a,c)}h=a("matrix",{"":function(){return b([])},string:function(a){return b([],a)},"string, string":function(a,c){return b([],a,c)},Array:function(a){return b(a)},Matrix:function(a){return b(a,a.storage())},"Array | Matrix, string":b,
"Array | Matrix, string, string":b});h.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"};return h}},function(q,h){h.factory=function(g,h,c,a){return a("add",{"number, number":function(a,d){return a+d},"Complex, Complex":function(a,d){return new g.Complex(a.re+d.re,a.im+d.im)},"BigNumber, BigNumber":function(a,d){return a.plus(d)},"Fraction, Fraction":function(a,d){return a.add(d)},"Unit, Unit":function(a,d){if(null==a.value)throw Error("Parameter x contains a unit with undefined value");
if(null==d.value)throw Error("Parameter y contains a unit with undefined value");if(!a.equalBase(d))throw Error("Units do not match");var c=a.clone();c.value+=d.value;c.fixPrefix=!1;return c}})}},function(q,h){h.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",
Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega","true":"\\mathrm{True}","false":"\\mathrm{False}",
i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"};h.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",
bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"};h.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var g={deg:"^\\circ"};h.toSymbol=function(p,c){if("undefined"===typeof c?0:c)return g.hasOwnProperty(p)?g[p]:"\\mathrm{"+p+"}";if(h.symbols.hasOwnProperty(p))return h.symbols[p];if(-1!==p.indexOf("_")){var a=p.indexOf("_");return h.toSymbol(p.substring(0,a))+"_{"+h.toSymbol(p.substring(a+1))+"}"}return p}},function(q,h,g){var p=g(19);h.name="algorithm01";
h.factory=function(c,a,b,d){var e=c.DenseMatrix;return function(a,b,c,u){var A=a._data,m=a._size,w=a._datatype;a=b._values;var t=b._index,n=b._ptr,g=b._size,s=b._datatype;if(m.length!==g.length)throw new p(m.length,g.length);if(m[0]!==g[0]||m[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+g+")");if(!a)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");b=m[0];m=m[1];c=(w="string"===typeof w&&w===s?w:void 0)?d.find(c,[w,w]):
c;for(var h=[],s=0;s<b;s++)h[s]=[];for(var B=[],z=[],g=0;g<m;g++){for(var v=g+1,q=n[g+1],y=n[g];y<q;y++)s=t[y],B[s]=u?c(a[y],A[s][g]):c(A[s][g],a[y]),z[s]=v;for(s=0;s<b;s++)h[s][g]=z[s]===v?B[s]:A[s][g]}return new e({data:h,size:[b,m],datatype:w})}}},function(q,h,g){var p=g(19);h.name="algorithm04";h.factory=function(c,a,b,d){var e=b(g(44)),f=c.SparseMatrix;return function(a,b,c){var A=a._values,m=a._index,w=a._ptr,t=a._size,n=a._datatype;a=b._values;var g=b._index,s=b._ptr,h=b._size,B=b._datatype;
if(t.length!==h.length)throw new p(t.length,h.length);if(t[0]!==h[0]||t[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+t+") must match Matrix B ("+h+")");var z=t[0],t=t[1],v;b=e;var h=0,q=c;"string"===typeof n&&n===B&&(v=n,b=d.find(e,[v,v]),h=d.convert(0,v),q=d.find(c,[v,v]));c=A&&a?[]:void 0;n=[];B=[];v=new f({values:c,index:n,ptr:B,size:[z,t],datatype:v});var z=A&&a?[]:void 0,y=A&&a?[]:void 0,G=[],S=[],H,D,E,N;for(D=0;D<t;D++){B[D]=n.length;var K=D+1;H=w[D];N=w[D+1];for(E=H;E<N;E++)H=
m[E],n.push(H),G[H]=K,z&&(z[H]=A[E]);H=s[D];N=s[D+1];for(E=H;E<N;E++)if(H=g[E],G[H]===K){if(z){var O=q(z[H],a[E]);b(O,h)?G[H]=null:z[H]=O}}else n.push(H),S[H]=K,y&&(y[H]=a[E]);if(z&&y)for(E=B[D];E<n.length;)H=n[E],G[H]===K?(c[E]=z[H],E++):S[H]===K?(c[E]=y[H],E++):n.splice(E,1)}B[t]=n.length;return v}}},function(q,h,g){var p=g(6).nearlyEqual;h.factory=function(c,a,b,d){return d("equalScalar",{"boolean, boolean":function(a,b){return a===b},"number, number":function(b,d){return b===d||p(b,d,a.epsilon)},
"BigNumber, BigNumber":function(a,b){return a.eq(b)},"Fraction, Fraction":function(a,b){return a.equals(b)},"Complex, Complex":function(b,d){return(b.re===d.re||p(b.re,d.re,a.epsilon))&&(b.im===d.im||p(b.im,d.im,a.epsilon))},"Unit, Unit":function(b,d){if(!b.equalBase(d))throw Error("Cannot compare units with different base");return b.value===d.value||p(b.value,d.value,a.epsilon)},"string, string":function(a,b){return a===b}})}},function(q,h){h.name="algorithm10";h.factory=function(g,h,c,a){var b=
g.DenseMatrix;return function(d,c,f,l){var k=d._values,u=d._index,A=d._ptr,m=d._size,g=d._datatype;if(!k)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");d=m[0];var m=m[1],t,n=f;"string"===typeof g&&(t=g,c=a.convert(c,t),n=a.find(f,[t,t]));f=[];t=new b({data:f,size:[d,m],datatype:t});for(var g=[],h=[],s=0;s<m;s++){for(var x=s+1,B=A[s+1],p=A[s];p<B;p++){var v=u[p];g[v]=k[p];h[v]=x}for(B=0;B<d;B++)0===s&&(f[B]=[]),f[B][s]=h[B]===x?l?n(c,g[B]):n(g[B],c):c}return t}}},
function(q,h,g){g(14);var p=g(19);h.name="algorithm13";h.factory=function(c,a,b,d){var e=c.DenseMatrix,f=function(a,b,d,c,e,g){var t=[];if(b===d.length-1)for(b=0;b<c;b++)t[b]=a(e[b],g[b]);else for(var n=0;n<c;n++)t[n]=f(a,b+1,d,d[b+1],e[n],g[n]);return t};return function(a,b,c){var A=a._data,m=a._size,g=a._datatype,t=b._data,n=b._size,h=b._datatype;a=[];if(m.length!==n.length)throw new p(m.length,n.length);for(var s=0;s<m.length;s++){if(m[s]!==n[s])throw new RangeError("Dimension mismatch. Matrix A ("+
m+") must match Matrix B ("+n+")");a[s]=m[s]}var x,m=c;"string"===typeof g&&g===h&&(x=g,d.convert(b,x),m=d.find(c,[x,x]));b=0<a.length?f(m,0,a,a[0],A,t):[];return new e({data:b,size:a,datatype:x})}}},function(q,h,g){var p=g(3).clone;h.name="algorithm14";h.factory=function(c,a,b,d){var e=c.DenseMatrix,f=function(a,b,d,c,e,g,t){var n=[];if(b===d.length-1)for(b=0;b<c;b++)n[b]=t?a(g,e[b]):a(e[b],g);else for(var h=0;h<c;h++)n[h]=f(a,b+1,d,d[b+1],e[h],g,t);return n};return function(a,b,c,A){var m=a._data,
g=a._size;a=a._datatype;var t,n=c;"string"===typeof a&&(t=a,b=d.convert(b,t),n=d.find(c,[t,t]));b=0<g.length?f(n,0,g,g[0],m,b,A):[];return new e({data:b,size:p(g),datatype:t})}}},function(q,h,g){var p=g(6).isInteger,c=g(15).size;h.name="pow";h.factory=function(a,b,d,e){function f(d,c){return p(c)||0<=d||b.predictable?Math.pow(d,c):l(new a.Complex(d,0),new a.Complex(c,0))}function l(a,b){return m(n(t(a),b))}function k(a,b){if(!p(b)||0>b)throw new TypeError("For A^b, b must be a positive integer (value is "+
b+")");var d=c(a);if(2!=d.length)throw Error("For A^b, A must be 2 dimensional (A has "+d.length+" dimensions)");if(d[0]!=d[1])throw Error("For A^b, A must be square (size is "+d[0]+"x"+d[1]+")");for(var d=w(d[0]).valueOf(),e=a;1<=b;)1==(b&1)&&(d=n(e,d)),b>>=1,e=n(e,e);return d}function u(a,b){return h(k(a.valueOf(),b))}var A=g(41),m=d(g(49)),w=d(g(50)),t=d(g(51)),n=d(g(53)),h=d(g(39));d=e("pow",{"number, number":f,"Complex, Complex":l,"BigNumber, BigNumber":function(d,c){return c.isInteger()||0<=
d||b.predictable?d.pow(c):l(new a.Complex(d.toNumber(),0),new a.Complex(c.toNumber(),0))},"Fraction, Fraction":function(a,d){if(1!==d.d){if(b.predictable)throw Error("Function pow does not support non-integer exponents for fractions.");return f(a.valueOf(),d.valueOf())}return a.pow(d)},"Array, number":k,"Array, BigNumber":function(a,b){return k(a,b.toNumber())},"Matrix, number":u,"Matrix, BigNumber":function(a,b){return u(a,b.toNumber())},"Unit, number":function(a,b){return a.pow(b)}});d.toTex="\\left(${args[0]}\\right)"+
A.operators.pow+"{${args[1]}}";return d}},function(q,h,g){var p=g(25);h.name="exp";h.factory=function(c,a,b,d){var e=d("exp",{number:Math.exp,Complex:function(a){var b=Math.exp(a.re);return new c.Complex(b*Math.cos(a.im),b*Math.sin(a.im))},BigNumber:function(a){return a.exp()},"Array | Matrix":function(a){return p(a,e)}});e.toTex="\\exp\\left(${args[0]}\\right)";return e}},function(q,h,g){var p=g(15),c=g(6).isInteger;h.name="eye";h.factory=function(a,b,d,e){function f(a,b){switch(a.length){case 0:return b?
k(b):[];case 1:return l(a[0],a[0],b);case 2:return l(a[0],a[1],b);default:throw Error("Vector containing two values expected");}}function l(b,d,e){var f=b&&!0===b.isBigNumber?a.BigNumber:d&&!0===d.isBigNumber?a.BigNumber:null;b&&!0===b.isBigNumber&&(b=b.toNumber());d&&!0===d.isBigNumber&&(d=d.toNumber());if(!c(b)||1>b)throw Error("Parameters in function eye must be positive integers");if(!c(d)||1>d)throw Error("Parameters in function eye must be positive integers");var l=f?new a.BigNumber(1):1,f=
f?new f(0):0,k=[b,d];if(e)return a.Matrix.storage(e).diagonal(k,l,0,f);e=p.resize([],k,f);b=b<d?b:d;for(d=0;d<b;d++)e[d][d]=l;return e}var k=d(g(39));d=e("eye",{"":function(){return"matrix"===b.matrix?k([]):[]},string:function(a){return k(a)},"number | BigNumber":function(a){return l(a,a,"matrix"===b.matrix?"default":void 0)},"number | BigNumber, string":function(a,b){return l(a,a,b)},"number | BigNumber, number | BigNumber":function(a,d){return l(a,d,"matrix"===b.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(a,
b,d){return l(a,b,d)},Array:function(a){return f(a)},"Array, string":function(a,b){return f(a,b)},Matrix:function(a){return f(a.valueOf(),a.storage())},"Matrix, string":function(a,b){return f(a.valueOf(),b)}});d.toTex="\\mathrm{${name}}\\left(${args}\\right)";return d}},function(q,h,g){var p=g(25);h.name="log";h.factory=function(c,a,b,d){function e(a){return new c.Complex(Math.log(Math.sqrt(a.re*a.re+a.im*a.im)),Math.atan2(a.im,a.re))}var f=b(g(52)),l=d("log",{number:function(b){return 0<=b||a.predictable?
Math.log(b):l(new c.Complex(b,0))},Complex:e,BigNumber:function(b){return!b.isNegative()||a.predictable?b.ln():e(new c.Complex(b.toNumber(),0))},"Array | Matrix":function(a){return p(a,l)},"any, any":function(a,b){return f(l(a),l(b))}});l.toTex={1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"};return l}},function(q,h){h.factory=function(g,h,c,a){return a("divide",{"number, number":function(a,d){return a/d},"Complex, Complex":function(a,d){var c=d.re*d.re+d.im*d.im;
return 0!=c?new g.Complex((a.re*d.re+a.im*d.im)/c,(a.im*d.re-a.re*d.im)/c):new g.Complex(0!=a.re?a.re/0:0,0!=a.im?a.im/0:0)},"BigNumber, BigNumber":function(a,d){return a.div(d)},"Fraction, Fraction":function(a,d){return a.div(d)},"Unit, number":function(a,d){var c=a.clone();c.value=(null===c.value?c._normalize(1):c.value)/d;return c},"number, Unit":function(a,d){var c=d.pow(-1);c.value=(null===c.value?c._normalize(1):c.value)*a;return c},"Unit, Unit":function(a,d){return a.divide(d)}})}},function(q,
h,g){var p=g(3).extend,c=g(15);h.name="multiply";h.factory=function(a,b,d,e){b=g(41);var f=d(g(39)),l=d(g(40)),k=d(g(54)),u=d(g(44)),A=d(g(55)),m=d(g(47)),w=a.DenseMatrix,t=a.SparseMatrix,n=e("multiply",p({"Array, Array":function(a,b){h(c.size(a),c.size(b));var d=n(f(a),f(b));return d&&!0===d.isMatrix?d.valueOf():d},"Matrix, Matrix":function(a,b){var d=a.size(),c=b.size();h(d,c);if(1===d.length){if(1===c.length){var f=d[0];if(0===f)throw Error("Cannot multiply two empty vectors");var n=a._data,m=
a._datatype,g=b._data,A=b._datatype,d=l,c=k;m&&A&&m===A&&"string"===typeof m&&(d=e.find(l,[m,m]),c=e.find(k,[m,m]));m=c(n[0],g[0]);for(A=1;A<f;A++)m=d(m,c(n[A],g[A]));return m}a:{switch(b.storage()){case "dense":var f=a._data,p=a._datatype,n=b._data,q=b._datatype,d=a._size[0],c=b._size[1],m=l,A=k;p&&q&&p===q&&"string"===typeof p&&(g=p,m=e.find(l,[g,g]),A=e.find(k,[g,g]));p=[];for(q=0;q<c;q++){for(var N=A(f[0],n[0][q]),K=1;K<d;K++)N=m(N,A(f[K],n[K][q]));p[q]=N}f=1===c?p[0]:new w({data:p,size:[c],datatype:g});
break a}throw Error("Not implemented");}return f}if(1===c.length){a:{switch(a.storage()){case "dense":f=a._data;c=a._size;p=a._datatype;g=b._data;q=b._datatype;d=c[0];c=c[1];m=l;A=k;p&&q&&p===q&&"string"===typeof p&&(n=p,m=e.find(l,[n,n]),A=e.find(k,[n,n]));p=[];for(q=0;q<d;q++){for(var N=f[q],K=A(N[0],g[0]),O=1;O<c;O++)K=m(K,A(N[O],g[O]));p[q]=K}f=1===d?p[0]:new w({data:p,size:[d],datatype:n});break a;case "sparse":var m=a._values,A=a._index,p=a._ptr,M=a._datatype;if(!m)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");
var q=b._data,C=b._datatype,n=a._size[0],N=b._size[0],g=[],d=[],c=[],K=l,O=k,J=u,U=0;M&&C&&M===C&&"string"===typeof M&&(f=M,K=e.find(l,[f,f]),O=e.find(k,[f,f]),J=e.find(u,[f,f]),U=e.convert(0,f));for(var M=[],C=[],X=c[0]=0;X<N;X++){var V=q[X];if(!J(V,U))for(var W=p[X+1],fa=p[X];fa<W;fa++){var ra=A[fa];C[ra]?M[ra]=K(M[ra],O(V,m[fa])):(C[ra]=!0,d.push(ra),M[ra]=O(V,m[fa]))}}m=d.length;for(A=0;A<m;A++)g[A]=M[d[A]];c[1]=d.length;f=1===n?1===g.length?g[0]:0:new t({values:g,index:d,ptr:c,size:[n,1],datatype:f});
break a}f=void 0}return f}return s(a,b)},"Matrix, Array":function(a,b){return n(a,f(b))},"Array, Matrix":function(a,b){return n(f(a,b.storage()),b)},"Matrix, any":function(a,b){var d;switch(a.storage()){case "sparse":d=A(a,b,k,!1);break;case "dense":d=m(a,b,k,!1)}return d},"any, Matrix":function(a,b){var d;switch(b.storage()){case "sparse":d=A(b,a,k,!0);break;case "dense":d=m(b,a,k,!0)}return d},"Array, any":function(a,b){return m(f(a),b,k,!1).valueOf()},"any, Array":function(a,b){return m(f(b),a,
k,!0).valueOf()}},k.signatures)),h=function(a,b){switch(a.length){case 1:switch(b.length){case 1:if(a[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(a[0]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+a[0]+") must match Matrix rows ("+b[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)");}break;case 2:switch(b.length){case 1:if(a[1]!==
b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+a[1]+") must match Vector length ("+b[0]+")");break;case 2:if(a[1]!==b[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+a[1]+") must match Matrix B rows ("+b[0]+")");break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+b.length+" dimensions)");}break;default:throw Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+a.length+" dimensions)");
}},s=function(a,b){switch(a.storage()){case "dense":switch(b.storage()){case "dense":var d;var c=a._data,f=a._size,n=a._datatype,m=b._data,g=b._datatype,A=f[0],h=f[1],s=b._size[1],r,p=l,q=k;n&&g&&n===g&&"string"===typeof n&&(r=n,p=e.find(l,[r,r]),q=e.find(k,[r,r]));for(var M=[],C=0;C<A;C++){var J=c[C];M[C]=[];for(var U=0;U<s;U++){for(var X=q(J[0],m[0][U]),V=1;V<h;V++)X=p(X,q(J[V],m[V][U]));M[C][U]=X}}d=1===A&&1===s?M[0][0]:new w({data:M,size:[A,s],datatype:r});return d;case "sparse":var W;var fa=
a._data,ra=a._size,F=a._datatype,ga=b._values,ea=b._index,Ga=b._ptr,Z=b._size,aa=b._datatype;if(!ga)throw Error("Cannot multiply Dense Matrix times Pattern only Matrix");var ma=ra[0],ta=Z[1],oa,Aa=l,va=k,L=u,Ba=0;F&&aa&&F===aa&&"string"===typeof F&&(oa=F,Aa=e.find(l,[oa,oa]),va=e.find(k,[oa,oa]),L=e.find(u,[oa,oa]),Ba=e.convert(0,oa));for(var ba=[],wa=[],da=[],ja=new t({values:ba,index:wa,ptr:da,size:[ma,ta],datatype:oa}),$=0;$<ta;$++){da[$]=wa.length;var ha=Ga[$],ia=Ga[$+1];if(ia>ha)for(var ca=0,
R=0;R<ma;R++){for(var ka=R+1,P,pa=ha;pa<ia;pa++){var za=ea[pa];ca!==ka?(P=va(fa[R][za],ga[pa]),ca=ka):P=Aa(P,va(fa[R][za],ga[pa]))}ca!==ka||L(P,Ba)||(wa.push(R),ba.push(P))}}da[ta]=wa.length;W=1===ma&&1===ta?1===ba.length?ba[0]:0:ja;return W}break;case "sparse":switch(b.storage()){case "dense":var Y;var na=a._values,Ma=a._index,Na=a._ptr,Ca=a._datatype;if(!na)throw Error("Cannot multiply Pattern only Matrix times Dense Matrix");var Oa=b._data,Pa=b._datatype,la=a._size[0],Da=b._size[0],Ua=b._size[1],
ua,ob=l,jb=k,Q=u,pb=0;Ca&&Pa&&Ca===Pa&&"string"===typeof Ca&&(ua=Ca,ob=e.find(l,[ua,ua]),jb=e.find(k,[ua,ua]),Q=e.find(u,[ua,ua]),pb=e.convert(0,ua));for(var T=[],Ha=[],Va=[],Ab=new t({values:T,index:Ha,ptr:Va,size:[la,Ua],datatype:ua}),Wa=[],qb=[],Ia=0;Ia<Ua;Ia++){Va[Ia]=Ha.length;for(var rb=Ia+1,Qa=0;Qa<Da;Qa++){var kb=Oa[Qa][Ia];if(!Q(kb,pb))for(var Bb=Na[Qa+1],Ra=Na[Qa];Ra<Bb;Ra++){var Ja=Ma[Ra];qb[Ja]!==rb?(qb[Ja]=rb,Ha.push(Ja),Wa[Ja]=jb(kb,na[Ra])):Wa[Ja]=ob(Wa[Ja],jb(kb,na[Ra]))}}for(var Cb=
Ha.length,Xa=Va[Ia];Xa<Cb;Xa++)T[Xa]=Wa[Ha[Xa]]}Va[Ua]=Ha.length;Y=1===la&&1===Ua?1===T.length?T[0]:0:Ab;return Y;case "sparse":var sb;var lb=a._values,tb=a._index,Ya=a._ptr,Za=a._datatype,mb=b._values,Db=b._index,ub=b._ptr,vb=b._datatype,wb=a._size[0],$a=b._size[1],Sa=lb&&mb,Ka,xb=l,nb=k;Za&&vb&&Za===vb&&"string"===typeof Za&&(Ka=Za,xb=e.find(l,[Ka,Ka]),nb=e.find(k,[Ka,Ka]));for(var ab=Sa?[]:void 0,Ea=[],bb=[],Eb=new t({values:ab,index:Ea,ptr:bb,size:[wb,$a],datatype:Ka}),cb=Sa?[]:void 0,db=[],sa,
eb,fb,La,yb,zb,qa,Ta,Fa=0;Fa<$a;Fa++){bb[Fa]=Ea.length;var gb=Fa+1;yb=ub[Fa];zb=ub[Fa+1];for(La=yb;La<zb;La++)if(Ta=Db[La],Sa)for(eb=Ya[Ta],fb=Ya[Ta+1],sa=eb;sa<fb;sa++)qa=tb[sa],db[qa]!==gb?(db[qa]=gb,Ea.push(qa),cb[qa]=nb(mb[La],lb[sa])):cb[qa]=xb(cb[qa],nb(mb[La],lb[sa]));else for(eb=Ya[Ta],fb=Ya[Ta+1],sa=eb;sa<fb;sa++)qa=tb[sa],db[qa]!==gb&&(db[qa]=gb,Ea.push(qa));if(Sa)for(var Fb=Ea.length,hb=bb[Fa];hb<Fb;hb++)ab[hb]=cb[Ea[hb]]}bb[$a]=Ea.length;sb=1===wb&&1===$a&&Sa?1===ab.length?ab[0]:0:Eb;
return sb}}};n.toTex="\\left(${args[0]}"+b.operators.multiply+"${args[1]}\\right)";return n}},function(q,h){h.factory=function(g,h,c,a){return a("multiplyScalar",{"number, number":function(a,d){return a*d},"Complex, Complex":function(a,d){return new g.Complex(a.re*d.re-a.im*d.im,a.re*d.im+a.im*d.re)},"BigNumber, BigNumber":function(a,d){return a.times(d)},"Fraction, Fraction":function(a,d){return a.mul(d)},"number, Unit":function(a,d){var c=d.clone();c.value=null===c.value?c._normalize(a):c.value*
a;return c},"Unit, number":function(a,d){var c=a.clone();c.value=null===c.value?c._normalize(d):c.value*d;return c},"Unit, Unit":function(a,d){return a.multiply(d)}})}},function(q,h,g){h.name="algorithm11";h.factory=function(h,c,a,b){var d=a(g(44)),e=h.SparseMatrix;return function(a,c,k,u){var g=a._values,m=a._index,h=a._ptr,t=a._size,n=a._datatype;if(!g)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var r=t[0],t=t[1],s;a=d;var p=0,q=k;"string"===typeof n&&(s=n,
a=b.find(d,[s,s]),p=b.convert(0,s),c=b.convert(c,s),q=b.find(k,[s,s]));k=[];var n=[],z=[];s=new e({values:k,index:n,ptr:z,size:[r,t],datatype:s});for(r=0;r<t;r++){z[r]=n.length;for(var v=h[r+1],I=h[r];I<v;I++){var y=m[I],G=u?q(c,g[I]):q(g[I],c);a(G,p)||(n.push(y),k.push(G))}}z[t]=n.length;return s}}},function(q,h,g){var p=g(6).nearlyEqual;h.name="larger";h.factory=function(c,a,b,d){var e=b(g(39)),f=b(g(57)),l=b(g(58)),k=b(g(59)),u=b(g(46)),A=b(g(47));c=g(41);var m=d("larger",{"boolean, boolean":function(a,
b){return a>b},"number, number":function(b,d){return b>d&&!p(b,d,a.epsilon)},"BigNumber, BigNumber":function(a,b){return a.gt(b)},"Fraction, Fraction":function(a,b){return 1===a.compare(b)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function(b,d){if(!b.equalBase(d))throw Error("Cannot compare units with different base");return b.value>d.value&&!p(b.value,d.value,a.epsilon)},"string, string":function(a,b){return a>b},"Matrix, Matrix":function(a,
b){var d;switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":d=l(a,b,m);break;default:d=f(b,a,m,!0)}break;default:switch(b.storage()){case "sparse":d=f(a,b,m,!1);break;default:d=u(a,b,m)}}return d},"Array, Array":function(a,b){return m(e(a),e(b)).valueOf()},"Array, Matrix":function(a,b){return m(e(a),b)},"Matrix, Array":function(a,b){return m(a,e(b))},"Matrix, any":function(a,b){var d;switch(a.storage()){case "sparse":d=k(a,b,m,!1);break;default:d=A(a,b,m,!1)}return d},"any, Matrix":function(a,
b){var d;switch(b.storage()){case "sparse":d=k(b,a,m,!0);break;default:d=A(b,a,m,!0)}return d},"Array, any":function(a,b){return A(e(a),b,m,!1).valueOf()},"any, Array":function(a,b){return A(e(b),a,m,!0).valueOf()}});m.toTex="\\left(${args[0]}"+c.operators.larger+"${args[1]}\\right)";return m}},function(q,h,g){var p=g(19);h.name="algorithm03";h.factory=function(c,a,b,d){var e=c.DenseMatrix;return function(a,b,c,u){var g=a._data,m=a._size,h=a._datatype;a=b._values;var t=b._index,n=b._ptr,r=b._size,
s=b._datatype;if(m.length!==r.length)throw new p(m.length,r.length);if(m[0]!==r[0]||m[1]!==r[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+r+")");if(!a)throw Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");b=m[0];var m=m[1],x,r=0,q=c;"string"===typeof h&&h===s&&(x=h,r=d.convert(0,x),q=d.find(c,[x,x]));c=[];for(h=0;h<b;h++)c[h]=[];for(var h=[],s=[],z=0;z<m;z++){for(var v=z+1,I=n[z+1],y=n[z];y<I;y++){var G=t[y];h[G]=u?q(a[y],g[G][z]):
q(g[G][z],a[y]);s[G]=v}for(I=0;I<b;I++)c[I][z]=s[I]===v?h[I]:u?q(r,g[I][z]):q(g[I][z],r)}return new e({data:c,size:[b,m],datatype:x})}}},function(q,h,g){var p=g(19);h.name="algorithm07";h.factory=function(c,a,b,d){var e=c.DenseMatrix,f=function(a,b,d,c,e){var f=a._values,g=a._index,n=a._ptr;a=n[b];for(b=n[b+1];a<b;a++)n=g[a],d[n]=e,c[n]=f[a]};return function(a,b,c){var g=a._size,m=a._datatype,h=b._size,t=b._datatype;if(g.length!==h.length)throw new p(g.length,h.length);if(g[0]!==h[0]||g[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+
g+") must match Matrix B ("+h+")");var h=g[0],g=g[1],n,r=0,s=c;"string"===typeof m&&m===t&&(n=m,r=d.convert(0,n),s=d.find(c,[n,n]));m=[];for(c=0;c<h;c++)m[c]=[];var t=new e({data:m,size:[h,g],datatype:n}),x=[],q=[],z=[],v=[];for(n=0;n<g;n++){var I=n+1;f(a,n,z,x,I);f(b,n,v,q,I);for(c=0;c<h;c++)m[c][n]=s(z[c]===I?x[c]:r,v[c]===I?q[c]:r)}return t}}},function(q,h){h.name="algorithm12";h.factory=function(g,h,c,a){var b=g.DenseMatrix;return function(d,c,f,l){var k=d._values,u=d._index,g=d._ptr,m=d._size,
h=d._datatype;if(!k)throw Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");d=m[0];var m=m[1],t,n=f;"string"===typeof h&&(t=h,c=a.convert(c,t),n=a.find(f,[t,t]));f=[];t=new b({data:f,size:[d,m],datatype:t});for(var h=[],r=[],s=0;s<m;s++){for(var p=s+1,q=g[s+1],z=g[s];z<q;z++){var v=u[z];h[v]=k[z];r[v]=p}for(q=0;q<d;q++)0===s&&(f[q]=[]),f[q][s]=r[q]===p?l?n(c,h[q]):n(h[q],c):l?n(c,0):n(0,c)}return t}}},function(q,h,g){var p=g(6).nearlyEqual;h.name="smaller";h.factory=function(c,
a,b,d){var e=b(g(39)),f=b(g(57)),l=b(g(58)),k=b(g(59)),u=b(g(46)),h=b(g(47));c=g(41);var m=d("smaller",{"boolean, boolean":function(a,b){return a<b},"number, number":function(b,d){return b<d&&!p(b,d,a.epsilon)},"BigNumber, BigNumber":function(a,b){return a.lt(b)},"Fraction, Fraction":function(a,b){return-1===a.compare(b)},"Complex, Complex":function(a,b){throw new TypeError("No ordering relation is defined for complex numbers");},"Unit, Unit":function(b,d){if(!b.equalBase(d))throw Error("Cannot compare units with different base");
return b.value<d.value&&!p(b.value,d.value,a.epsilon)},"string, string":function(a,b){return a<b},"Matrix, Matrix":function(a,b){var d;switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":d=l(a,b,m);break;default:d=f(b,a,m,!0)}break;default:switch(b.storage()){case "sparse":d=f(a,b,m,!1);break;default:d=u(a,b,m)}}return d},"Array, Array":function(a,b){return m(e(a),e(b)).valueOf()},"Array, Matrix":function(a,b){return m(e(a),b)},"Matrix, Array":function(a,b){return m(a,e(b))},"Matrix, any":function(a,
b){var d;switch(a.storage()){case "sparse":d=k(a,b,m,!1);break;default:d=h(a,b,m,!1)}return d},"any, Matrix":function(a,b){var d;switch(b.storage()){case "sparse":d=k(b,a,m,!0);break;default:d=h(b,a,m,!0)}return d},"Array, any":function(a,b){return h(e(a),b,m,!1).valueOf()},"any, Array":function(a,b){return h(e(b),a,m,!0).valueOf()}});m.toTex="\\left(${args[0]}"+c.operators.smaller+"${args[1]}\\right)";return m}},function(q,h,g){var p=g(3).clone,c=g(16).format;h.name="trace";h.factory=function(a,
b,d,e){var f=d(g(39)),l=d(g(38)),k=e("trace",{Array:function(a){return k(f(a))},Matrix:function(a){var b;switch(a.storage()){case "dense":a:{var d=a._size;b=a._data;switch(d.length){case 1:if(1==d[0]){b=p(b[0]);break a}throw new RangeError("Matrix must be square (size: "+c(d)+")");case 2:var e=d[0];if(e===d[1]){for(a=d=0;a<e;a++)d=l(d,b[a][a]);b=d;break a}throw new RangeError("Matrix must be square (size: "+c(d)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+c(d)+")");
}}break;case "sparse":b=a._values;var e=a._index,d=a._ptr,f=a._size;a=f[1];if(f[0]===a){f=0;if(0<b.length)for(var k=0;k<a;k++)for(var g=d[k+1],h=d[k];h<g;h++){var x=e[h];if(x===k){f=l(f,b[h]);break}if(x>k)break}b=f}else throw new RangeError("Matrix must be square (size: "+c(f)+")");}return b},any:p});k.toTex="\\mathrm{tr}\\left(${args[0]}\\right)";return k}},function(q,h,g){var p=g(3).clone,c=g(16).format;h.name="transpose";h.factory=function(a,b,d,e){b=g(41);var f=d(g(39)),l=a.DenseMatrix,k=a.SparseMatrix,
u=e("transpose",{Array:function(a){return u(f(a)).valueOf()},Matrix:function(a){var b=a.size(),d;switch(b.length){case 1:d=a.clone();break;case 2:var e=b[0],f=b[1];if(0===f)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+c(b)+")");switch(a.storage()){case "dense":b=a._data;d=[];for(var u,g=0;g<f;g++){u=d[g]=[];for(var h=0;h<e;h++)u[h]=p(b[h][g])}d=new l({data:d,size:[f,e],datatype:a._datatype});break;case "sparse":b=a._values;d=a._index;u=a._ptr;for(var g=b?[]:void 0,h=
[],q=[],z=[],v=0;v<e;v++)z[v]=0;var I,v=0;for(I=d.length;v<I;v++)z[d[v]]++;for(I=v=0;I<e;I++)q.push(v),v+=z[I],z[I]=q[I];q.push(v);for(v=0;v<f;v++){I=u[v+1];for(var y=u[v];y<I;y++){var G=z[d[y]]++;h[G]=v;b&&(g[G]=p(b[y]))}}d=new k({values:g,index:h,ptr:q,size:[f,e],datatype:a._datatype})}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+c(this._size)+")");}return d},any:function(a){return p(a)}});u.toTex="\\left(${args[0]}\\right)"+b.operators.transpose;return u}},
function(q,h,g){var p=g(3).extend;h.name="divide";h.factory=function(c,a,b,d){var e=b(g(52)),f=b(g(53)),l=b(g(64)),k=b(g(39)),u=b(g(55)),h=b(g(47));c=d("divide",p({"Array | Matrix, Array | Matrix":function(a,b){return f(a,l(b))},"Matrix, any":function(a,b){var d;switch(a.storage()){case "sparse":d=u(a,b,e,!1);break;case "dense":d=h(a,b,e,!1)}return d},"Array, any":function(a,b){return h(k(a),b,e,!1).valueOf()},"any, Array | Matrix":function(a,b){return f(a,l(b))}},e.signatures));c.toTex="\\frac{${args[0]}}{${args[1]}}";
return c}},function(q,h,g){var p=g(14);h.name="inv";h.factory=function(c,a,b,d){function e(a,b,d){var c,e;if(1==b){b=a[0][0];if(0==b)throw Error("Cannot calculate inverse, determinant is zero");return[[l(1,b)]]}if(2==b){b=m(a);if(0==b)throw Error("Cannot calculate inverse, determinant is zero");return[[l(a[1][1],b),l(h(a[0][1]),b)],[l(h(a[1][0]),b),l(a[0][0],b)]]}var f=a.concat();for(a=0;a<b;a++)f[a]=f[a].concat();for(var g=w(b).valueOf(),p=0;p<d;p++){for(a=p;a<b&&0==f[a][p];)a++;if(a==b||0==f[a][p])throw Error("Cannot calculate inverse, determinant is zero");
a!=p&&(c=f[p],f[p]=f[a],f[a]=c,c=g[p],g[p]=g[a],g[a]=c);var q=f[p],y=g[p];for(a=0;a<b;a++){var G=f[a],S=g[a];if(a!=p){if(0!=G[p]){e=l(h(G[p]),q[p]);for(c=p;c<d;c++)G[c]=k(G[c],u(e,q[c]));for(c=0;c<d;c++)S[c]=k(S[c],u(e,y[c]))}}else{e=q[p];for(c=p;c<d;c++)G[c]=l(G[c],e);for(c=0;c<d;c++)S[c]=l(S[c],e)}}}return g}var f=b(g(39)),l=b(g(52)),k=b(g(40)),u=b(g(53)),h=b(g(65)),m=b(g(66)),w=b(g(50));c=d("inv",{"Array | Matrix":function(a){var b=!0===a.isMatrix?a.size():p.array.size(a);switch(b.length){case 1:if(1==
b[0])return!0===a.isMatrix?f([l(1,a.valueOf()[0])]):[l(1,a[0])];throw new RangeError("Matrix must be square (size: "+p.string.format(b)+")");case 2:var d=b[0],c=b[1];if(d==c)return!0===a.isMatrix?f(e(a.valueOf(),d,c),a.storage()):e(a,d,c);throw new RangeError("Matrix must be square (size: "+p.string.format(b)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+p.string.format(b)+")");}},any:function(a){return l(1,a)}});c.toTex="\\left(${args[0]}\\right)^{-1}";return c}},function(q,
h,g){var p=g(25);h.name="unaryMinus";h.factory=function(c,a,b,d){a=g(41);var e=d("unaryMinus",{number:function(a){return-a},Complex:function(a){return new c.Complex(-a.re,-a.im)},BigNumber:function(a){return a.neg()},Fraction:function(a){return a.neg()},Unit:function(a){var b=a.clone();b.value=-a.value;return b},"Array | Matrix":function(a){return p(a,e,!0)}});e.toTex=a.operators.unaryMinus+"\\left(${args[0]}\\right)";return e}},function(q,h,g){q=g(14);var p=q.object,c=q.string;h.name="det";h.factory=
function(a,b,d,e){var f=d(g(39)),l=d(g(38)),k=d(g(67)),u=d(g(53)),h=d(g(65));a=e("det",{any:function(a){return p.clone(a)},"Array | Matrix":function(a){var b;a&&!0===a.isMatrix?b=a.size():Array.isArray(a)?(a=f(a),b=a.size()):b=[];switch(b.length){case 0:return p.clone(a);case 1:if(1==b[0])return p.clone(a.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+c.format(b)+")");case 2:var d=b[0];if(d==b[1]){a=a.clone().valueOf();if(1==d)d=p.clone(a[0][0]);else if(2==d)d=k(u(a[0][0],a[1][1]),
u(a[1][0],a[0][1]));else{var e=a;for(b=0;b<d-1;b++){for(var g=void 0,s=void 0,q=Array(e.length),B=0,g=1;g<e.length;g++)B=l(B,e[g][g]);for(g=0;g<e.length;g++){q[g]=Array(e.length);q[g][g]=h(B);for(s=0;s<g;s++)q[g][s]=0;for(s=g+1;s<e.length;s++)q[g][s]=e[g][s];g+1<e.length&&(B=k(B,e[g+1][g+1]))}e=u(q,a)}d=0==d%2?h(e[0][0]):e[0][0]}return d}throw new RangeError("Matrix must be square (size: "+c.format(b)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+c.format(b)+")");}}});
a.toTex="\\det\\left(${args[0]}\\right)";return a}},function(q,h,g){var p=g(19);h.name="subtract";h.factory=function(c,a,b,d){a=g(41);var e=b(g(39)),f=b(g(40)),l=b(g(65)),k=b(g(42)),u=b(g(57)),h=b(g(68)),m=b(g(45)),w=b(g(46)),t=b(g(47)),n=d("subtract",{"number, number":function(a,b){return a-b},"Complex, Complex":function(a,b){return new c.Complex(a.re-b.re,a.im-b.im)},"BigNumber, BigNumber":function(a,b){return a.minus(b)},"Fraction, Fraction":function(a,b){return a.sub(b)},"Unit, Unit":function(a,
b){if(null==a.value)throw Error("Parameter x contains a unit with undefined value");if(null==b.value)throw Error("Parameter y contains a unit with undefined value");if(!a.equalBase(b))throw Error("Units do not match");var d=a.clone();d.value-=b.value;d.fixPrefix=!1;return d},"Matrix, Matrix":function(a,b){var d=a.size(),c=b.size();if(d.length!==c.length)throw new p(d.length,c.length);switch(a.storage()){case "sparse":switch(b.storage()){case "sparse":d=h(a,b,n);break;default:d=u(b,a,n,!0)}break;default:switch(b.storage()){case "sparse":d=
k(a,b,n,!1);break;default:d=w(a,b,n)}}return d},"Array, Array":function(a,b){return n(e(a),e(b)).valueOf()},"Array, Matrix":function(a,b){return n(e(a),b)},"Matrix, Array":function(a,b){return n(a,e(b))},"Matrix, any":function(a,b){var d;switch(a.storage()){case "sparse":d=m(a,l(b),f);break;default:d=t(a,b,n)}return d},"any, Matrix":function(a,b){var d;switch(b.storage()){case "sparse":d=m(b,a,n,!0);break;default:d=t(b,a,n,!0)}return d},"Array, any":function(a,b){return t(e(a),b,n,!1).valueOf()},
"any, Array":function(a,b){return t(e(b),a,n,!0).valueOf()}});n.toTex="\\left(${args[0]}"+a.operators.subtract+"${args[1]}\\right)";return n}},function(q,h,g){var p=g(19);h.name="algorithm05";h.factory=function(c,a,b,d){var e=b(g(44)),f=c.SparseMatrix;return function(a,b,c){var g=a._values,m=a._index,h=a._ptr,t=a._size,n=a._datatype;a=b._values;var r=b._index,s=b._ptr,q=b._size,B=b._datatype;if(t.length!==q.length)throw new p(t.length,q.length);if(t[0]!==q[0]||t[1]!==q[1])throw new RangeError("Dimension mismatch. Matrix A ("+
t+") must match Matrix B ("+q+")");var z=t[0],t=t[1],v;b=e;var q=0,I=c;"string"===typeof n&&n===B&&(v=n,b=d.find(e,[v,v]),q=d.convert(0,v),I=d.find(c,[v,v]));c=g&&a?[]:void 0;n=[];B=[];v=new f({values:c,index:n,ptr:B,size:[z,t],datatype:v});var z=c?[]:void 0,y=c?[]:void 0,G=[],S=[],H,D,E,N;for(D=0;D<t;D++){B[D]=n.length;var K=D+1;E=h[D];for(N=h[D+1];E<N;E++)H=m[E],n.push(H),G[H]=K,z&&(z[H]=g[E]);E=s[D];for(N=s[D+1];E<N;E++)H=r[E],G[H]!==K&&n.push(H),S[H]=K,y&&(y[H]=a[E]);if(c)for(E=B[D];E<n.length;){H=
n[E];N=G[H];var O=S[H];if(N===K||O===K)H=I(N===K?z[H]:q,O===K?y[H]:q),b(H,q)?n.splice(E,1):(c.push(H),E++)}}B[t]=n.length;return v}}},function(q,h,g){var p=g(15).size;h.name="cross";h.factory=function(c,a,b,d){function e(a,b){var d=p(a),c=p(b);if(1!=d.length||1!=c.length||3!=d[0]||3!=c[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+d.join(", ")+"], B = ["+c.join(", ")+"])");return[l(k(a[1],b[2]),k(a[2],b[1])),l(k(a[2],b[0]),k(a[0],b[2])),l(k(a[0],b[1]),k(a[1],b[0]))]}var f=b(g(39)),
l=b(g(67)),k=b(g(53));c=d("cross",{"Matrix, Matrix":function(a,b){return f(e(a.toArray(),b.toArray()))},"Matrix, Array":function(a,b){return f(e(a.toArray(),b))},"Array, Matrix":function(a,b){return f(e(a,b.toArray()))},"Array, Array":e});c.toTex="\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)";return c}},function(q,h,g){var p=g(15).size;h.name="dot";h.factory=function(c,a,b,d){function e(a,b){var d=p(a),c=p(b),e=d[0];if(1!==d.length||1!==c.length)throw new RangeError("Vector expected");
if(d[0]!=c[0])throw new RangeError("Vectors must have equal length ("+d[0]+" != "+c[0]+")");if(0==e)throw new RangeError("Cannot calculate the dot product of empty vectors");for(c=d=0;c<e;c++)d=f(d,l(a[c],b[c]));return d}var f=b(g(38)),l=b(g(53));c=d("dot",{"Matrix, Matrix":function(a,b){return e(a.toArray(),b.toArray())},"Matrix, Array":function(a,b){return e(a.toArray(),b)},"Array, Matrix":function(a,b){return e(a,b.toArray())},"Array, Array":e});c.toTex="\\left(${args[0]}\\cdot${args[1]}\\right)";
return c}}])})},function(P,R,F){var q,h,g;(function(p,c){!(h=[R],q=c,g="function"===typeof q?q.apply(R,h):q,void 0!==g&&(P.exports=g))})(this,function(h){var c={REVISION:"72"};!(q=c,g="function"===typeof q?q.call(h,F,h,P):q,void 0!==g&&(P.exports=g));void 0!==self.requestAnimationFrame&&void 0!==self.cancelAnimationFrame||function(){for(var a=0,b=["ms","moz","webkit","o"],d=0;d<b.length&&!self.requestAnimationFrame;++d)self.requestAnimationFrame=self[b[d]+"RequestAnimationFrame"],self.cancelAnimationFrame=
self[b[d]+"CancelAnimationFrame"]||self[b[d]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var d=Date.now(),c=Math.max(0,16-(d-a)),k=self.setTimeout(function(){b(d+c)},c);a=d+c;return k});void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})}();void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&
void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});c.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};c.CullFaceNone=0;c.CullFaceBack=1;c.CullFaceFront=2;c.CullFaceFrontBack=3;c.FrontFaceDirectionCW=0;c.FrontFaceDirectionCCW=1;c.BasicShadowMap=0;c.PCFShadowMap=1;c.PCFSoftShadowMap=2;c.FrontSide=0;c.BackSide=1;c.DoubleSide=2;c.FlatShading=1;c.SmoothShading=2;c.NoColors=0;c.FaceColors=1;c.VertexColors=2;c.NoBlending=
0;c.NormalBlending=1;c.AdditiveBlending=2;c.SubtractiveBlending=3;c.MultiplyBlending=4;c.CustomBlending=5;c.AddEquation=100;c.SubtractEquation=101;c.ReverseSubtractEquation=102;c.MinEquation=103;c.MaxEquation=104;c.ZeroFactor=200;c.OneFactor=201;c.SrcColorFactor=202;c.OneMinusSrcColorFactor=203;c.SrcAlphaFactor=204;c.OneMinusSrcAlphaFactor=205;c.DstAlphaFactor=206;c.OneMinusDstAlphaFactor=207;c.DstColorFactor=208;c.OneMinusDstColorFactor=209;c.SrcAlphaSaturateFactor=210;c.NeverDepth=0;c.AlwaysDepth=
1;c.LessDepth=2;c.LessEqualDepth=3;c.EqualDepth=4;c.GreaterEqualDepth=5;c.GreaterDepth=6;c.NotEqualDepth=7;c.MultiplyOperation=0;c.MixOperation=1;c.AddOperation=2;c.UVMapping=300;c.CubeReflectionMapping=301;c.CubeRefractionMapping=302;c.EquirectangularReflectionMapping=303;c.EquirectangularRefractionMapping=304;c.SphericalReflectionMapping=305;c.RepeatWrapping=1E3;c.ClampToEdgeWrapping=1001;c.MirroredRepeatWrapping=1002;c.NearestFilter=1003;c.NearestMipMapNearestFilter=1004;c.NearestMipMapLinearFilter=
1005;c.LinearFilter=1006;c.LinearMipMapNearestFilter=1007;c.LinearMipMapLinearFilter=1008;c.UnsignedByteType=1009;c.ByteType=1010;c.ShortType=1011;c.UnsignedShortType=1012;c.IntType=1013;c.UnsignedIntType=1014;c.FloatType=1015;c.HalfFloatType=1025;c.UnsignedShort4444Type=1016;c.UnsignedShort5551Type=1017;c.UnsignedShort565Type=1018;c.AlphaFormat=1019;c.RGBFormat=1020;c.RGBAFormat=1021;c.LuminanceFormat=1022;c.LuminanceAlphaFormat=1023;c.RGBEFormat=c.RGBAFormat;c.RGB_S3TC_DXT1_Format=2001;c.RGBA_S3TC_DXT1_Format=
2002;c.RGBA_S3TC_DXT3_Format=2003;c.RGBA_S3TC_DXT5_Format=2004;c.RGB_PVRTC_4BPPV1_Format=2100;c.RGB_PVRTC_2BPPV1_Format=2101;c.RGBA_PVRTC_4BPPV1_Format=2102;c.RGBA_PVRTC_2BPPV1_Format=2103;c.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");
a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};c.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};c.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):
this.set(a)};c.Color.prototype={constructor:c.Color,r:1,g:1,b:1,set:function(a){a instanceof c.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,d){this.r=a;this.g=b;this.b=d;return this},setHSL:function(){function a(a,d,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(d-a)*c:.5>c?d:c<2/3?a+6*(d-a)*(2/3-c):a}return function(b,
d,e){b=c.Math.euclideanModulo(b,1);d=c.Math.clamp(d,0,1);e=c.Math.clamp(e,0,1);0===d?this.r=this.g=this.b=e:(d=.5>=e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,b+1/3),this.g=a(e,d,b),this.b=a(e,d,b-1/3));return this}}(),setStyle:function(a){var b=function(b){b=parseFloat(b);1>b&&console.warn("THREE.Color: Alpha component of color "+a+" will be ignored.");return b},d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var e=d[2];switch(d[1]){case "rgb":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/.exec(e))return this.r=
Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(e))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,this;break;case "rgba":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(e))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/
255,this.b=Math.min(255,parseInt(d[3],10))/255,b(d[4]),this;if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(e))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,b(d[4]),this;break;case "hsl":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(e)){var e=parseFloat(d[1]),f=parseInt(d[2],10)/100,l=parseInt(d[3],10)/100;return this.setHSL(e,f,l)}break;case "hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(e))return e=
parseFloat(d[1]),f=parseInt(d[2],10)/100,l=parseInt(d[3],10)/100,b(d[4]),this.setHSL(e,f,l)}}else if(d=/^\#([A-Fa-f0-9]+)$/.exec(a)){b=d[1];d=b.length;if(3===d)return this.r=parseInt(b.charAt(0)+b.charAt(0),16)/255,this.g=parseInt(b.charAt(1)+b.charAt(1),16)/255,this.b=parseInt(b.charAt(2)+b.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(b.charAt(0)+b.charAt(1),16)/255,this.g=parseInt(b.charAt(2)+b.charAt(3),16)/255,this.b=parseInt(b.charAt(4)+b.charAt(5),16)/255,this}a&&0<a.length&&(b=c.ColorKeywords[a],
void 0!==b?this.setHex(b):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var d=0<b?1/b:1;this.r=Math.pow(a.r,d);this.g=Math.pow(a.g,d);this.b=Math.pow(a.b,d);return this},convertGammaToLinear:function(){var a=
this.r,b=this.g,d=this.b;this.r=a*a;this.g=b*b;this.b=d*d;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,d=this.g,c=this.b,f=Math.max(b,d,c),l=Math.min(b,d,c),k,g=(l+f)/2;if(l===f)l=k=0;else{var h=f-l,l=.5>=g?h/(f+l):
h/(2-f-l);switch(f){case b:k=(d-c)/h+(d<c?6:0);break;case d:k=(c-b)/h+2;break;case c:k=(b-d)/h+4}k/=6}a.h=k;a.s=l;a.l=g;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,d){var c=this.getHSL();c.h+=a;c.s+=b;c.l+=d;this.setHSL(c.h,c.s,c.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=
a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+
2]=this.b;return a}};c.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,
darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,
greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,
lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,
palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,
teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c.Quaternion=function(a,b,d,c){this._x=a||0;this._y=b||0;this._z=d||0;this._w=void 0!==c?c:1};c.Quaternion.prototype={constructor:c.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},
get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,d,c){this._x=a;this._y=b;this._z=d;this._w=c;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof c.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
var d=Math.cos(a._x/2),e=Math.cos(a._y/2),f=Math.cos(a._z/2),l=Math.sin(a._x/2),k=Math.sin(a._y/2),g=Math.sin(a._z/2),h=a.order;"XYZ"===h?(this._x=l*e*f+d*k*g,this._y=d*k*f-l*e*g,this._z=d*e*g+l*k*f,this._w=d*e*f-l*k*g):"YXZ"===h?(this._x=l*e*f+d*k*g,this._y=d*k*f-l*e*g,this._z=d*e*g-l*k*f,this._w=d*e*f+l*k*g):"ZXY"===h?(this._x=l*e*f-d*k*g,this._y=d*k*f+l*e*g,this._z=d*e*g+l*k*f,this._w=d*e*f-l*k*g):"ZYX"===h?(this._x=l*e*f-d*k*g,this._y=d*k*f+l*e*g,this._z=d*e*g-l*k*f,this._w=d*e*f+l*k*g):"YZX"===
h?(this._x=l*e*f+d*k*g,this._y=d*k*f+l*e*g,this._z=d*e*g-l*k*f,this._w=d*e*f-l*k*g):"XZY"===h&&(this._x=l*e*f-d*k*g,this._y=d*k*f-l*e*g,this._z=d*e*g+l*k*f,this._w=d*e*f+l*k*g);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){var d=b/2,c=Math.sin(d);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(d);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,d=b[0];a=b[4];var c=b[8],f=b[1],l=b[5],k=b[9],g=b[2],h=b[6],b=b[10],m=d+
l+b;0<m?(d=.5/Math.sqrt(m+1),this._w=.25/d,this._x=(h-k)*d,this._y=(c-g)*d,this._z=(f-a)*d):d>l&&d>b?(d=2*Math.sqrt(1+d-l-b),this._w=(h-k)/d,this._x=.25*d,this._y=(a+f)/d,this._z=(c+g)/d):l>b?(d=2*Math.sqrt(1+l-d-b),this._w=(c-g)/d,this._x=(a+f)/d,this._y=.25*d,this._z=(k+h)/d):(d=2*Math.sqrt(1+b-d-l),this._w=(f-a)/d,this._x=(c+g)/d,this._y=(k+h)/d,this._z=.25*d);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector3);b=d.dot(e)+
1;1E-6>b?(b=0,Math.abs(d.x)>Math.abs(d.z)?a.set(-d.y,d.x,0):a.set(0,-d.z,d.y)):a.crossVectors(d,e);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},
length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},
multiplyQuaternions:function(a,b){var d=a._x,c=a._y,f=a._z,l=a._w,k=b._x,g=b._y,h=b._z,m=b._w;this._x=d*m+l*k+c*h-f*g;this._y=c*m+l*g+f*k-d*h;this._z=f*m+l*h+d*g-c*k;this._w=l*m-d*k-c*g-f*h;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var d=this._x,c=
this._y,f=this._z,l=this._w,k=l*a._w+d*a._x+c*a._y+f*a._z;0>k?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,k=-k):this.copy(a);if(1<=k)return this._w=l,this._x=d,this._y=c,this._z=f,this;var g=Math.acos(k),h=Math.sqrt(1-k*k);if(.001>Math.abs(h))return this._w=.5*(l+this._w),this._x=.5*(d+this._x),this._y=.5*(c+this._y),this._z=.5*(f+this._z),this;k=Math.sin((1-b)*g)/h;g=Math.sin(b*g)/h;this._w=l*k+this._w*g;this._x=d*k+this._x*g;this._y=c*k+this._y*g;this._z=f*k+this._z*g;this.onChangeCallback();
return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};c.Quaternion.slerp=function(a,b,d,c){return d.copy(a).slerp(b,
c)};c.Vector2=function(a,b){this.x=a||0;this.y=b||0};c.Vector2.prototype={constructor:c.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,
this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=
a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector2,b=new c.Vector2);a.set(d,d);b.set(e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=
Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,d){this.subVectors(b,a).multiplyScalar(d).add(a);return this},equals:function(a){return a.x===
this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,d){void 0===d&&(d=0);b=b*a.itemSize+d;this.x=a.array[b];this.y=a.array[b+1];return this}};c.Vector3=function(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0};c.Vector3.prototype={constructor:c.Vector3,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},setX:function(a){this.x=
a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=
a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==
b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,
b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof c.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new c.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;
return function(b,d){void 0===a&&(a=new c.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,d));return this}}(),applyMatrix3:function(a){var b=this.x,d=this.y,c=this.z;a=a.elements;this.x=a[0]*b+a[3]*d+a[6]*c;this.y=a[1]*b+a[4]*d+a[7]*c;this.z=a[2]*b+a[5]*d+a[8]*c;return this},applyMatrix4:function(a){var b=this.x,d=this.y,c=this.z;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*c+a[12];this.y=a[1]*b+a[5]*d+a[9]*c+a[13];this.z=a[2]*b+a[6]*d+a[10]*c+a[14];return this},applyProjection:function(a){var b=
this.x,d=this.y,c=this.z;a=a.elements;var f=1/(a[3]*b+a[7]*d+a[11]*c+a[15]);this.x=(a[0]*b+a[4]*d+a[8]*c+a[12])*f;this.y=(a[1]*b+a[5]*d+a[9]*c+a[13])*f;this.z=(a[2]*b+a[6]*d+a[10]*c+a[14])*f;return this},applyQuaternion:function(a){var b=this.x,d=this.y,c=this.z,f=a.x,l=a.y,k=a.z;a=a.w;var g=a*b+l*c-k*d,h=a*d+k*b-f*c,m=a*c+f*d-l*b,b=-f*b-l*d-k*c;this.x=g*a+b*-f+h*-k-m*-l;this.y=h*a+b*-l+m*-f-g*-k;this.z=m*a+b*-k+g*-l-h*-f;return this},project:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);
a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,d=this.y,c=this.z;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*c;this.y=a[1]*b+a[5]*d+a[9]*c;this.z=a[2]*b+a[6]*d+a[10]*c;this.normalize();return this},divide:function(a){this.x/=a.x;
this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=
b.z);return this},clampScalar:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector3,b=new c.Vector3);a.set(d,d,d);b.set(e,e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+
Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,d){this.subVectors(b,a).multiplyScalar(d).add(a);return this},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(a,b);var d=this.x,c=this.y,f=this.z;this.x=c*a.z-f*a.y;this.y=f*a.x-d*a.z;this.z=d*a.y-c*a.x;return this},crossVectors:function(a,b){var d=a.x,c=a.y,f=a.z,l=b.x,k=b.y,g=b.z;this.x=c*g-f*k;this.y=f*l-d*g;this.z=d*k-c*l;return this},projectOnVector:function(){var a,b;return function(d){void 0===a&&(a=new c.Vector3);a.copy(d).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new c.Vector3);a.copy(this).projectOnVector(b);
return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new c.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(c.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,d=this.y-a.y;a=this.z-a.z;return b*b+d*d+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,
b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),d=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=d;this.z=
a;return this},setFromMatrixColumn:function(a,b){var d=4*a,c=b.elements;this.x=c[d];this.y=c[d+1];this.z=c[d+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,d){void 0===d&&(d=0);b=b*a.itemSize+d;this.x=a.array[b];this.y=a.array[b+1];this.z=
a.array[b+2];return this}};c.Vector4=function(a,b,d,c){this.x=a||0;this.y=b||0;this.z=d||0;this.w=void 0!==c?c:1};c.Vector4.prototype={constructor:c.Vector4,set:function(a,b,d,c){this.x=a;this.y=b;this.z=d;this.w=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=
b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,
b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,d=this.y,c=this.z,f=this.w;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*c+a[12]*f;this.y=a[1]*b+a[5]*d+a[9]*c+a[13]*f;this.z=a[2]*b+a[6]*d+a[10]*c+a[14]*
f;this.w=a[3]*b+a[7]*d+a[11]*c+a[15]*f;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,d,c;a=a.elements;var f=a[0];c=a[4];var l=a[8],k=a[1],g=a[5],h=a[9];d=a[2];b=a[6];var m=a[10];if(.01>
Math.abs(c-k)&&.01>Math.abs(l-d)&&.01>Math.abs(h-b)){if(.1>Math.abs(c+k)&&.1>Math.abs(l+d)&&.1>Math.abs(h+b)&&.1>Math.abs(f+g+m-3))return this.set(1,0,0,0),this;a=Math.PI;f=(f+1)/2;g=(g+1)/2;m=(m+1)/2;c=(c+k)/4;l=(l+d)/4;h=(h+b)/4;f>g&&f>m?.01>f?(b=0,c=d=.707106781):(b=Math.sqrt(f),d=c/b,c=l/b):g>m?.01>g?(b=.707106781,d=0,c=.707106781):(d=Math.sqrt(g),b=c/d,c=h/d):.01>m?(d=b=.707106781,c=0):(c=Math.sqrt(m),b=l/c,d=h/c);this.set(b,d,c,a);return this}a=Math.sqrt((b-h)*(b-h)+(l-d)*(l-d)+(k-c)*(k-c));
.001>Math.abs(a)&&(a=1);this.x=(b-h)/a;this.y=(l-d)/a;this.z=(k-c)/a;this.w=Math.acos((f+g+m-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=
a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(d,e){void 0===a&&(a=new c.Vector4,b=new c.Vector4);a.set(d,d,d,d);b.set(e,e,e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},
round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*
a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=
(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,d){this.subVectors(b,a).multiplyScalar(d).add(a);return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,
b,d){void 0===d&&(d=0);b=b*a.itemSize+d;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this}};c.Euler=function(a,b,d,e){this._x=a||0;this._y=b||0;this._z=d||0;this._order=e||c.Euler.DefaultOrder};c.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");c.Euler.DefaultOrder="XYZ";c.Euler.prototype={constructor:c.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},
set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,d,c){this._x=a;this._y=b;this._z=d;this._order=c||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,d){var e=c.Math.clamp,f=a.elements;
a=f[0];var l=f[4],k=f[8],g=f[1],h=f[5],m=f[9],p=f[2],t=f[6],f=f[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(e(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-m,f),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(t,h),this._z=0)):"YXZ"===b?(this._x=Math.asin(-e(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(k,f),this._z=Math.atan2(g,h)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(e(t,-1,1)),.99999>Math.abs(t)?(this._y=Math.atan2(-p,f),this._z=Math.atan2(-l,h)):(this._y=
0,this._z=Math.atan2(g,a))):"ZYX"===b?(this._y=Math.asin(-e(p,-1,1)),.99999>Math.abs(p)?(this._x=Math.atan2(t,f),this._z=Math.atan2(g,a)):(this._x=0,this._z=Math.atan2(-l,h))):"YZX"===b?(this._z=Math.asin(e(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-m,h),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(k,f))):"XZY"===b?(this._z=Math.asin(-e(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(t,h),this._y=Math.atan2(k,a)):(this._x=Math.atan2(-m,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+
b);this._order=b;if(!1!==d)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeRotationFromQuaternion(b);this.setFromRotationMatrix(a,d,e);return this}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new c.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===
this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new c.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};c.Matrix3=function(){this.elements=
new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};c.Matrix3.prototype={constructor:c.Matrix3,set:function(a,b,d,c,f,l,k,g,h){var m=this.elements;m[0]=a;m[3]=b;m[6]=d;m[1]=c;m[4]=f;m[7]=l;m[2]=k;m[5]=g;m[8]=h;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],
a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);
void 0===d&&(d=0);void 0===e&&(e=b.length);for(var f=0;f<e;f+=3,d+=3)a.fromArray(b,d),a.applyMatrix3(this),a.toArray(b,d);return b}}(),applyToBuffer:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);void 0===d&&(d=0);void 0===e&&(e=b.length/b.itemSize);for(var f=0;f<e;f++,d++)a.x=b.getX(d),a.y=b.getY(d),a.z=b.getZ(d),a.applyMatrix3(this),b.setXYZ(a.x,a.y,a.z);return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=
a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],d=a[1],c=a[2],f=a[3],l=a[4],k=a[5],g=a[6],h=a[7],a=a[8];return b*l*a-b*k*h-d*f*a+d*k*g+c*f*h-c*l*g},getInverse:function(a,b){var d=a.elements,c=this.elements;c[0]=d[10]*d[5]-d[6]*d[9];c[1]=-d[10]*d[1]+d[2]*d[9];c[2]=d[6]*d[1]-d[2]*d[5];c[3]=-d[10]*d[4]+d[6]*d[8];c[4]=d[10]*d[0]-d[2]*d[8];c[5]=-d[6]*d[0]+d[2]*d[4];c[6]=d[9]*d[4]-d[5]*d[8];c[7]=-d[9]*d[0]+d[1]*d[8];c[8]=d[5]*d[0]-d[1]*d[4];d=d[0]*c[0]+d[1]*c[3]+d[2]*c[6];if(0===
d){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/d);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+5]=d[5];a[b+6]=d[6];a[b+7]=d[7];
a[b+8]=d[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]}};c.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&
console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};c.Matrix4.prototype={constructor:c.Matrix4,set:function(a,b,d,c,f,l,k,g,h,m,p,t,n,r,s,q){var B=this.elements;B[0]=a;B[4]=b;B[8]=d;B[12]=c;B[1]=f;B[5]=l;B[9]=k;B[13]=g;B[2]=h;B[6]=m;B[10]=p;B[14]=t;B[3]=n;B[7]=r;B[11]=s;B[15]=q;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new c.Matrix4).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);
return this},extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,d){var c=this.elements;a.set(c[0],c[1],c[2]);b.set(c[4],c[5],c[6]);d.set(c[8],c[9],c[10]);return this},makeBasis:function(a,b,d){this.set(a.x,b.x,d.x,0,a.y,b.y,d.y,0,a.z,b.z,d.z,0,0,0,0,1);return this},extractRotation:function(){var a;
return function(b){void 0===a&&(a=new c.Vector3);var d=this.elements;b=b.elements;var e=1/a.set(b[0],b[1],b[2]).length(),f=1/a.set(b[4],b[5],b[6]).length(),l=1/a.set(b[8],b[9],b[10]).length();d[0]=b[0]*e;d[1]=b[1]*e;d[2]=b[2]*e;d[4]=b[4]*f;d[5]=b[5]*f;d[6]=b[6]*f;d[8]=b[8]*l;d[9]=b[9]*l;d[10]=b[10]*l;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof c.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=
this.elements,d=a.x,e=a.y,f=a.z,l=Math.cos(d),d=Math.sin(d),k=Math.cos(e),e=Math.sin(e),g=Math.cos(f),f=Math.sin(f);if("XYZ"===a.order){a=l*g;var h=l*f,m=d*g,p=d*f;b[0]=k*g;b[4]=-k*f;b[8]=e;b[1]=h+m*e;b[5]=a-p*e;b[9]=-d*k;b[2]=p-a*e;b[6]=m+h*e;b[10]=l*k}else"YXZ"===a.order?(a=k*g,h=k*f,m=e*g,p=e*f,b[0]=a+p*d,b[4]=m*d-h,b[8]=l*e,b[1]=l*f,b[5]=l*g,b[9]=-d,b[2]=h*d-m,b[6]=p+a*d,b[10]=l*k):"ZXY"===a.order?(a=k*g,h=k*f,m=e*g,p=e*f,b[0]=a-p*d,b[4]=-l*f,b[8]=m+h*d,b[1]=h+m*d,b[5]=l*g,b[9]=p-a*d,b[2]=-l*
e,b[6]=d,b[10]=l*k):"ZYX"===a.order?(a=l*g,h=l*f,m=d*g,p=d*f,b[0]=k*g,b[4]=m*e-h,b[8]=a*e+p,b[1]=k*f,b[5]=p*e+a,b[9]=h*e-m,b[2]=-e,b[6]=d*k,b[10]=l*k):"YZX"===a.order?(a=l*k,h=l*e,m=d*k,p=d*e,b[0]=k*g,b[4]=p-a*f,b[8]=m*f+h,b[1]=f,b[5]=l*g,b[9]=-d*g,b[2]=-e*g,b[6]=h*f+m,b[10]=a-p*f):"XZY"===a.order&&(a=l*k,h=l*e,m=d*k,p=d*e,b[0]=k*g,b[4]=-f,b[8]=e*g,b[1]=a*f+p,b[5]=l*g,b[9]=h*f-m,b[2]=m*f-h,b[6]=d*g,b[10]=p*f+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,d=a.x,c=a.y,f=a.z,l=a.w,k=d+d,g=c+c,h=f+f;a=d*k;var m=d*g,d=d*h,p=c*g,c=c*h,f=f*h,k=l*k,g=l*g,l=l*h;b[0]=1-(p+f);b[4]=m-l;b[8]=d+g;b[1]=m+l;b[5]=1-(a+f);b[9]=c-k;b[2]=d-g;b[6]=c+k;b[10]=1-(a+p);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,d;return function(e,f,l){void 0===a&&(a=new c.Vector3);void 0===b&&(b=new c.Vector3);void 0===d&&(d=new c.Vector3);
var k=this.elements;d.subVectors(e,f).normalize();0===d.length()&&(d.z=1);a.crossVectors(l,d).normalize();0===a.length()&&(d.x+=1E-4,a.crossVectors(l,d).normalize());b.crossVectors(d,a);k[0]=a.x;k[4]=b.x;k[8]=d.x;k[1]=a.y;k[5]=b.y;k[9]=d.y;k[2]=a.z;k[6]=b.z;k[10]=d.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,
b){var d=a.elements,c=b.elements,f=this.elements,l=d[0],k=d[4],g=d[8],h=d[12],m=d[1],p=d[5],t=d[9],n=d[13],r=d[2],s=d[6],q=d[10],B=d[14],z=d[3],v=d[7],I=d[11],d=d[15],y=c[0],G=c[4],S=c[8],H=c[12],D=c[1],E=c[5],N=c[9],K=c[13],O=c[2],M=c[6],C=c[10],J=c[14],U=c[3],X=c[7],V=c[11],c=c[15];f[0]=l*y+k*D+g*O+h*U;f[4]=l*G+k*E+g*M+h*X;f[8]=l*S+k*N+g*C+h*V;f[12]=l*H+k*K+g*J+h*c;f[1]=m*y+p*D+t*O+n*U;f[5]=m*G+p*E+t*M+n*X;f[9]=m*S+p*N+t*C+n*V;f[13]=m*H+p*K+t*J+n*c;f[2]=r*y+s*D+q*O+B*U;f[6]=r*G+s*E+q*M+B*X;f[10]=
r*S+s*N+q*C+B*V;f[14]=r*H+s*K+q*J+B*c;f[3]=z*y+v*D+I*O+d*U;f[7]=z*G+v*E+I*M+d*X;f[11]=z*S+v*N+I*C+d*V;f[15]=z*H+v*K+I*J+d*c;return this},multiplyToArray:function(a,b,d){var c=this.elements;this.multiplyMatrices(a,b);d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[3];d[4]=c[4];d[5]=c[5];d[6]=c[6];d[7]=c[7];d[8]=c[8];d[9]=c[9];d[10]=c[10];d[11]=c[11];d[12]=c[12];d[13]=c[13];d[14]=c[14];d[15]=c[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);void 0===d&&(d=0);void 0===e&&(e=b.length);for(var f=0;f<e;f+=3,d+=3)a.fromArray(b,d),a.applyMatrix4(this),a.toArray(b,d);return b}}(),applyToBuffer:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Vector3);void 0===d&&(d=0);void 0===e&&(e=b.length/b.itemSize);for(var f=0;f<e;f++,d++)a.x=b.getX(d),a.y=b.getY(d),a.z=b.getZ(d),a.applyMatrix4(this),b.setXYZ(a.x,a.y,
a.z);return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],d=a[4],c=a[8],f=a[12],l=a[1],k=a[5],g=a[9],h=a[13],m=a[2],p=a[6],t=a[10],n=a[14];return a[3]*(+f*g*p-c*h*p-f*
k*t+d*h*t+c*k*n-d*g*n)+a[7]*(+b*g*n-b*h*t+f*l*t-c*l*n+c*h*m-f*g*m)+a[11]*(+b*h*p-b*k*n-f*l*p+d*l*n+f*k*m-d*h*m)+a[15]*(-c*k*m-b*g*p+b*k*t+c*l*p-d*l*t+d*g*m)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){var d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+5]=d[5];a[b+6]=d[6];
a[b+7]=d[7];a[b+8]=d[8];a[b+9]=d[9];a[b+10]=d[10];a[b+11]=d[11];a[b+12]=d[12];a[b+13]=d[13];a[b+14]=d[14];a[b+15]=d[15];return a},getPosition:function(){var a;return function(){void 0===a&&(a=new c.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var d=this.elements,
c=a.elements,f=c[0],l=c[4],k=c[8],g=c[12],h=c[1],m=c[5],p=c[9],t=c[13],n=c[2],r=c[6],s=c[10],q=c[14],B=c[3],z=c[7],v=c[11],c=c[15];d[0]=p*q*z-t*s*z+t*r*v-m*q*v-p*r*c+m*s*c;d[4]=g*s*z-k*q*z-g*r*v+l*q*v+k*r*c-l*s*c;d[8]=k*t*z-g*p*z+g*m*v-l*t*v-k*m*c+l*p*c;d[12]=g*p*r-k*t*r-g*m*s+l*t*s+k*m*q-l*p*q;d[1]=t*s*B-p*q*B-t*n*v+h*q*v+p*n*c-h*s*c;d[5]=k*q*B-g*s*B+g*n*v-f*q*v-k*n*c+f*s*c;d[9]=g*p*B-k*t*B-g*h*v+f*t*v+k*h*c-f*p*c;d[13]=k*t*n-g*p*n+g*h*s-f*t*s-k*h*q+f*p*q;d[2]=m*q*B-t*r*B+t*n*z-h*q*z-m*n*c+h*r*c;
d[6]=g*r*B-l*q*B-g*n*z+f*q*z+l*n*c-f*r*c;d[10]=l*t*B-g*m*B+g*h*z-f*t*z-l*h*c+f*m*c;d[14]=g*m*n-l*t*n-g*h*r+f*t*r+l*h*q-f*m*q;d[3]=p*r*B-m*s*B-p*n*z+h*s*z+m*n*v-h*r*v;d[7]=l*s*B-k*r*B+k*n*z-f*s*z-l*n*v+f*r*v;d[11]=k*m*B-l*p*B-k*h*z+f*p*z+l*h*v-f*m*v;d[15]=l*p*n-k*m*n+k*h*r-f*p*r-l*h*s+f*m*s;d=f*d[0]+h*d[4]+n*d[8]+B*d[12];if(0===d){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();
return this}this.multiplyScalar(1/d);return this},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(a){var b=this.elements,
d=a.x,c=a.y;a=a.z;b[0]*=d;b[4]*=c;b[8]*=a;b[1]*=d;b[5]*=c;b[9]*=a;b[2]*=d;b[6]*=c;b[10]*=a;b[3]*=d;b[7]*=c;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,d){this.set(1,0,0,a,0,1,0,b,0,0,1,d,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},
makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var d=Math.cos(b),c=Math.sin(b),f=1-d,l=a.x,k=a.y,g=a.z,h=f*l,m=f*k;this.set(h*l+d,h*k-c*g,h*g+c*k,0,h*k+c*g,m*k+d,m*g-c*l,0,h*g-c*k,m*g+c*l,f*g*g+d,0,0,0,0,1);return this},makeScale:function(a,b,d){this.set(a,0,0,0,0,b,0,0,0,0,d,0,0,0,0,1);return this},
compose:function(a,b,d){this.makeRotationFromQuaternion(b);this.scale(d);this.setPosition(a);return this},decompose:function(){var a,b;return function(d,e,f){void 0===a&&(a=new c.Vector3);void 0===b&&(b=new c.Matrix4);var l=this.elements,k=a.set(l[0],l[1],l[2]).length(),g=a.set(l[4],l[5],l[6]).length(),h=a.set(l[8],l[9],l[10]).length();0>this.determinant()&&(k=-k);d.x=l[12];d.y=l[13];d.z=l[14];b.elements.set(this.elements);d=1/k;var l=1/g,m=1/h;b.elements[0]*=d;b.elements[1]*=d;b.elements[2]*=d;b.elements[4]*=
l;b.elements[5]*=l;b.elements[6]*=l;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;e.setFromRotationMatrix(b);f.x=k;f.y=g;f.z=h;return this}}(),makeFrustum:function(a,b,d,c,f,l){var k=this.elements;k[0]=2*f/(b-a);k[4]=0;k[8]=(b+a)/(b-a);k[12]=0;k[1]=0;k[5]=2*f/(c-d);k[9]=(c+d)/(c-d);k[13]=0;k[2]=0;k[6]=0;k[10]=-(l+f)/(l-f);k[14]=-2*l*f/(l-f);k[3]=0;k[7]=0;k[11]=-1;k[15]=0;return this},makePerspective:function(a,b,d,e){a=d*Math.tan(c.Math.degToRad(.5*a));var f=-a;return this.makeFrustum(f*b,a*
b,f,a,d,e)},makeOrthographic:function(a,b,d,c,f,l){var k=this.elements,g=b-a,h=d-c,m=l-f;k[0]=2/g;k[4]=0;k[8]=0;k[12]=-((b+a)/g);k[1]=0;k[5]=2/h;k[9]=0;k[13]=-((d+c)/h);k[2]=0;k[6]=0;k[10]=-2/m;k[14]=-((l+f)/m);k[3]=0;k[7]=0;k[11]=0;k[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],
a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]}};c.Ray=function(a,b){this.origin=void 0!==a?a:new c.Vector3;this.direction=void 0!==b?b:new c.Vector3};c.Ray.prototype={constructor:c.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new c.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},
recast:function(){var a=new c.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var d=b||new c.Vector3;d.subVectors(a,this.origin);var e=d.dot(this.direction);return 0>e?d.copy(this.origin):d.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new c.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);
if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Vector3;return function(c,f,l,k){a.copy(c).add(f).multiplyScalar(.5);b.copy(f).sub(c).normalize();d.copy(this.origin).sub(a);var g=.5*c.distanceTo(f),h=-this.direction.dot(b),m=d.dot(this.direction),p=-d.dot(b),t=d.lengthSq(),n=Math.abs(1-h*h),r;0<n?(c=h*p-m,f=h*m-p,r=g*n,0<=c?f>=-r?f<=
r?(g=1/n,c*=g,f*=g,h=c*(c+h*f+2*m)+f*(h*c+f+2*p)+t):(f=g,c=Math.max(0,-(h*f+m)),h=-c*c+f*(f+2*p)+t):(f=-g,c=Math.max(0,-(h*f+m)),h=-c*c+f*(f+2*p)+t):f<=-r?(c=Math.max(0,-(-h*g+m)),f=0<c?-g:Math.min(Math.max(-g,-p),g),h=-c*c+f*(f+2*p)+t):f<=r?(c=0,f=Math.min(Math.max(-g,-p),g),h=f*(f+2*p)+t):(c=Math.max(0,-(h*g+m)),f=0<c?g:Math.min(Math.max(-g,-p),g),h=-c*c+f*(f+2*p)+t)):(f=0<h?-g:g,c=Math.max(0,-(h*f+m)),h=-c*c+f*(f+2*p)+t);l&&l.copy(this.direction).multiplyScalar(c).add(this.origin);k&&k.copy(b).multiplyScalar(f).add(a);
return h}}(),isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=new c.Vector3;return function(b,c){a.subVectors(b.center,this.origin);var e=a.dot(this.direction),f=a.dot(a)-e*e,l=b.radius*b.radius;if(f>l)return null;l=Math.sqrt(l-f);f=e-l;e+=l;return 0>f&&0>e?null:0>f?this.at(e,c):this.at(f,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=
a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new c.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,e,f,l,k;e=1/this.direction.x;l=1/this.direction.y;k=1/this.direction.z;var g=this.origin;0<=e?(c=(a.min.x-g.x)*e,e*=
a.max.x-g.x):(c=(a.max.x-g.x)*e,e*=a.min.x-g.x);0<=l?(f=(a.min.y-g.y)*l,l*=a.max.y-g.y):(f=(a.max.y-g.y)*l,l*=a.min.y-g.y);if(c>l||f>e)return null;if(f>c||c!==c)c=f;if(l<e||e!==e)e=l;0<=k?(f=(a.min.z-g.z)*k,k*=a.max.z-g.z):(f=(a.max.z-g.z)*k,k*=a.min.z-g.z);if(c>k||f>e)return null;if(f>c||c!==c)c=f;if(k<e||e!==e)e=k;return 0>e?null:this.at(0<=c?c:e,b)},intersectTriangle:function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Vector3,e=new c.Vector3;return function(c,l,g,h,p){b.subVectors(l,c);d.subVectors(g,
c);e.crossVectors(b,d);l=this.direction.dot(e);if(0<l){if(h)return null;h=1}else if(0>l)h=-1,l=-l;else return null;a.subVectors(this.origin,c);c=h*this.direction.dot(d.crossVectors(a,d));if(0>c)return null;g=h*this.direction.dot(b.cross(a));if(0>g||c+g>l)return null;c=-h*a.dot(e);return 0>c?null:this.at(c/l,p)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&
a.direction.equals(this.direction)}};c.Box2=function(a,b){this.min=void 0!==a?a:new c.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new c.Vector2(-Infinity,-Infinity)};c.Box2.prototype={constructor:c.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new c.Vector2;return function(b,c){var e=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(e);
this.max.copy(b).add(e);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new c.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new c.Vector2).subVectors(this.max,this.min)},
expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new c.Vector2).set((a.x-
this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new c.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new c.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);
this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};c.Box3=function(a,b){this.min=void 0!==a?a:new c.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new c.Vector3(-Infinity,-Infinity,-Infinity)};c.Box3.prototype={constructor:c.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);
return this},setFromCenterAndSize:function(){var a=new c.Vector3;return function(b,c){var e=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(e);this.max.copy(b).add(e);return this}}(),setFromObject:function(){var a=new c.Vector3;return function(b){var d=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){var f=b.geometry;if(void 0!==f)if(f instanceof c.Geometry)for(var l=f.vertices,f=0,g=l.length;f<g;f++)a.copy(l[f]),a.applyMatrix4(b.matrixWorld),d.expandByPoint(a);else if(f instanceof
c.BufferGeometry&&void 0!==f.attributes.position)for(l=f.attributes.position.array,f=0,g=l.length;f<g;f+=3)a.set(l[f],l[f+1],l[f+2]),a.applyMatrix4(b.matrixWorld),d.expandByPoint(a)});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<
this.min.y||this.max.z<this.min.z},center:function(a){return(a||new c.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new c.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||
a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new c.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new c.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new c.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new c.Vector3;return function(b){b=b||new c.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},
union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new c.Vector3,new c.Vector3,new c.Vector3,new c.Vector3,new c.Vector3,new c.Vector3,new c.Vector3,new c.Vector3];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,
this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};c.Sphere=function(a,b){this.center=void 0!==a?a:new c.Vector3;this.radius=void 0!==b?b:0};c.Sphere.prototype=
{constructor:c.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new c.Box3;return function(b,c){var e=this.center;void 0!==c?e.copy(c):a.setFromPoints(b).center(e);for(var f=0,l=0,g=b.length;l<g;l++)f=Math.max(f,e.distanceToSquared(b[l]));this.radius=Math.sqrt(f);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},
containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var d=this.center.distanceToSquared(a),e=b||new c.Vector3;e.copy(a);d>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center));return e},getBoundingBox:function(a){a=
a||new c.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}};c.Plane=function(a,b){this.normal=void 0!==a?a:new c.Vector3(1,0,0);this.constant=void 0!==b?b:0};c.Plane.prototype={constructor:c.Plane,set:function(a,b){this.normal.copy(a);this.constant=
b;return this},setComponents:function(a,b,c,e){this.normal.set(a,b,c);this.constant=e;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new c.Vector3,b=new c.Vector3;return function(c,e,f){e=a.subVectors(f,e).cross(b.subVectors(c,e)).normalize();this.setFromNormalAndCoplanarPoint(e,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);
this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var d=this.distanceToPoint(a);return(b||
new c.Vector3).copy(this.normal).multiplyScalar(d)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new c.Vector3;return function(b,d){var e=d||new c.Vector3,f=b.delta(a),l=this.normal.dot(f);if(0===l){if(0===this.distanceToPoint(b.start))return e.copy(b.start)}else return l=-(b.start.dot(this.normal)+this.constant)/l,0>l||1<l?void 0:e.copy(f).multiplyScalar(l).add(b.start)}}(),coplanarPoint:function(a){return(a||
new c.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Matrix3;return function(c,f){var l=f||d.getNormalMatrix(c),l=a.copy(this.normal).applyMatrix3(l),g=this.coplanarPoint(b);g.applyMatrix4(c);this.setFromNormalAndCoplanarPoint(l,g);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};c.Frustum=function(a,
b,d,e,f,l){this.planes=[void 0!==a?a:new c.Plane,void 0!==b?b:new c.Plane,void 0!==d?d:new c.Plane,void 0!==e?e:new c.Plane,void 0!==f?f:new c.Plane,void 0!==l?l:new c.Plane]};c.Frustum.prototype={constructor:c.Frustum,set:function(a,b,c,e,f,l){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(e);g[4].copy(f);g[5].copy(l);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=
this.planes,c=a.elements;a=c[0];var e=c[1],f=c[2],l=c[3],g=c[4],h=c[5],p=c[6],m=c[7],q=c[8],t=c[9],n=c[10],r=c[11],s=c[12],x=c[13],B=c[14],c=c[15];b[0].setComponents(l-a,m-g,r-q,c-s).normalize();b[1].setComponents(l+a,m+g,r+q,c+s).normalize();b[2].setComponents(l+e,m+h,r+t,c+x).normalize();b[3].setComponents(l-e,m-h,r-t,c-x).normalize();b[4].setComponents(l-f,m-p,r-n,c-B).normalize();b[5].setComponents(l+f,m+p,r+n,c+B).normalize();return this},intersectsObject:function(){var a=new c.Sphere;return function(b){var c=
b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var e=0;6>e;e++)if(b[e].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new c.Vector3,b=new c.Vector3;return function(c){for(var e=this.planes,f=0;6>f;f++){var l=e[f];a.x=0<l.normal.x?c.min.x:c.max.x;b.x=0<l.normal.x?c.max.x:c.min.x;a.y=0<l.normal.y?c.min.y:
c.max.y;b.y=0<l.normal.y?c.max.y:c.min.y;a.z=0<l.normal.z?c.min.z:c.max.z;b.z=0<l.normal.z?c.max.z:c.min.z;var g=l.distanceToPoint(a),l=l.distanceToPoint(b);if(0>g&&0>l)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};c.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,e;return function(){for(var f=0;36>f;f++)8===f||13===f||18===f||23===f?b[f]=
"-":14===f?b[f]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),e=c&15,c>>=4,b[f]=a[19===f?e&3|8:e]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,e,f){return e+(a-b)*(f-e)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*
(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=
a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};c.Triangle=function(a,b,d){this.a=void 0!==a?a:new c.Vector3;this.b=void 0!==b?b:new c.Vector3;this.c=void 0!==d?d:new c.Vector3};c.Triangle.normal=function(){var a=new c.Vector3;return function(b,d,e,f){f=f||new c.Vector3;f.subVectors(e,d);a.subVectors(b,d);f.cross(a);b=f.lengthSq();return 0<b?f.multiplyScalar(1/Math.sqrt(b)):f.set(0,0,0)}}();c.Triangle.barycoordFromPoint=function(){var a=new c.Vector3,b=new c.Vector3,d=new c.Vector3;return function(e,
f,l,g,h){a.subVectors(g,f);b.subVectors(l,f);d.subVectors(e,f);e=a.dot(a);f=a.dot(b);l=a.dot(d);var p=b.dot(b);g=b.dot(d);var m=e*p-f*f;h=h||new c.Vector3;if(0===m)return h.set(-2,-1,-1);m=1/m;p=(p*l-f*g)*m;e=(e*g-f*l)*m;return h.set(1-p-e,e,p)}}();c.Triangle.containsPoint=function(){var a=new c.Vector3;return function(b,d,e,f){b=c.Triangle.barycoordFromPoint(b,d,e,f,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();c.Triangle.prototype={constructor:c.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);
this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,e){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[e]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new c.Vector3,b=new c.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new c.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/
3)},normal:function(a){return c.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new c.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return c.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return c.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};c.EventDispatcher=function(){};c.EventDispatcher.prototype={constructor:c.EventDispatcher,
apply:function(a){a.addEventListener=c.EventDispatcher.prototype.addEventListener;a.hasEventListener=c.EventDispatcher.prototype.hasEventListener;a.removeEventListener=c.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=c.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;
var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var e=c.indexOf(b);-1!==e&&c.splice(e,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],e=b.length,f=0;f<e;f++)c[f]=b[f];for(f=0;f<e;f++)c[f].call(this,a)}}}};(function(a){function b(a,b){return a.distance-b.distance}a.Raycaster=function(b,c,d,
g){this.ray=new a.Ray(b,c);this.near=d||0;this.far=g||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};var c=function(a,b,l,g){if(!1!==a.visible&&(a.raycast(b,l),!0===g)){a=a.children;g=0;for(var h=a.length;g<h;g++)c(a[g],b,l,!0)}};a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,
b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,-1).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,f){var g=[];c(a,this,g,f);g.sort(b);return g},intersectObjects:function(a,
f){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var k=0,h=a.length;k<h;k++)c(a[k],this,g,f);g.sort(b);return g}}})(c);c.Object3D=function(){Object.defineProperty(this,"id",{value:c.Object3DIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=c.Object3D.DefaultUp.clone();var a=new c.Vector3,b=new c.Euler,d=new c.Quaternion,e=new c.Vector3(1,1,1);b.onChange(function(){d.setFromEuler(b,
!1)});d.onChange(function(){b.setFromQuaternion(d,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:d},scale:{enumerable:!0,value:e},modelViewMatrix:{value:new c.Matrix4},normalMatrix:{value:new c.Matrix3}});this.rotationAutoUpdate=!0;this.matrix=new c.Matrix4;this.matrixWorld=new c.Matrix4;this.matrixAutoUpdate=c.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=
this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};c.Object3D.DefaultUp=new c.Vector3(0,1,0);c.Object3D.DefaultMatrixAutoUpdate=!0;c.Object3D.prototype={constructor:c.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set renderDepth(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,
!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new c.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new c.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new c.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=
new c.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new c.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new c.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,
b)}}(),translateY:function(){var a=new c.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new c.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new c.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new c.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),
add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof c.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);
b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,e=this.children.length;c<e;c++){var f=
this.children[c].getObjectByProperty(a,b);if(void 0!==f)return f}},getWorldPosition:function(a){a=a||new c.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new c.Vector3,b=new c.Vector3;return function(d){d=d||new c.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,d,b);return d}}(),getWorldRotation:function(){var a=new c.Quaternion;return function(b){b=b||new c.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,
this.rotation.order,!1)}}(),getWorldScale:function(){var a=new c.Vector3,b=new c.Quaternion;return function(d){d=d||new c.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,d);return d}}(),getWorldDirection:function(){var a=new c.Quaternion;return function(b){b=b||new c.Vector3;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,e=b.length;c<e;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==
this.visible){a(this);for(var b=this.children,c=0,e=b.length;c<e;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a,e={},f={object:e};c&&(a={geometries:{},materials:{},textures:{},images:{}},f.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);"{}"!==JSON.stringify(this.userData)&&
(e.userData=this.userData);!0!==this.visible&&(e.visible=this.visible);e.matrix=this.matrix.toArray();if(0<this.children.length){e.children=[];for(var g=0;g<this.children.length;g++)e.children.push(this.children[g].toJSON(a).object)}c&&(c=b(a.geometries),e=b(a.materials),g=b(a.textures),a=b(a.images),0<c.length&&(f.geometries=c),0<e.length&&(f.materials=e),0<g.length&&(f.textures=g),0<a.length&&(f.images=a));return f},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===
b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.rotationAutoUpdate=a.rotationAutoUpdate;this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=
JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}};c.EventDispatcher.prototype.apply(c.Object3D.prototype);c.Object3DIdCount=0;c.Face3=function(a,b,d,e,f,g){this.a=a;this.b=b;this.c=d;this.normal=e instanceof c.Vector3?e:new c.Vector3;this.vertexNormals=Array.isArray(e)?e:[];this.color=f instanceof c.Color?f:new c.Color;this.vertexColors=Array.isArray(f)?f:[];this.materialIndex=void 0!==g?g:0};c.Face3.prototype={constructor:c.Face3,
clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};c.Face4=function(a,b,d,e,f,g,k){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");
return new c.Face3(a,b,d,f,g,k)};c.BufferAttribute=function(a,b){this.uuid=c.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};c.BufferAttribute.prototype={constructor:c.BufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=
a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var e=0,f=this.itemSize;e<f;e++)this.array[a+e]=b.array[c+e];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",e),
g=new c.Color);b[d++]=g.r;b[d++]=g.g;b[d++]=g.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,e=0,f=a.length;e<f;e++){var g=a[e];b[c++]=g.a;b[c++]=g.b;b[c++]=g.c}return this},copyVector2sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",e),g=new c.Vector2);b[d++]=g.x;b[d++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<
f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",e),g=new c.Vector3);b[d++]=g.x;b[d++]=g.y;b[d++]=g.z}return this},copyVector4sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",e),g=new c.Vector4);b[d++]=g.x;b[d++]=g.y;b[d++]=g.z;b[d++]=g.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},
getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;
this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=e;return this},setXYZW:function(a,b,c,e,f){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=e;this.array[a+3]=f;return this},clone:function(){return(new this.constructor).copy(this)}};c.Int8Attribute=function(a,b){return new c.BufferAttribute(new Int8Array(a),b)};c.Uint8Attribute=function(a,b){return new c.BufferAttribute(new Uint8Array(a),
b)};c.Uint8ClampedAttribute=function(a,b){return new c.BufferAttribute(new Uint8ClampedArray(a),b)};c.Int16Attribute=function(a,b){return new c.BufferAttribute(new Int16Array(a),b)};c.Uint16Attribute=function(a,b){return new c.BufferAttribute(new Uint16Array(a),b)};c.Int32Attribute=function(a,b){return new c.BufferAttribute(new Int32Array(a),b)};c.Uint32Attribute=function(a,b){return new c.BufferAttribute(new Uint32Array(a),b)};c.Float32Attribute=function(a,b){return new c.BufferAttribute(new Float32Array(a),
b)};c.Float64Attribute=function(a,b){return new c.BufferAttribute(new Float64Array(a),b)};c.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new c.BufferAttribute(a,b)).setDynamic(!0)};c.Geometry=function(){Object.defineProperty(this,"id",{value:c.GeometryIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=
[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1};c.Geometry.prototype={constructor:c.Geometry,applyMatrix:function(a){for(var b=(new c.Matrix3).getNormalMatrix(a),d=0,e=this.vertices.length;d<e;d++)this.vertices[d].applyMatrix4(a);
d=0;for(e=this.faces.length;d<e;d++){a=this.faces[d];a.normal.applyMatrix3(b).normalize();for(var f=0,g=a.vertexNormals.length;f<g;f++)a.vertexNormals[f].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0},rotateX:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===
a&&(a=new c.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeTranslation(b,d,e);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeScale(b,d,e);this.applyMatrix(a);return this}}(),lookAt:function(){var a;
return function(b){void 0===a&&(a=new c.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){var b=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,k=void 0!==e.color?e.color.array:void 0,h=void 0!==e.uv?e.uv.array:void 0,p=void 0!==e.uv2?e.uv2.array:void 0;void 0!==p&&(this.faceVertexUvs[1]=[]);for(var m=[],q=[],t=[],n=e=0;e<f.length;e+=3,n+=2)b.vertices.push(new c.Vector3(f[e],f[e+
1],f[e+2])),void 0!==g&&m.push(new c.Vector3(g[e],g[e+1],g[e+2])),void 0!==k&&b.colors.push(new c.Color(k[e],k[e+1],k[e+2])),void 0!==h&&q.push(new c.Vector2(h[n],h[n+1])),void 0!==p&&t.push(new c.Vector2(p[n],p[n+1]));var r=function(a,d,e){var f=void 0!==g?[m[a].clone(),m[d].clone(),m[e].clone()]:[],n=void 0!==k?[b.colors[a].clone(),b.colors[d].clone(),b.colors[e].clone()]:[],f=new c.Face3(a,d,e,f,n);b.faces.push(f);void 0!==h&&b.faceVertexUvs[0].push([q[a].clone(),q[d].clone(),q[e].clone()]);void 0!==
p&&b.faceVertexUvs[1].push([t[a].clone(),t[d].clone(),t[e].clone()])};if(void 0!==d)if(f=a.groups,0<f.length)for(e=0;e<f.length;e++)for(var n=f[e],s=n.start,x=n.count,n=s,s=s+x;n<s;n+=3)r(d[n],d[n+1],d[n+2]);else for(e=0;e<d.length;e+=3)r(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)r(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();
var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,d=new c.Matrix4;d.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(d);return this},computeFaceNormals:function(){for(var a=new c.Vector3,b=new c.Vector3,d=0,e=this.faces.length;d<e;d++){var f=this.faces[d],g=this.vertices[f.a],k=this.vertices[f.b];a.subVectors(this.vertices[f.c],
k);b.subVectors(g,k);a.cross(b);a.normalize();f.normal.copy(a)}},computeVertexNormals:function(a){var b,d,e;e=Array(this.vertices.length);b=0;for(d=this.vertices.length;b<d;b++)e[b]=new c.Vector3;if(a){var f,g,k,h=new c.Vector3,p=new c.Vector3;a=0;for(b=this.faces.length;a<b;a++)d=this.faces[a],f=this.vertices[d.a],g=this.vertices[d.b],k=this.vertices[d.c],h.subVectors(k,g),p.subVectors(f,g),h.cross(p),e[d.a].add(h),e[d.b].add(h),e[d.c].add(h)}else for(a=0,b=this.faces.length;a<b;a++)d=this.faces[a],
e[d.a].add(d.normal),e[d.b].add(d.normal),e[d.c].add(d.normal);b=0;for(d=this.vertices.length;b<d;b++)e[b].normalize();a=0;for(b=this.faces.length;a<b;a++)d=this.faces[a],f=d.vertexNormals,3===f.length?(f[0].copy(e[d.a]),f[1].copy(e[d.b]),f[2].copy(e[d.c])):(f[0]=e[d.a].clone(),f[1]=e[d.b].clone(),f[2]=e[d.c].clone())},computeMorphNormals:function(){var a,b,d,e,f;d=0;for(e=this.faces.length;d<e;d++)for(f=this.faces[d],f.__originalFaceNormal?f.__originalFaceNormal.copy(f.normal):f.__originalFaceNormal=
f.normal.clone(),f.__originalVertexNormals||(f.__originalVertexNormals=[]),a=0,b=f.vertexNormals.length;a<b;a++)f.__originalVertexNormals[a]?f.__originalVertexNormals[a].copy(f.vertexNormals[a]):f.__originalVertexNormals[a]=f.vertexNormals[a].clone();var g=new c.Geometry;g.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];f=this.morphNormals[a].faceNormals;var k=this.morphNormals[a].vertexNormals,
h,p;d=0;for(e=this.faces.length;d<e;d++)h=new c.Vector3,p={a:new c.Vector3,b:new c.Vector3,c:new c.Vector3},f.push(h),k.push(p)}k=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;g.computeFaceNormals();g.computeVertexNormals();d=0;for(e=this.faces.length;d<e;d++)f=this.faces[d],h=k.faceNormals[d],p=k.vertexNormals[d],h.copy(f.normal),p.a.copy(f.vertexNormals[0]),p.b.copy(f.vertexNormals[1]),p.c.copy(f.vertexNormals[2])}d=0;for(e=this.faces.length;d<e;d++)f=this.faces[d],f.normal=f.__originalFaceNormal,
f.vertexNormals=f.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,e=b.length;c<e;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new c.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new c.Sphere);
this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,d){if(!1===a instanceof c.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var e,f=this.vertices.length,g=this.vertices,k=a.vertices,h=this.faces,p=a.faces,m=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===d&&(d=0);void 0!==b&&(e=(new c.Matrix3).getNormalMatrix(b));for(var q=0,t=k.length;q<t;q++){var n=k[q].clone();void 0!==b&&n.applyMatrix4(b);g.push(n)}q=0;for(t=p.length;q<
t;q++){var k=p[q],r,s=k.vertexNormals,x=k.vertexColors,n=new c.Face3(k.a+f,k.b+f,k.c+f);n.normal.copy(k.normal);void 0!==e&&n.normal.applyMatrix3(e).normalize();b=0;for(g=s.length;b<g;b++)r=s[b].clone(),void 0!==e&&r.applyMatrix3(e).normalize(),n.vertexNormals.push(r);n.color.copy(k.color);b=0;for(g=x.length;b<g;b++)r=x[b],n.vertexColors.push(r.clone());n.materialIndex=k.materialIndex+d;h.push(n)}q=0;for(t=a.length;q<t;q++)if(d=a[q],e=[],void 0!==d){b=0;for(g=d.length;b<g;b++)e.push(d[b].clone());
m.push(e)}}},mergeMesh:function(a){!1===a instanceof c.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],e,f=Math.pow(10,4),g,k;g=0;for(k=this.vertices.length;g<k;g++)e=this.vertices[g],e=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f),void 0===a[e]?(a[e]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[e]];a=[];g=0;for(k=this.faces.length;g<
k;g++)for(f=this.faces[g],f.a=c[f.a],f.b=c[f.b],f.c=c[f.c],f=[f.a,f.b,f.c],e=0;3>e;e++)if(f[e]===f[(e+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(f=a[g],this.faces.splice(f,1),c=0,k=this.faceVertexUvs.length;c<k;c++)this.faceVertexUvs[c].splice(f,1);g=this.vertices.length-b.length;this.vertices=b;return g},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=p.length/3;p.push(a.x,a.y,
a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==t[b])return t[b];t[b]=q.length;q.push(a.getHex());return t[b]}function e(a){var b=a.x.toString()+a.y.toString();if(void 0!==r[b])return r[b];r[b]=n.length/2;n.push(a.x,a.y);return r[b]}var f={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);if(void 0!==this.parameters){var g=this.parameters,k;for(k in g)void 0!==g[k]&&
(f[k]=g[k]);return f}g=[];for(k=0;k<this.vertices.length;k++){var h=this.vertices[k];g.push(h.x,h.y,h.z)}var h=[],p=[],m={},q=[],t={},n=[],r={};for(k=0;k<this.faces.length;k++){var s=this.faces[k],x=void 0!==this.faceVertexUvs[0][k],B=0<s.normal.length(),z=0<s.vertexNormals.length,v=1!==s.color.r||1!==s.color.g||1!==s.color.b,I=0<s.vertexColors.length,y=0,y=a(y,0,0),y=a(y,1,!1),y=a(y,2,!1),y=a(y,3,x),y=a(y,4,B),y=a(y,5,z),y=a(y,6,v),y=a(y,7,I);h.push(y);h.push(s.a,s.b,s.c);x&&(x=this.faceVertexUvs[0][k],
h.push(e(x[0]),e(x[1]),e(x[2])));B&&h.push(b(s.normal));z&&(B=s.vertexNormals,h.push(b(B[0]),b(B[1]),b(B[2])));v&&h.push(c(s.color));I&&(s=s.vertexColors,h.push(c(s[0]),c(s[1]),c(s[2])))}f.data={};f.data.vertices=g;f.data.normals=p;0<q.length&&(f.data.colors=q);0<n.length&&(f.data.uvs=[n]);f.data.faces=h;return f},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,e=b.length;c<e;c++)this.vertices.push(b[c].clone());
b=a.faces;c=0;for(e=b.length;c<e;c++)this.faces.push(b[c].clone());c=0;for(e=a.faceVertexUvs.length;c<e;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var f=0,g=b.length;f<g;f++){for(var h=b[f],p=[],q=0,m=h.length;q<m;q++)p.push(h[q].clone());this.faceVertexUvs[c].push(p)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};c.EventDispatcher.prototype.apply(c.Geometry.prototype);c.GeometryIdCount=0;c.BufferGeometry=function(){Object.defineProperty(this,
"id",{value:c.GeometryIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};c.BufferGeometry.prototype={constructor:c.BufferGeometry,addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},getIndex:function(){return this.index},setIndex:function(a){this.index=
a},addAttribute:function(a,b,d){!1===b instanceof c.BufferAttribute&&!1===b instanceof c.InterleavedBufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new c.BufferAttribute(b,d))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b)):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a]},
get drawcalls(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups},get offsets(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");
this.clearGroups()},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new c.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();
null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new c.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,d,e){void 0===
a&&(a=new c.Matrix4);a.makeTranslation(b,d,e);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,d,e){void 0===a&&(a=new c.Matrix4);a.makeScale(b,d,e);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new c.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=
a.geometry;if(a instanceof c.Points||a instanceof c.Line){a=new c.Float32Attribute(3*b.vertices.length,3);var d=new c.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",d.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new c.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());
null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof c.Mesh&&b instanceof c.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof c.Mesh){var d=b.__directGeometry;if(void 0===d)return this.fromGeometry(b);d.verticesNeedUpdate=b.verticesNeedUpdate;d.normalsNeedUpdate=b.normalsNeedUpdate;d.colorsNeedUpdate=b.colorsNeedUpdate;d.uvsNeedUpdate=b.uvsNeedUpdate;d.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=
!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=d}!0===b.verticesNeedUpdate&&(d=this.attributes.position,void 0!==d&&(d.copyVector3sArray(b.vertices),d.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(d=this.attributes.normal,void 0!==d&&(d.copyVector3sArray(b.normals),d.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(d=this.attributes.color,void 0!==d&&(d.copyColorsArray(b.colors),d.needsUpdate=!0),b.colorsNeedUpdate=!1);b.lineDistancesNeedUpdate&&
(d=this.attributes.lineDistance,void 0!==d&&(d.copyArray(b.lineDistances),d.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new c.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new c.BufferAttribute(b,3)).copyVector3sArray(a.vertices));
0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new c.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new c.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new c.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new c.BufferAttribute(b,
2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new c.BufferAttribute(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var d in a.morphTargets){for(var b=[],e=a.morphTargets[d],f=0,g=e.length;f<g;f++){var h=e[f],p=new c.Float32Attribute(3*h.length,3);b.push(p.copyVector3sArray(h))}this.morphAttributes[d]=b}0<a.skinIndices.length&&(d=new c.Float32Attribute(4*a.skinIndices.length,4),this.addAttribute("skinIndex",
d.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(d=new c.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",d.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){var a=new c.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new c.Box3);var b=this.attributes.position.array;if(b){var d=
this.boundingBox;d.makeEmpty();for(var e=0,f=b.length;e<f;e+=3)a.fromArray(b,e),d.expandByPoint(a)}if(void 0===b||0===b.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var a=new c.Box3,b=new c.Vector3;
return function(){null===this.boundingSphere&&(this.boundingSphere=new c.Sphere);var d=this.attributes.position.array;if(d){a.makeEmpty();for(var e=this.boundingSphere.center,f=0,g=d.length;f<g;f+=3)b.fromArray(d,f),a.expandByPoint(b);a.center(e);for(var h=0,f=0,g=d.length;f<g;f+=3)b.fromArray(d,f),h=Math.max(h,e.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(h);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,d=this.groups;if(b.position){var e=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new c.BufferAttribute(new Float32Array(e.length),3));else for(var f=b.normal.array,g=0,h=f.length;g<h;g++)f[g]=0;var f=b.normal.array,p,q,m,w=new c.Vector3,t=new c.Vector3,n=new c.Vector3,r=new c.Vector3,s=new c.Vector3;if(a){a=a.array;0===d.length&&this.addGroup(0,a.length);for(var x=0,B=d.length;x<
B;++x)for(g=d[x],h=g.start,p=g.count,g=h,h+=p;g<h;g+=3)p=3*a[g+0],q=3*a[g+1],m=3*a[g+2],w.fromArray(e,p),t.fromArray(e,q),n.fromArray(e,m),r.subVectors(n,t),s.subVectors(w,t),r.cross(s),f[p]+=r.x,f[p+1]+=r.y,f[p+2]+=r.z,f[q]+=r.x,f[q+1]+=r.y,f[q+2]+=r.z,f[m]+=r.x,f[m+1]+=r.y,f[m+2]+=r.z}else for(g=0,h=e.length;g<h;g+=9)w.fromArray(e,g),t.fromArray(e,g+3),n.fromArray(e,g+6),r.subVectors(n,t),s.subVectors(w,t),r.cross(s),f[g]=r.x,f[g+1]=r.y,f[g+2]=r.z,f[g+3]=r.x,f[g+4]=r.y,f[g+5]=r.z,f[g+6]=r.x,f[g+
7]=r.y,f[g+8]=r.z;this.normalizeNormals();b.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(a){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(a,b){if(!1===a instanceof c.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);else{void 0===b&&(b=0);var d=this.attributes,e;for(e in d)if(void 0!==a.attributes[e])for(var f=
d[e].array,g=a.attributes[e],h=g.array,p=0,g=g.itemSize*b;p<h.length;p++,g++)f[g]=h[p];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,e,f=0,g=a.length;f<g;f+=3)b=a[f],c=a[f+1],e=a[f+2],b=1/Math.sqrt(b*b+c*c+e*e),a[f]*=b,a[f+1]*=b,a[f+2]*=b},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters,
c;for(c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var e=this.index;null!==e&&(b=Array.prototype.slice.call(e.array),a.data.index={type:e.array.constructor.name,array:b});e=this.attributes;for(c in e){var f=e[c],b=Array.prototype.slice.call(f.array);a.data.attributes[c]={itemSize:f.itemSize,type:f.array.constructor.name,array:b}}c=this.groups;0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),
radius:c.radius});return a},clone:function(){return(new this.constructor).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes,c;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;c=0;for(b=a.length;c<b;c++){var e=a[c];this.addGroup(e.start,e.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};c.EventDispatcher.prototype.apply(c.BufferGeometry.prototype);c.BufferGeometry.MaxIndex=65535;c.Camera=function(){c.Object3D.call(this);
this.type="Camera";this.matrixWorldInverse=new c.Matrix4;this.projectionMatrix=new c.Matrix4};c.Camera.prototype=Object.create(c.Object3D.prototype);c.Camera.prototype.constructor=c.Camera;c.Camera.prototype.getWorldDirection=function(){var a=new c.Quaternion;return function(b){b=b||new c.Vector3;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();c.Camera.prototype.lookAt=function(){var a=new c.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();
c.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};c.Camera.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};c.PerspectiveCamera=function(a,b,d,e){c.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==d?d:.1;this.far=void 0!==e?e:2E3;this.updateProjectionMatrix()};c.PerspectiveCamera.prototype=
Object.create(c.Camera.prototype);c.PerspectiveCamera.prototype.constructor=c.PerspectiveCamera;c.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*c.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};c.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,e,f,g){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=e;this.width=f;this.height=g;this.updateProjectionMatrix()};c.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var a=c.Math.radToDeg(2*
Math.atan(Math.tan(.5*c.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var b=this.fullWidth/this.fullHeight,a=Math.tan(c.Math.degToRad(.5*a))*this.near,d=-a,e=b*d,b=Math.abs(b*a-e),d=Math.abs(a-d);this.projectionMatrix.makeFrustum(e+this.x*b/this.fullWidth,e+(this.x+this.width)*b/this.fullWidth,a-(this.y+this.height)*d/this.fullHeight,a-this.y*d/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(a,this.aspect,this.near,this.far)};c.PerspectiveCamera.prototype.copy=
function(a){c.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.aspect=a.aspect;this.near=a.near;this.far=a.far;this.zoom=a.zoom;return this};c.PerspectiveCamera.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.fov=this.fov;a.object.aspect=this.aspect;a.object.near=this.near;a.object.far=this.far;return a};c.Light=function(a){c.Object3D.call(this);this.type="Light";this.color=new c.Color(a)};c.Light.prototype=Object.create(c.Object3D.prototype);
c.Light.prototype.constructor=c.Light;c.Light.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);return this};c.AmbientLight=function(a){c.Light.call(this,a);this.type="AmbientLight"};c.AmbientLight.prototype=Object.create(c.Light.prototype);c.AmbientLight.prototype.constructor=c.AmbientLight;c.AmbientLight.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();return a};c.PointLight=function(a,b,d,e){c.Light.call(this,
a);this.type="PointLight";this.intensity=void 0!==b?b:1;this.distance=void 0!==d?d:0;this.decay=void 0!==e?e:1};c.PointLight.prototype=Object.create(c.Light.prototype);c.PointLight.prototype.constructor=c.PointLight;c.PointLight.prototype.copy=function(a){c.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.distance=a.distance;this.decay=a.decay;return this};c.PointLight.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=
this.intensity;a.object.distance=this.distance;a.object.decay=this.decay;return a};c.DirectionalLight=function(a,b){c.Light.call(this,a);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new c.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=
0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};c.DirectionalLight.prototype=Object.create(c.Light.prototype);c.DirectionalLight.prototype.constructor=c.DirectionalLight;c.DirectionalLight.prototype.copy=function(a){c.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.target=a.target.clone();this.castShadow=a.castShadow;this.onlyShadow=a.onlyShadow;this.shadowCameraNear=a.shadowCameraNear;
this.shadowCameraFar=a.shadowCameraFar;this.shadowCameraLeft=a.shadowCameraLeft;this.shadowCameraRight=a.shadowCameraRight;this.shadowCameraTop=a.shadowCameraTop;this.shadowCameraBottom=a.shadowCameraBottom;this.shadowCameraVisible=a.shadowCameraVisible;this.shadowBias=a.shadowBias;this.shadowDarkness=a.shadowDarkness;this.shadowMapWidth=a.shadowMapWidth;this.shadowMapHeight=a.shadowMapHeight;return this};c.DirectionalLight.prototype.toJSON=function(a){a=c.Object3D.prototype.toJSON.call(this,a);a.object.color=
this.color.getHex();a.object.intensity=this.intensity;return a};c.Material=function(){Object.defineProperty(this,"id",{value:c.MaterialIdCount++});this.uuid=c.Math.generateUUID();this.name="";this.type="Material";this.side=c.FrontSide;this.opacity=1;this.transparent=!1;this.blending=c.NormalBlending;this.blendSrc=c.SrcAlphaFactor;this.blendDst=c.OneMinusSrcAlphaFactor;this.blendEquation=c.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=c.LessEqualDepth;
this.colorWrite=this.depthWrite=this.depthTest=!0;this.precision=null;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this._needsUpdate=this.visible=!0};c.Material.prototype={constructor:c.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var d=a[b];if(void 0===d)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else{var e=
this[b];void 0===e?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):e instanceof c.Color?e.set(d):e instanceof c.Vector3&&d instanceof c.Vector3?e.copy(d):this[b]="overdraw"===b?Number(d):d}}},toJSON:function(a){var b={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);this.color instanceof c.Color&&(b.color=this.color.getHex());this.emissive instanceof c.Color&&(b.emissive=this.emissive.getHex());
this.specular instanceof c.Color&&(b.specular=this.specular.getHex());void 0!==this.shininess&&(b.shininess=this.shininess);this.map instanceof c.Texture&&(b.map=this.map.toJSON(a).uuid);this.alphaMap instanceof c.Texture&&(b.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof c.Texture&&(b.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap instanceof c.Texture&&(b.bumpMap=this.bumpMap.toJSON(a).uuid,b.bumpScale=this.bumpScale);this.normalMap instanceof c.Texture&&(b.normalMap=this.normalMap.toJSON(a).uuid,
b.normalScale=this.normalScale);this.displacementMap instanceof c.Texture&&(b.displacementMap=this.displacementMap.toJSON(a).uuid,b.displacementScale=this.displacementScale,b.displacementBias=this.displacementBias);this.specularMap instanceof c.Texture&&(b.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof c.Texture&&(b.envMap=this.envMap.toJSON(a).uuid,b.reflectivity=this.reflectivity);void 0!==this.size&&(b.size=this.size);void 0!==this.sizeAttenuation&&(b.sizeAttenuation=this.sizeAttenuation);
void 0!==this.vertexColors&&this.vertexColors!==c.NoColors&&(b.vertexColors=this.vertexColors);void 0!==this.shading&&this.shading!==c.SmoothShading&&(b.shading=this.shading);void 0!==this.blending&&this.blending!==c.NormalBlending&&(b.blending=this.blending);void 0!==this.side&&this.side!==c.FrontSide&&(b.side=this.side);1>this.opacity&&(b.opacity=this.opacity);!0===this.transparent&&(b.transparent=this.transparent);0<this.alphaTest&&(b.alphaTest=this.alphaTest);!0===this.wireframe&&(b.wireframe=
this.wireframe);1<this.wireframeLinewidth&&(b.wireframeLinewidth=this.wireframeLinewidth);return b},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.side=a.side;this.opacity=a.opacity;this.transparent=a.transparent;this.blending=a.blending;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=
a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.overdraw=a.overdraw;this.visible=a.visible;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},
set wrapAround(a){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new c.Color}};c.EventDispatcher.prototype.apply(c.Material.prototype);c.MaterialIdCount=0;c.LineBasicMaterial=function(a){c.Material.call(this);this.type="LineBasicMaterial";this.color=new c.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=c.NoColors;this.fog=!0;this.setValues(a)};c.LineBasicMaterial.prototype=
Object.create(c.Material.prototype);c.LineBasicMaterial.prototype.constructor=c.LineBasicMaterial;c.LineBasicMaterial.prototype.copy=function(a){c.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;this.vertexColors=a.vertexColors;this.fog=a.fog;return this};c.MeshBasicMaterial=function(a){c.Material.call(this);this.type="MeshBasicMaterial";this.color=new c.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=
1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=c.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=c.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=c.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};c.MeshBasicMaterial.prototype=Object.create(c.Material.prototype);c.MeshBasicMaterial.prototype.constructor=c.MeshBasicMaterial;c.MeshBasicMaterial.prototype.copy=
function(a){c.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};c.MeshLambertMaterial=function(a){c.Material.call(this);this.type="MeshLambertMaterial";this.color=new c.Color(16777215);this.emissive=new c.Color(0);this.envMap=this.alphaMap=this.specularMap=this.map=null;this.combine=c.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=
c.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};c.MeshLambertMaterial.prototype=Object.create(c.Material.prototype);c.MeshLambertMaterial.prototype.constructor=c.MeshLambertMaterial;c.MeshLambertMaterial.prototype.copy=function(a){c.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.emissive.copy(a.emissive);this.map=a.map;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;
this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};c.MultiMaterial=function(a){this.uuid=c.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};c.MultiMaterial.prototype=
{constructor:c.MultiMaterial,toJSON:function(){for(var a={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},b=0,c=this.materials.length;b<c;b++)a.materials.push(this.materials[b].toJSON());a.visible=this.visible;return a},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};c.MeshFaceMaterial=c.MultiMaterial;c.MeshPhongMaterial=function(a){c.Material.call(this);
this.type="MeshPhongMaterial";this.color=new c.Color(16777215);this.emissive=new c.Color(0);this.specular=new c.Color(1118481);this.shininess=30;this.metal=!1;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new c.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=c.MultiplyOperation;
this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=c.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=c.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};c.MeshPhongMaterial.prototype=Object.create(c.Material.prototype);c.MeshPhongMaterial.prototype.constructor=c.MeshPhongMaterial;c.MeshPhongMaterial.prototype.copy=function(a){c.Material.prototype.copy.call(this,a);this.color.copy(a.color);
this.emissive.copy(a.emissive);this.specular.copy(a.specular);this.shininess=a.shininess;this.metal=a.metal;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissiveMap=a.emissiveMap;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;
this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};
c.MeshDepthMaterial=function(a){c.Material.call(this);this.type="MeshDepthMaterial";this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};c.MeshDepthMaterial.prototype=Object.create(c.Material.prototype);c.MeshDepthMaterial.prototype.constructor=c.MeshDepthMaterial;c.MeshDepthMaterial.prototype.copy=function(a){c.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};c.MeshNormalMaterial=function(a){c.Material.call(this,
a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};c.MeshNormalMaterial.prototype=Object.create(c.Material.prototype);c.MeshNormalMaterial.prototype.constructor=c.MeshNormalMaterial;c.MeshNormalMaterial.prototype.copy=function(a){c.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};c.SpriteMaterial=function(a){c.Material.call(this);this.type="SpriteMaterial";this.color=
new c.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};c.SpriteMaterial.prototype=Object.create(c.Material.prototype);c.SpriteMaterial.prototype.constructor=c.SpriteMaterial;c.SpriteMaterial.prototype.copy=function(a){c.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;this.fog=a.fog;return this};c.Texture=function(a,b,d,e,f,g,h,p,q){Object.defineProperty(this,"id",{value:c.TextureIdCount++});this.uuid=c.Math.generateUUID();
this.sourceFile=this.name="";this.image=void 0!==a?a:c.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:c.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==d?d:c.ClampToEdgeWrapping;this.wrapT=void 0!==e?e:c.ClampToEdgeWrapping;this.magFilter=void 0!==f?f:c.LinearFilter;this.minFilter=void 0!==g?g:c.LinearMipMapLinearFilter;this.anisotropy=void 0!==q?q:1;this.format=void 0!==h?h:c.RGBAFormat;this.type=void 0!==p?p:c.UnsignedByteType;this.offset=new c.Vector2(0,0);this.repeat=new c.Vector2(1,
1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.version=0;this.onUpdate=null};c.Texture.DEFAULT_IMAGE=void 0;c.Texture.DEFAULT_MAPPING=c.UVMapping;c.Texture.prototype={constructor:c.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=
a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,
this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=c.Math.generateUUID());if(void 0===a.images[d.uuid]){var e=a.images,f=d.uuid,g=d.uuid,h;void 0!==d.toDataURL?h=d:(h=document.createElement("canvas"),h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0,d.width,d.height));h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",
.6):h.toDataURL("image/png");e[f]={uuid:g,url:h}}b.image=d.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===c.UVMapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case c.RepeatWrapping:a.x-=Math.floor(a.x);break;case c.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case c.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x-=Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case c.RepeatWrapping:a.y-=
Math.floor(a.y);break;case c.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case c.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.y)%2)?a.y=Math.ceil(a.y)-a.y:a.y-=Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};c.EventDispatcher.prototype.apply(c.Texture.prototype);c.TextureIdCount=0;c.CompressedTexture=function(a,b,d,e,f,g,h,p,q,m,w){c.Texture.call(this,null,g,h,p,q,m,e,f,w);this.image={width:b,height:d};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};c.CompressedTexture.prototype=Object.create(c.Texture.prototype);
c.CompressedTexture.prototype.constructor=c.CompressedTexture;c.DataTexture=function(a,b,d,e,f,g,h,p,q,m,w){c.Texture.call(this,null,g,h,p,q,m,e,f,w);this.image={data:a,width:b,height:d};this.magFilter=void 0!==q?q:c.NearestFilter;this.minFilter=void 0!==m?m:c.NearestFilter;this.generateMipmaps=this.flipY=!1};c.DataTexture.prototype=Object.create(c.Texture.prototype);c.DataTexture.prototype.constructor=c.DataTexture;c.Line=function(a,b,d){if(1===d)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),
new c.LineSegments(a,b);c.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new c.Geometry;this.material=void 0!==b?b:new c.LineBasicMaterial({color:16777215*Math.random()})};c.Line.prototype=Object.create(c.Object3D.prototype);c.Line.prototype.constructor=c.Line;c.Line.prototype.raycast=function(){var a=new c.Matrix4,b=new c.Ray,d=new c.Sphere;return function(e,f){var g=e.linePrecision,g=g*g,h=this.geometry;null===h.boundingSphere&&h.computeBoundingSphere();d.copy(h.boundingSphere);
d.applyMatrix4(this.matrixWorld);if(!1!==e.ray.isIntersectionSphere(d)){a.getInverse(this.matrixWorld);b.copy(e.ray).applyMatrix4(a);var p=new c.Vector3,q=new c.Vector3,m=new c.Vector3,w=new c.Vector3,t=this instanceof c.LineSegments?2:1;if(h instanceof c.BufferGeometry){var n=h.index,r=h.attributes;if(null!==n)for(var h=n.array,r=r.position.array,n=0,s=h.length-1;n<s;n+=t){var x=h[n+1];p.fromArray(r,3*h[n]);q.fromArray(r,3*x);x=b.distanceSqToSegment(p,q,w,m);x>g||(w.applyMatrix4(this.matrixWorld),
x=e.ray.origin.distanceTo(w),x<e.near||x>e.far||f.push({distance:x,point:m.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else for(r=r.position.array,n=0,s=r.length/3-1;n<s;n+=t)p.fromArray(r,3*n),q.fromArray(r,3*n+3),x=b.distanceSqToSegment(p,q,w,m),x>g||(w.applyMatrix4(this.matrixWorld),x=e.ray.origin.distanceTo(w),x<e.near||x>e.far||f.push({distance:x,point:m.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(h instanceof
c.Geometry)for(p=h.vertices,q=p.length,n=0;n<q-1;n+=t)x=b.distanceSqToSegment(p[n],p[n+1],w,m),x>g||(w.applyMatrix4(this.matrixWorld),x=e.ray.origin.distanceTo(w),x<e.near||x>e.far||f.push({distance:x,point:m.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}}();c.Line.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};c.Line.prototype.toJSON=function(a){var b=c.Object3D.prototype.toJSON.call(this,a);void 0===a.geometries[this.geometry.uuid]&&
(a.geometries[this.geometry.uuid]=this.geometry.toJSON());void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON());b.object.geometry=this.geometry.uuid;b.object.material=this.material.uuid;return b};c.LineStrip=0;c.LinePieces=1;c.LineSegments=function(a,b){c.Line.call(this,a,b);this.type="LineSegments"};c.LineSegments.prototype=Object.create(c.Line.prototype);c.LineSegments.prototype.constructor=c.LineSegments;c.Mesh=function(a,b){c.Object3D.call(this);this.type=
"Mesh";this.geometry=void 0!==a?a:new c.Geometry;this.material=void 0!==b?b:new c.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};c.Mesh.prototype=Object.create(c.Object3D.prototype);c.Mesh.prototype.constructor=c.Mesh;c.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<
b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};c.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};c.Mesh.prototype.raycast=function(){function a(a,b,d,e,f,g,h){c.Triangle.barycoordFromPoint(a,b,d,e,r);f.multiplyScalar(r.x);g.multiplyScalar(r.y);
h.multiplyScalar(r.z);f.add(g).add(h);return f.clone()}var b=new c.Matrix4,d=new c.Ray,e=new c.Sphere,f=new c.Vector3,g=new c.Vector3,h=new c.Vector3,p=new c.Vector3,q=new c.Vector3,m=new c.Vector3,w=new c.Vector2,t=new c.Vector2,n=new c.Vector2,r=new c.Vector3,s=new c.Vector3,x=new c.Vector3;return function(r,z){var v=this.geometry,I=this.material;if(void 0!==I&&(null===v.boundingSphere&&v.computeBoundingSphere(),e.copy(v.boundingSphere),e.applyMatrix4(this.matrixWorld),!1!==r.ray.isIntersectionSphere(e)&&
(b.getInverse(this.matrixWorld),d.copy(r.ray).applyMatrix4(b),null===v.boundingBox||!1!==d.isIntersectionBox(v.boundingBox)))){var y,G,S;if(v instanceof c.BufferGeometry)if(y=v.index,v=v.attributes,null!==y)for(var H=y.array,D=v.position.array,E=0,N=H.length;E<N;E+=3){y=H[E];G=H[E+1];S=H[E+2];f.fromArray(D,3*y);g.fromArray(D,3*G);h.fromArray(D,3*S);if(I.side===c.BackSide){if(null===d.intersectTriangle(h,g,f,!0,s))continue}else if(null===d.intersectTriangle(f,g,h,I.side!==c.DoubleSide,s))continue;
x.copy(s);x.applyMatrix4(this.matrixWorld);var K=r.ray.origin.distanceTo(x);if(!(K<r.near||K>r.far)){var O;void 0!==v.uv&&(O=v.uv.array,w.fromArray(O,2*y),t.fromArray(O,2*G),n.fromArray(O,2*S),O=a(s,f,g,h,w,t,n));z.push({distance:K,point:x.clone(),uv:O,face:new c.Face3(y,G,S,c.Triangle.normal(f,g,h)),faceIndex:Math.floor(E/3),object:this})}}else for(D=v.position.array,E=0,N=D.length;E<N;E+=9){f.fromArray(D,E);g.fromArray(D,E+3);h.fromArray(D,E+6);if(I.side===c.BackSide){if(null===d.intersectTriangle(h,
g,f,!0,s))continue}else if(null===d.intersectTriangle(f,g,h,I.side!==c.DoubleSide,s))continue;x.copy(s);x.applyMatrix4(this.matrixWorld);K=r.ray.origin.distanceTo(x);K<r.near||K>r.far||(void 0!==v.uv&&(O=v.uv.array,w.fromArray(O,E),t.fromArray(O,E+2),n.fromArray(O,E+4),O=a(s,f,g,h,w,t,n)),y=E/3,G=y+1,S=y+2,z.push({distance:K,point:x.clone(),uv:O,face:new c.Face3(y,G,S,c.Triangle.normal(f,g,h)),index:y,object:this}))}else if(v instanceof c.Geometry)for(var H=I instanceof c.MeshFaceMaterial,D=!0===
H?I.materials:null,E=v.vertices,N=v.faces,M=0,C=N.length;M<C;M++){var J=N[M],K=!0===H?D[J.materialIndex]:I;if(void 0!==K){y=E[J.a];G=E[J.b];S=E[J.c];if(!0===K.morphTargets){var U=v.morphTargets,X=this.morphTargetInfluences;f.set(0,0,0);g.set(0,0,0);h.set(0,0,0);for(var V=0,W=U.length;V<W;V++){var fa=X[V];if(0!==fa){var F=U[V].vertices;f.addScaledVector(p.subVectors(F[J.a],y),fa);g.addScaledVector(q.subVectors(F[J.b],G),fa);h.addScaledVector(m.subVectors(F[J.c],S),fa)}}f.add(y);g.add(G);h.add(S);y=
f;G=g;S=h}if(K.side===c.BackSide){if(null===d.intersectTriangle(S,G,y,!0,s))continue}else if(null===d.intersectTriangle(y,G,S,K.side!==c.DoubleSide,s))continue;x.copy(s);x.applyMatrix4(this.matrixWorld);K=r.ray.origin.distanceTo(x);K<r.near||K>r.far||(0<v.faceVertexUvs[0].length&&(O=v.faceVertexUvs[0][M],w.copy(O[0]),t.copy(O[1]),n.copy(O[2]),O=a(s,y,G,S,w,t,n)),z.push({distance:K,point:x.clone(),uv:O,face:J,faceIndex:M,object:this}))}}}}}();c.Mesh.prototype.clone=function(){return(new this.constructor(this.geometry,
this.material)).copy(this)};c.Mesh.prototype.toJSON=function(a){var b=c.Object3D.prototype.toJSON.call(this,a);void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a));void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a));b.object.geometry=this.geometry.uuid;b.object.material=this.material.uuid;return b};c.Sprite=function(){var a=new Uint16Array([0,1,2,0,2,3]),b=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,
-.5,.5,0]),d=new Float32Array([0,0,1,0,1,1,0,1]),e=new c.BufferGeometry;e.setIndex(new c.BufferAttribute(a,1));e.addAttribute("position",new c.BufferAttribute(b,3));e.addAttribute("uv",new c.BufferAttribute(d,2));return function(a){c.Object3D.call(this);this.type="Sprite";this.geometry=e;this.material=void 0!==a?a:new c.SpriteMaterial}}();c.Sprite.prototype=Object.create(c.Object3D.prototype);c.Sprite.prototype.constructor=c.Sprite;c.Sprite.prototype.raycast=function(){var a=new c.Vector3;return function(b,
c){a.setFromMatrixPosition(this.matrixWorld);var e=b.ray.distanceSqToPoint(a);e>this.scale.x*this.scale.y||c.push({distance:Math.sqrt(e),point:this.position,face:null,object:this})}}();c.Sprite.prototype.clone=function(){return(new this.constructor(this.material)).copy(this)};c.Sprite.prototype.toJSON=function(a){var b=c.Object3D.prototype.toJSON.call(this,a);void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON());b.object.material=this.material.uuid;return b};
c.Particle=c.Sprite;c.Scene=function(){c.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};c.Scene.prototype=Object.create(c.Object3D.prototype);c.Scene.prototype.constructor=c.Scene;c.Scene.prototype.copy=function(a){c.Object3D.prototype.copy.call(this,a);null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};
c.RenderableObject=function(){this.id=0;this.object=null;this.renderOrder=this.z=0};c.RenderableFace=function(){this.id=0;this.v1=new c.RenderableVertex;this.v2=new c.RenderableVertex;this.v3=new c.RenderableVertex;this.normalModel=new c.Vector3;this.vertexNormalsModel=[new c.Vector3,new c.Vector3,new c.Vector3];this.vertexNormalsLength=0;this.color=new c.Color;this.material=null;this.uvs=[new c.Vector2,new c.Vector2,new c.Vector2];this.renderOrder=this.z=0};c.RenderableVertex=function(){this.position=
new c.Vector3;this.positionWorld=new c.Vector3;this.positionScreen=new c.Vector4;this.visible=!0};c.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};c.RenderableLine=function(){this.id=0;this.v1=new c.RenderableVertex;this.v2=new c.RenderableVertex;this.vertexColors=[new c.Color,new c.Color];this.material=null;this.renderOrder=this.z=0};c.RenderableSprite=function(){this.id=0;this.object=null;this.rotation=this.z=this.y=
this.x=0;this.scale=new c.Vector2;this.material=null;this.renderOrder=0};c.Projector=function(){function a(){if(t===r){var a=new c.RenderableVertex;n.push(a);r++;t++;return a}return n[t++]}function b(){if(x===z){var a=new c.RenderableFace;B.push(a);z++;x++;return a}return B[x++]}function d(){if(I===G){var a=new c.RenderableLine;y.push(a);G++;I++;return a}return y[I++]}function e(){if(H===E){var a=new c.RenderableSprite;D.push(a);E++;H++;return a}return D[H++]}function f(a,b){return a.renderOrder!==
b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function g(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,h=-a.z+a.w,k=-b.z+b.w;if(0<=e&&0<=f&&0<=h&&0<=k)return!0;if(0>e&&0>f||0>h&&0>k)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>h?c=Math.max(c,h/(h-k)):0>k&&(d=Math.min(d,h/(h-k)));if(d<c)return!1;a.lerp(b,c);b.lerp(a,1-d);return!0}var h,p,q=[],m=0,w,t,n=[],r=0,s,x,B=[],z=0,v,I,y=[],G=0,S,H,D=[],E=0,N={objects:[],lights:[],elements:[]},K=new c.Vector3,
O=new c.Vector4,M=new c.Box3(new c.Vector3(-1,-1,-1),new c.Vector3(1,1,1)),C=new c.Box3,J=Array(3),U=new c.Matrix4,X=new c.Matrix4,V,W=new c.Matrix4,F=new c.Matrix3,R=new c.Frustum,P=new c.Vector4,ga=new c.Vector4;this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};
var ea=new function(){var e=[],f=[],g=null,h=null,k=new c.Matrix3,l=function(a){var b=a.positionWorld,c=a.positionScreen;b.copy(a.position).applyMatrix4(V);c.copy(b).applyMatrix4(X);b=1/c.w;c.x*=b;c.y*=b;c.z*=b;a.visible=-1<=c.x&&1>=c.x&&-1<=c.y&&1>=c.y&&-1<=c.z&&1>=c.z},m=function(a,b,c){if(!0===a.visible||!0===b.visible||!0===c.visible)return!0;J[0]=a.positionScreen;J[1]=b.positionScreen;J[2]=c.positionScreen;return M.isIntersectionBox(C.setFromPoints(J))},p=function(a,b,c){return 0>(c.positionScreen.x-
a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(c.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x)};return{setObject:function(a){g=a;h=g.material;k.getNormalMatrix(g.matrixWorld);e.length=0;f.length=0},projectVertex:l,checkTriangleVisibility:m,checkBackfaceCulling:p,pushVertex:function(b,c,d){w=a();w.position.set(b,c,d);l(w)},pushNormal:function(a,b,c){e.push(a,b,c)},pushUv:function(a,b){f.push(a,b)},pushLine:function(a,b){var c=n[a],e=n[b];v=d();v.id=g.id;
v.v1.copy(c);v.v2.copy(e);v.z=(c.positionScreen.z+e.positionScreen.z)/2;v.renderOrder=g.renderOrder;v.material=g.material;N.elements.push(v)},pushTriangle:function(a,d,l){var q=n[a],r=n[d],t=n[l];if(!1!==m(q,r,t)&&(h.side===c.DoubleSide||!0===p(q,r,t))){s=b();s.id=g.id;s.v1.copy(q);s.v2.copy(r);s.v3.copy(t);s.z=(q.positionScreen.z+r.positionScreen.z+t.positionScreen.z)/3;s.renderOrder=g.renderOrder;s.normalModel.fromArray(e,3*a);s.normalModel.applyMatrix3(k).normalize();for(q=0;3>q;q++)r=s.vertexNormalsModel[q],
r.fromArray(e,3*arguments[q]),r.applyMatrix3(k).normalize(),s.uvs[q].fromArray(f,2*arguments[q]);s.vertexNormalsLength=3;s.material=g.material;N.elements.push(s)}}}};this.projectScene=function(r,w,z,B){H=I=x=0;N.elements.length=0;!0===r.autoUpdate&&r.updateMatrixWorld();null===w.parent&&w.updateMatrixWorld();U.copy(w.matrixWorldInverse.getInverse(w.matrixWorld));X.multiplyMatrices(w.projectionMatrix,U);R.setFromMatrix(X);p=0;N.objects.length=0;N.lights.length=0;r.traverseVisible(function(a){if(a instanceof
c.Light)N.lights.push(a);else if((a instanceof c.Mesh||a instanceof c.Line||a instanceof c.Sprite)&&!1!==a.material.visible&&(!1===a.frustumCulled||!0===R.intersectsObject(a))){if(p===m){var b=new c.RenderableObject;q.push(b);m++;p++;h=b}else h=q[p++];h.id=a.id;h.object=a;K.setFromMatrixPosition(a.matrixWorld);K.applyProjection(X);h.z=K.z;h.renderOrder=a.renderOrder;N.objects.push(h)}});!0===z&&N.objects.sort(f);r=0;for(z=N.objects.length;r<z;r++){var y=N.objects[r].object,C=y.geometry;ea.setObject(y);
V=y.matrixWorld;t=0;if(y instanceof c.Mesh)if(C instanceof c.BufferGeometry){var E=C.attributes,y=C.groups;if(void 0!==E.position){for(var D=E.position.array,L=0,G=D.length;L<G;L+=3)ea.pushVertex(D[L],D[L+1],D[L+2]);if(void 0!==E.normal)for(var M=E.normal.array,L=0,G=M.length;L<G;L+=3)ea.pushNormal(M[L],M[L+1],M[L+2]);if(void 0!==E.uv)for(E=E.uv.array,L=0,G=E.length;L<G;L+=2)ea.pushUv(E[L],E[L+1]);if(null!==C.index)if(D=C.index.array,0<y.length)for(r=0;r<y.length;r++)for(G=y[r],L=G.start,G=G.start+
G.count;L<G;L+=3)ea.pushTriangle(D[L],D[L+1],D[L+2]);else for(L=0,G=D.length;L<G;L+=3)ea.pushTriangle(D[L],D[L+1],D[L+2]);else for(L=0,G=D.length/3;L<G;L+=3)ea.pushTriangle(L,L+1,L+2)}}else{if(C instanceof c.Geometry){var J=C.vertices,L=C.faces,G=C.faceVertexUvs[0];F.getNormalMatrix(V);for(var D=y.material,E=D instanceof c.MeshFaceMaterial,M=!0===E?y.material:null,da=0,ja=J.length;da<ja;da++){var $=J[da];K.copy($);if(!0===D.morphTargets)for(var ha=C.morphTargets,ia=y.morphTargetInfluences,ca=0,xa=
ha.length;ca<xa;ca++){var ka=ia[ca];if(0!==ka){var ya=ha[ca].vertices[da];K.x+=(ya.x-$.x)*ka;K.y+=(ya.y-$.y)*ka;K.z+=(ya.z-$.z)*ka}}ea.pushVertex(K.x,K.y,K.z)}J=0;for(da=L.length;J<da;J++)if(ja=L[J],D=!0===E?M.materials[ja.materialIndex]:y.material,void 0!==D&&(ia=D.side,C=n[ja.a],$=n[ja.b],ha=n[ja.c],!1!==ea.checkTriangleVisibility(C,$,ha))){ca=ea.checkBackfaceCulling(C,$,ha);if(ia!==c.DoubleSide){if(ia===c.FrontSide&&!1===ca)continue;if(ia===c.BackSide&&!0===ca)continue}s=b();s.id=y.id;s.v1.copy(C);
s.v2.copy($);s.v3.copy(ha);s.normalModel.copy(ja.normal);!1!==ca||ia!==c.BackSide&&ia!==c.DoubleSide||s.normalModel.negate();s.normalModel.applyMatrix3(F).normalize();xa=ja.vertexNormals;ka=0;for(ya=Math.min(xa.length,3);ka<ya;ka++){var pa=s.vertexNormalsModel[ka];pa.copy(xa[ka]);!1!==ca||ia!==c.BackSide&&ia!==c.DoubleSide||pa.negate();pa.applyMatrix3(F).normalize()}s.vertexNormalsLength=xa.length;ia=G[J];if(void 0!==ia)for(ca=0;3>ca;ca++)s.uvs[ca].copy(ia[ca]);s.color=ja.color;s.material=D;s.z=(C.positionScreen.z+
$.positionScreen.z+ha.positionScreen.z)/3;s.renderOrder=y.renderOrder;N.elements.push(s)}}}else if(y instanceof c.Line)if(C instanceof c.BufferGeometry){if(E=C.attributes,void 0!==E.position){D=E.position.array;L=0;for(G=D.length;L<G;L+=3)ea.pushVertex(D[L],D[L+1],D[L+2]);if(null!==C.index)for(D=C.index.array,L=0,G=D.length;L<G;L+=2)ea.pushLine(D[L],D[L+1]);else for(E=y instanceof c.LineSegments?2:1,L=0,G=D.length/3-1;L<G;L+=E)ea.pushLine(L,L+1)}}else{if(C instanceof c.Geometry&&(W.multiplyMatrices(X,
V),J=y.geometry.vertices,0!==J.length))for(C=a(),C.positionScreen.copy(J[0]).applyMatrix4(W),E=y instanceof c.LineSegments?2:1,da=1,ja=J.length;da<ja;da++)C=a(),C.positionScreen.copy(J[da]).applyMatrix4(W),0<(da+1)%E||($=n[t-2],P.copy(C.positionScreen),ga.copy($.positionScreen),!0===g(P,ga)&&(P.multiplyScalar(1/P.w),ga.multiplyScalar(1/ga.w),v=d(),v.id=y.id,v.v1.positionScreen.copy(P),v.v2.positionScreen.copy(ga),v.z=Math.max(P.z,ga.z),v.renderOrder=y.renderOrder,v.material=y.material,y.material.vertexColors===
c.VertexColors&&(v.vertexColors[0].copy(y.geometry.colors[da]),v.vertexColors[1].copy(y.geometry.colors[da-1])),N.elements.push(v)))}else y instanceof c.Sprite&&(O.set(V.elements[12],V.elements[13],V.elements[14],1),O.applyMatrix4(X),L=1/O.w,O.z*=L,-1<=O.z&&1>=O.z&&(S=e(),S.id=y.id,S.x=O.x*L,S.y=O.y*L,S.z=O.z,S.renderOrder=y.renderOrder,S.object=y,S.rotation=y.rotation,S.scale.x=y.scale.x*Math.abs(S.x-(O.x+w.projectionMatrix.elements[0])/(O.w+w.projectionMatrix.elements[12])),S.scale.y=y.scale.y*
Math.abs(S.y-(O.y+w.projectionMatrix.elements[5])/(O.w+w.projectionMatrix.elements[13])),S.material=y.material,N.elements.push(S)))}!0===B&&N.elements.sort(f);return N}};c.SpriteCanvasMaterial=function(a){c.Material.call(this);this.type="SpriteCanvasMaterial";this.color=new c.Color(16777215);this.program=function(a,c){};this.setValues(a)};c.SpriteCanvasMaterial.prototype=Object.create(c.Material.prototype);c.SpriteCanvasMaterial.prototype.constructor=c.SpriteCanvasMaterial;c.SpriteCanvasMaterial.prototype.clone=
function(){var a=new c.SpriteCanvasMaterial;a.copy(this);a.color.copy(this.color);a.program=this.program;return a};c.CanvasRenderer=function(a){function b(a,b,c,d){q(b);m(c);w(d);t(a.getStyle());C.stroke();na.expandByScalar(2*b)}function d(a){n(a.getStyle());C.fill()}function e(a){if(0===a.version||a instanceof c.CompressedTexture||a instanceof c.DataTexture)return{canvas:void 0,version:a.version};var b=a.image,d=document.createElement("canvas");d.width=b.width;d.height=b.height;var e=d.getContext("2d");
e.setTransform(1,0,0,-1,0,b.height);e.drawImage(b,0,0);var b=a.wrapS===c.RepeatWrapping,e=a.wrapT===c.RepeatWrapping,f="no-repeat";!0===b&&!0===e?f="repeat":!0===b?f="repeat-x":!0===e&&(f="repeat-y");return{canvas:C.createPattern(d,f),version:a.version}}function f(a,b,c,d,f,g,h,k,l,m,p,q,r){var s=$[r.id];if(void 0===s||s.version!==r.version)s=e(r),$[r.id]=s;if(void 0!==s.canvas){n(s.canvas);var s=r.offset.x/r.repeat.x,t=r.offset.y/r.repeat.y,u=r.image.width*r.repeat.x;r=r.image.height*r.repeat.y;
h=(h+s)*u;k=(k+t)*r;c-=a;d-=b;f-=a;g-=b;l=(l+s)*u-h;m=(m+t)*r-k;p=(p+s)*u-h;q=(q+t)*r-k;r=l*q-p*m;0!==r&&(s=1/r,r=(q*c-m*f)*s,m=(q*d-m*g)*s,c=(l*f-p*c)*s,d=(l*g-p*d)*s,a=a-r*h-c*k,b=b-m*h-d*k,C.save(),C.transform(r,m,c,d,a,b),C.fill(),C.restore())}else n("rgba( 0, 0, 0, 1)"),C.fill()}function g(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=d*d+e*e;0!==f&&(c/=Math.sqrt(f),d*=c,e*=c,b.x+=d,b.y+=e,a.x-=d,a.y-=e)}function h(a){X!==a&&(X=C.globalAlpha=a)}function p(a){V!==a&&(a===c.NormalBlending?C.globalCompositeOperation=
"source-over":a===c.AdditiveBlending?C.globalCompositeOperation="lighter":a===c.SubtractiveBlending&&(C.globalCompositeOperation="darker"),V=a)}function q(a){R!==a&&(R=C.lineWidth=a)}function m(a){ib!==a&&(ib=C.lineCap=a)}function w(a){ga!==a&&(ga=C.lineJoin=a)}function t(a){W!==a&&(W=C.strokeStyle=a)}function n(a){P!==a&&(P=C.fillStyle=a)}function r(a){ea.length!==a.length&&(C.setLineDash(a),ea=a)}console.log("THREE.CanvasRenderer",c.REVISION);var s=c.Math.smoothstep;a=a||{};var x=this,B,z,v,I=new c.Projector,
y=void 0!==a.canvas?a.canvas:document.createElement("canvas"),G=y.width,S=y.height,H=Math.floor(G/2),D=Math.floor(S/2),E=0,N=0,K=G,O=S,M=1,C=y.getContext("2d",{alpha:!0===a.alpha}),J=new c.Color(0),F=!0===a.alpha?0:1,X=1,V=0,W=null,P=null,R=null,ib=null,ga=null,ea=[],Ga,Z,aa,ma;new c.RenderableVertex;new c.RenderableVertex;var ta,oa,Aa,va,L,Ba,ba=new c.Color;new c.Color;new c.Color;new c.Color;new c.Color;var wa=new c.Color,da=new c.Color,ja=new c.Color,$={},ha,ia,ca,xa,ka,ya,pa,za=new c.Box2,Y=new c.Box2,
na=new c.Box2,Ma=new c.Color,Na=new c.Color,Ca=new c.Color,Oa=new c.Vector3,Pa=new c.Vector3,la=new c.Vector3,Da=new c.Matrix3;void 0===C.setLineDash&&(C.setLineDash=function(){});this.domElement=y;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.getContext=function(){return C};this.getContextAttributes=function(){return C.getContextAttributes()};this.getPixelRatio=function(){return M};
this.setPixelRatio=function(a){void 0!==a&&(M=a)};this.setSize=function(a,b,c){G=a*M;S=b*M;y.width=G;y.height=S;H=Math.floor(G/2);D=Math.floor(S/2);!1!==c&&(y.style.width=a+"px",y.style.height=b+"px");za.min.set(-H,-D);za.max.set(H,D);Y.min.set(-H,-D);Y.max.set(H,D);X=1;V=0;ga=ib=R=P=W=null;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){E=a*M;N=b*M;K=c*M;O=d*M};this.setScissor=function(){};this.enableScissorTest=function(){};this.setClearColor=function(a,b){J.set(a);F=void 0!==b?b:
1;Y.min.set(-H,-D);Y.max.set(H,D)};this.setClearColorHex=function(a,b){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return J};this.getClearAlpha=function(){return F};this.getMaxAnisotropy=function(){return 0};this.clear=function(){!1===Y.empty()&&(Y.intersect(za),Y.expandByScalar(2),Y.min.x+=H,Y.min.y=-Y.min.y+D,Y.max.x+=H,Y.max.y=-Y.max.y+D,1>F&&C.clearRect(Y.min.x|0,Y.max.y|0,Y.max.x-
Y.min.x|0,Y.min.y-Y.max.y|0),0<F&&(p(c.NormalBlending),h(1),n("rgba("+Math.floor(255*J.r)+","+Math.floor(255*J.g)+","+Math.floor(255*J.b)+","+F+")"),C.fillRect(Y.min.x|0,Y.max.y|0,Y.max.x-Y.min.x|0,Y.min.y-Y.max.y|0)),Y.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(a,X){if(!1===X instanceof c.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.autoClear&&this.clear();
x.info.render.vertices=0;x.info.render.faces=0;C.setTransform(K/G,0,0,-O/S,E,S-N);C.translate(H,D);B=I.projectScene(a,X,this.sortObjects,this.sortElements);z=B.elements;v=B.lights;Ga=X;Da.getNormalMatrix(X.matrixWorldInverse);Ma.setRGB(0,0,0);Na.setRGB(0,0,0);Ca.setRGB(0,0,0);for(var y=0,V=v.length;y<V;y++){var Q=v[y],J=Q.color;Q instanceof c.AmbientLight?Ma.add(J):Q instanceof c.DirectionalLight?Na.add(J):Q instanceof c.PointLight&&Ca.add(J)}y=0;for(V=z.length;y<V;y++){var T=z[y],M=T.material;if(void 0!==
M&&0!==M.opacity){na.makeEmpty();if(T instanceof c.RenderableSprite){Z=T;Z.x*=H;Z.y*=D;var Q=Z,F=T,J=M;h(J.opacity);p(J.blending);var W=F.scale.x*H,F=F.scale.y*D,T=.5*Math.sqrt(W*W+F*F);na.min.set(Q.x-T,Q.y-T);na.max.set(Q.x+T,Q.y+T);if(J instanceof c.SpriteMaterial){var P=J.map;if(null!==P){T=$[P.id];if(void 0===T||T.version!==P.version)T=e(P),$[P.id]=T;if(void 0!==T.canvas){n(T.canvas);var R=P.image,T=R.width*P.offset.x,M=R.height*P.offset.y,U=R.width*P.repeat.x,P=R.height*P.repeat.y,R=W/U,ga=F/
P;C.save();C.translate(Q.x,Q.y);0!==J.rotation&&C.rotate(J.rotation);C.translate(-W/2,-F/2);C.scale(R,ga);C.translate(-T,-M);C.fillRect(T,M,U,P);C.restore()}}else n(J.color.getStyle()),C.save(),C.translate(Q.x,Q.y),0!==J.rotation&&C.rotate(J.rotation),C.scale(W,-F),C.fillRect(-.5,-.5,1,1),C.restore()}else J instanceof c.SpriteCanvasMaterial&&(t(J.color.getStyle()),n(J.color.getStyle()),C.save(),C.translate(Q.x,Q.y),0!==J.rotation&&C.rotate(J.rotation),C.scale(W,F),J.program(C),C.restore())}else if(T instanceof
c.RenderableLine){if(Z=T.v1,aa=T.v2,Z.positionScreen.x*=H,Z.positionScreen.y*=D,aa.positionScreen.x*=H,aa.positionScreen.y*=D,na.setFromPoints([Z.positionScreen,aa.positionScreen]),!0===za.isIntersectionBox(na))if(Q=Z,J=aa,W=T,F=M,h(F.opacity),p(F.blending),C.beginPath(),C.moveTo(Q.positionScreen.x,Q.positionScreen.y),C.lineTo(J.positionScreen.x,J.positionScreen.y),F instanceof c.LineBasicMaterial){q(F.linewidth);m(F.linecap);w(F.linejoin);if(F.vertexColors!==c.VertexColors)t(F.color.getStyle());
else if(T=W.vertexColors[0].getStyle(),W=W.vertexColors[1].getStyle(),T===W)t(T);else{try{var fa=C.createLinearGradient(Q.positionScreen.x,Q.positionScreen.y,J.positionScreen.x,J.positionScreen.y);fa.addColorStop(0,T);fa.addColorStop(1,W)}catch(ea){fa=T}t(fa)}C.stroke();na.expandByScalar(2*F.linewidth)}else F instanceof c.LineDashedMaterial&&(q(F.linewidth),m(F.linecap),w(F.linejoin),t(F.color.getStyle()),r([F.dashSize,F.gapSize]),C.stroke(),na.expandByScalar(2*F.linewidth),r([]))}else if(T instanceof
c.RenderableFace){Z=T.v1;aa=T.v2;ma=T.v3;if(-1>Z.positionScreen.z||1<Z.positionScreen.z)continue;if(-1>aa.positionScreen.z||1<aa.positionScreen.z)continue;if(-1>ma.positionScreen.z||1<ma.positionScreen.z)continue;Z.positionScreen.x*=H;Z.positionScreen.y*=D;aa.positionScreen.x*=H;aa.positionScreen.y*=D;ma.positionScreen.x*=H;ma.positionScreen.y*=D;0<M.overdraw&&(g(Z.positionScreen,aa.positionScreen,M.overdraw),g(aa.positionScreen,ma.positionScreen,M.overdraw),g(ma.positionScreen,Z.positionScreen,M.overdraw));
na.setFromPoints([Z.positionScreen,aa.positionScreen,ma.positionScreen]);if(!0===za.isIntersectionBox(na)){J=Z;W=aa;F=ma;Q=M;x.info.render.vertices+=3;x.info.render.faces++;h(Q.opacity);p(Q.blending);ta=J.positionScreen.x;oa=J.positionScreen.y;Aa=W.positionScreen.x;va=W.positionScreen.y;L=F.positionScreen.x;Ba=F.positionScreen.y;var M=ta,U=oa,P=Aa,R=va,ga=L,ra=Ba;C.beginPath();C.moveTo(M,U);C.lineTo(P,R);C.lineTo(ga,ra);C.closePath();if((Q instanceof c.MeshLambertMaterial||Q instanceof c.MeshPhongMaterial)&&
null===Q.map){wa.copy(Q.color);da.copy(Q.emissive);Q.vertexColors===c.FaceColors&&wa.multiply(T.color);ba.copy(Ma);Pa.copy(J.positionWorld).add(W.positionWorld).add(F.positionWorld).divideScalar(3);J=Pa;W=T.normalModel;F=ba;T=0;for(M=v.length;T<M;T++)U=v[T],ja.copy(U.color),U instanceof c.DirectionalLight?(P=Oa.setFromMatrixPosition(U.matrixWorld).normalize(),R=W.dot(P),0>=R||(R*=U.intensity,F.add(ja.multiplyScalar(R)))):U instanceof c.PointLight&&(P=Oa.setFromMatrixPosition(U.matrixWorld),R=W.dot(Oa.subVectors(P,
J).normalize()),0>=R||(R*=0==U.distance?1:1-Math.min(J.distanceTo(P)/U.distance,1),0!=R&&(R*=U.intensity,F.add(ja.multiplyScalar(R)))));ba.multiply(wa).add(da);!0===Q.wireframe?b(ba,Q.wireframeLinewidth,Q.wireframeLinecap,Q.wireframeLinejoin):d(ba)}else Q instanceof c.MeshBasicMaterial||Q instanceof c.MeshLambertMaterial||Q instanceof c.MeshPhongMaterial?null!==Q.map?Q.map.mapping===c.UVMapping&&(ha=T.uvs,f(ta,oa,Aa,va,L,Ba,ha[0].x,ha[0].y,ha[1].x,ha[1].y,ha[2].x,ha[2].y,Q.map)):null!==Q.envMap?Q.envMap.mapping===
c.SphericalReflectionMapping&&(la.copy(T.vertexNormalsModel[0]).applyMatrix3(Da),ia=.5*la.x+.5,ca=.5*la.y+.5,la.copy(T.vertexNormalsModel[1]).applyMatrix3(Da),xa=.5*la.x+.5,ka=.5*la.y+.5,la.copy(T.vertexNormalsModel[2]).applyMatrix3(Da),ya=.5*la.x+.5,pa=.5*la.y+.5,f(ta,oa,Aa,va,L,Ba,ia,ca,xa,ka,ya,pa,Q.envMap)):(ba.copy(Q.color),Q.vertexColors===c.FaceColors&&ba.multiply(T.color),!0===Q.wireframe?b(ba,Q.wireframeLinewidth,Q.wireframeLinecap,Q.wireframeLinejoin):d(ba)):(Q instanceof c.MeshDepthMaterial?
ba.r=ba.g=ba.b=1-s(J.positionScreen.z*J.positionScreen.w,Ga.near,Ga.far):Q instanceof c.MeshNormalMaterial?(la.copy(T.normalModel).applyMatrix3(Da),ba.setRGB(la.x,la.y,la.z).multiplyScalar(.5).addScalar(.5)):ba.setRGB(1,1,1),!0===Q.wireframe?b(ba,Q.wireframeLinewidth,Q.wireframeLinecap,Q.wireframeLinejoin):d(ba))}}Y.union(na)}}C.setTransform(1,0,0,1,0,0)}}};c.TrackballControls=function(a,b){function d(a){!1!==n.enabled&&(window.removeEventListener("keydown",d),B=x,x===r.NONE)&&(a.keyCode!==n.keys[r.ROTATE]||
n.noRotate?a.keyCode!==n.keys[r.ZOOM]||n.noZoom?a.keyCode!==n.keys[r.PAN]||n.noPan||(x=r.PAN):x=r.ZOOM:x=r.ROTATE)}function e(a){!1!==n.enabled&&(x=B,window.addEventListener("keydown",d,!1))}function f(a){!1!==n.enabled&&(a.preventDefault(),a.stopPropagation(),x===r.NONE&&(x=a.button),x!==r.ROTATE||n.noRotate?x!==r.ZOOM||n.noZoom?x!==r.PAN||n.noPan||(N.copy(J(a.pageX,a.pageY)),K.copy(N)):(F.copy(J(a.pageX,a.pageY)),H.copy(F)):(I.copy(P(a.pageX,a.pageY)),v.copy(I)),document.addEventListener("mousemove",
g,!1),document.addEventListener("mouseup",h,!1),n.dispatchEvent(M))}function g(a){!1!==n.enabled&&(a.preventDefault(),a.stopPropagation(),x!==r.ROTATE||n.noRotate?x!==r.ZOOM||n.noZoom?x!==r.PAN||n.noPan||K.copy(J(a.pageX,a.pageY)):H.copy(J(a.pageX,a.pageY)):(v.copy(I),I.copy(P(a.pageX,a.pageY))))}function h(a){!1!==n.enabled&&(a.preventDefault(),a.stopPropagation(),x=r.NONE,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h),n.dispatchEvent(C))}function p(a){if(!1!==
n.enabled){a.preventDefault();a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail/3);F.y+=.01*b;n.dispatchEvent(M);n.dispatchEvent(C)}}function q(a){if(!1!==n.enabled){switch(a.touches.length){case 1:x=r.TOUCH_ROTATE;I.copy(P(a.touches[0].pageX,a.touches[0].pageY));v.copy(I);break;case 2:x=r.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;E=D=Math.sqrt(b*b+c*c);N.copy(J((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+
a.touches[1].pageY)/2));K.copy(N);break;default:x=r.NONE}n.dispatchEvent(M)}}function m(a){if(!1!==n.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:v.copy(I);I.copy(P(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;E=Math.sqrt(b*b+c*c);K.copy(J((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));break;default:x=r.NONE}}function w(a){if(!1!==n.enabled){switch(a.touches.length){case 1:v.copy(I);
I.copy(P(a.touches[0].pageX,a.touches[0].pageY));break;case 2:D=E=0,K.copy(J((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2)),N.copy(K)}x=r.NONE;n.dispatchEvent(C)}}function t(a){a.preventDefault()}var n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.rotateSpeed=1;this.zoomSpeed=1.2;this.panSpeed=.3;this.staticMoving=this.noPan=
this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=.2;this.minDistance=0;this.maxDistance=Infinity;this.keys=[65,83,68];this.target=new c.Vector3;var s=new c.Vector3,x=r.NONE,B=r.NONE,z=new c.Vector3,v=new c.Vector2,I=new c.Vector2,y=new c.Vector3,G=0,F=new c.Vector2,H=new c.Vector2,D=0,E=0,N=new c.Vector2,K=new c.Vector2;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=this.object.up.clone();var O={type:"change"},M={type:"start"},C={type:"end"};this.handleResize=
function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft;this.screen.top=a.top+window.pageYOffset-b.clientTop;this.screen.width=a.width;this.screen.height=a.height}};this.handleEvent=function(a){if("function"==typeof this[a.type])this[a.type](a)};var J=
function(){var a=new c.Vector2;return function(b,c){a.set((b-n.screen.left)/n.screen.width,(c-n.screen.top)/n.screen.height);return a}}(),P=function(){var a=new c.Vector2;return function(b,c){a.set((b-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-c))/n.screen.width);return a}}();this.rotateCamera=function(){var a=new c.Vector3,b=new c.Quaternion,d=new c.Vector3,e=new c.Vector3,f=new c.Vector3,g=new c.Vector3,h;return function(){g.set(I.x-v.x,I.y-v.y,0);(h=g.length())?
(z.copy(n.object.position).sub(n.target),d.copy(z).normalize(),e.copy(n.object.up).normalize(),f.crossVectors(e,d).normalize(),e.setLength(I.y-v.y),f.setLength(I.x-v.x),g.copy(e.add(f)),a.crossVectors(g,z).normalize(),h*=n.rotateSpeed,b.setFromAxisAngle(a,h),z.applyQuaternion(b),n.object.up.applyQuaternion(b),y.copy(a),G=h):!n.staticMoving&&G&&(G*=Math.sqrt(1-n.dynamicDampingFactor),z.copy(n.object.position).sub(n.target),b.setFromAxisAngle(y,G),z.applyQuaternion(b),n.object.up.applyQuaternion(b));
v.copy(I)}}();this.zoomCamera=function(){var a;x===r.TOUCH_ZOOM_PAN?(a=D/E,D=E,z.multiplyScalar(a)):(a=1+(H.y-F.y)*n.zoomSpeed,1!==a&&0<a&&(z.multiplyScalar(a),n.staticMoving?F.copy(H):F.y+=(H.y-F.y)*this.dynamicDampingFactor))};this.panCamera=function(){var a=new c.Vector2,b=new c.Vector3,d=new c.Vector3;return function(){a.copy(K).sub(N);a.lengthSq()&&(a.multiplyScalar(z.length()*n.panSpeed),d.copy(z).cross(n.object.up).setLength(a.x),d.add(b.copy(n.object.up).setLength(a.y)),n.object.position.add(d),
n.target.add(d),n.staticMoving?N.copy(K):N.add(a.subVectors(K,N).multiplyScalar(n.dynamicDampingFactor)))}}();this.checkDistances=function(){n.noZoom&&n.noPan||(z.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,z.setLength(n.maxDistance)),F.copy(H)),z.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,z.setLength(n.minDistance)),F.copy(H)))};this.update=function(){z.subVectors(n.object.position,n.target);n.noRotate||n.rotateCamera();n.noZoom||
n.zoomCamera();n.noPan||n.panCamera();n.object.position.addVectors(n.target,z);n.checkDistances();n.object.lookAt(n.target);1E-6<s.distanceToSquared(n.object.position)&&(n.dispatchEvent(O),s.copy(n.object.position))};this.reset=function(){B=x=r.NONE;n.target.copy(n.target0);n.object.position.copy(n.position0);n.object.up.copy(n.up0);z.subVectors(n.object.position,n.target);n.object.lookAt(n.target);n.dispatchEvent(O);s.copy(n.object.position)};this.dispose=function(){this.domElement.removeEventListener("contextmenu",
t,!1);this.domElement.removeEventListener("mousedown",f,!1);this.domElement.removeEventListener("mousewheel",p,!1);this.domElement.removeEventListener("DOMMouseScroll",p,!1);this.domElement.removeEventListener("touchstart",q,!1);this.domElement.removeEventListener("touchend",w,!1);this.domElement.removeEventListener("touchmove",m,!1);document.removeEventListener("mousemove",g,!1);document.removeEventListener("mouseup",h,!1);window.removeEventListener("keydown",d,!1);window.removeEventListener("keyup",
e,!1)};this.domElement.addEventListener("contextmenu",t,!1);this.domElement.addEventListener("mousedown",f,!1);this.domElement.addEventListener("mousewheel",p,!1);this.domElement.addEventListener("DOMMouseScroll",p,!1);this.domElement.addEventListener("touchstart",q,!1);this.domElement.addEventListener("touchend",w,!1);this.domElement.addEventListener("touchmove",m,!1);window.addEventListener("keydown",d,!1);window.addEventListener("keyup",e,!1);this.handleResize();this.update()};c.TrackballControls.prototype=
Object.create(c.EventDispatcher.prototype);c.TrackballControls.prototype.constructor=c.TrackballControls;c.SphereGeometry=function(a,b,d,e,f,g,h){c.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:d,phiStart:e,phiLength:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new c.SphereBufferGeometry(a,b,d,e,f,g,h))};c.SphereGeometry.prototype=Object.create(c.Geometry.prototype);c.SphereGeometry.prototype.constructor=c.SphereGeometry;c.SphereGeometry.prototype.clone=
function(){return new c.SphereGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength)};c.SphereBufferGeometry=function(a,b,d,e,f,g,h){c.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:d,phiStart:e,phiLength:f,thetaStart:g,thetaLength:h};a=a||50;b=Math.max(3,Math.floor(b)||8);d=Math.max(2,
Math.floor(d)||6);e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;g=void 0!==g?g:0;h=void 0!==h?h:Math.PI;for(var p=g+h,q=(b+1)*(d+1),m=new c.BufferAttribute(new Float32Array(3*q),3),w=new c.BufferAttribute(new Float32Array(3*q),3),q=new c.BufferAttribute(new Float32Array(2*q),2),t=0,n=[],r=new c.Vector3,s=0;s<=d;s++){for(var x=[],B=s/d,z=0;z<=b;z++){var v=z/b,I=-a*Math.cos(e+v*f)*Math.sin(g+B*h),y=a*Math.cos(g+B*h),G=a*Math.sin(e+v*f)*Math.sin(g+B*h);r.set(I,y,G).normalize();m.setXYZ(t,I,y,G);w.setXYZ(t,
r.x,r.y,r.z);q.setXY(t,v,1-B);x.push(t);t++}n.push(x)}e=[];for(s=0;s<d;s++)for(z=0;z<b;z++)f=n[s][z+1],h=n[s][z],t=n[s+1][z],r=n[s+1][z+1],(0!==s||0<g)&&e.push(f,h,r),(s!==d-1||p<Math.PI)&&e.push(h,t,r);this.setIndex(new c.BufferAttribute(new Uint16Array(e),1));this.addAttribute("position",m);this.addAttribute("normal",w);this.addAttribute("uv",q);this.boundingSphere=new c.Sphere(new c.Vector3,a)};c.SphereBufferGeometry.prototype=Object.create(c.BufferGeometry.prototype);c.SphereBufferGeometry.prototype.constructor=
c.SphereBufferGeometry;c.SphereBufferGeometry.prototype.clone=function(){var a=new c.SphereBufferGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength);a.copy(this);return a};c.CylinderGeometry=function(a,b,d,e,f,g,h,p){c.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:d,radialSegments:e,heightSegments:f,
openEnded:g,thetaStart:h,thetaLength:p};a=void 0!==a?a:20;b=void 0!==b?b:20;d=void 0!==d?d:100;e=e||8;f=f||1;g=void 0!==g?g:!1;h=void 0!==h?h:0;p=void 0!==p?p:2*Math.PI;var q=d/2,m,w,t=[],n=[];for(w=0;w<=f;w++){var r=[],s=[],x=w/f,B=x*(b-a)+a;for(m=0;m<=e;m++){var z=m/e,v=new c.Vector3;v.x=B*Math.sin(z*p+h);v.y=-x*d+q;v.z=B*Math.cos(z*p+h);this.vertices.push(v);r.push(this.vertices.length-1);s.push(new c.Vector2(z,1-x))}t.push(r);n.push(s)}d=(b-a)/d;for(m=0;m<e;m++)for(0!==a?(h=this.vertices[t[0][m]].clone(),
p=this.vertices[t[0][m+1]].clone()):(h=this.vertices[t[1][m]].clone(),p=this.vertices[t[1][m+1]].clone()),h.setY(Math.sqrt(h.x*h.x+h.z*h.z)*d).normalize(),p.setY(Math.sqrt(p.x*p.x+p.z*p.z)*d).normalize(),w=0;w<f;w++){var r=t[w][m],s=t[w+1][m],x=t[w+1][m+1],B=t[w][m+1],z=h.clone(),v=h.clone(),I=p.clone(),y=p.clone(),G=n[w][m].clone(),F=n[w+1][m].clone(),H=n[w+1][m+1].clone(),D=n[w][m+1].clone();this.faces.push(new c.Face3(r,s,B,[z,v,y]));this.faceVertexUvs[0].push([G,F,D]);this.faces.push(new c.Face3(s,
x,B,[v.clone(),I,y.clone()]));this.faceVertexUvs[0].push([F.clone(),H,D.clone()])}if(!1===g&&0<a)for(this.vertices.push(new c.Vector3(0,q,0)),m=0;m<e;m++)r=t[0][m],s=t[0][m+1],x=this.vertices.length-1,z=new c.Vector3(0,1,0),v=new c.Vector3(0,1,0),I=new c.Vector3(0,1,0),G=n[0][m].clone(),F=n[0][m+1].clone(),H=new c.Vector2(F.x,0),this.faces.push(new c.Face3(r,s,x,[z,v,I],void 0,1)),this.faceVertexUvs[0].push([G,F,H]);if(!1===g&&0<b)for(this.vertices.push(new c.Vector3(0,-q,0)),m=0;m<e;m++)r=t[f][m+
1],s=t[f][m],x=this.vertices.length-1,z=new c.Vector3(0,-1,0),v=new c.Vector3(0,-1,0),I=new c.Vector3(0,-1,0),G=n[f][m+1].clone(),F=n[f][m].clone(),H=new c.Vector2(F.x,1),this.faces.push(new c.Face3(r,s,x,[z,v,I],void 0,2)),this.faceVertexUvs[0].push([G,F,H]);this.computeFaceNormals()};c.CylinderGeometry.prototype=Object.create(c.Geometry.prototype);c.CylinderGeometry.prototype.constructor=c.CylinderGeometry;c.CylinderGeometry.prototype.clone=function(){return new c.CylinderGeometry(this.parameters.radiusTop,
this.parameters.radiusBottom,this.parameters.height,this.parameters.radialSegments,this.parameters.heightSegments,this.parameters.openEnded,this.parameters.thetaStart,this.parameters.thetaLength)};c.ArrowHelper=function(){var a=new c.Geometry;a.vertices.push(new c.Vector3(0,0,0),new c.Vector3(0,1,0));var b=new c.CylinderGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(d,e,f,g,h,p){c.Object3D.call(this);void 0===g&&(g=16776960);void 0===f&&(f=1);void 0===h&&(h=.2*f);void 0===p&&(p=.2*h);this.position.copy(e);
h<f&&(this.line=new c.Line(a,new c.LineBasicMaterial({color:g})),this.line.matrixAutoUpdate=!1,this.add(this.line));this.cone=new c.Mesh(b,new c.MeshBasicMaterial({color:g}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(d);this.setLength(f,h,p)}}();c.ArrowHelper.prototype=Object.create(c.Object3D.prototype);c.ArrowHelper.prototype.constructor=c.ArrowHelper;c.ArrowHelper.prototype.setDirection=function(){var a=new c.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,
0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();c.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);b<a&&(this.line.scale.set(1,a-b,1),this.line.updateMatrix());this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};c.ArrowHelper.prototype.setColor=function(a){void 0!==this.line&&this.line.material.color.set(a);this.cone.material.color.set(a)};h.THREE=
c})},function(P,R,F){var q;!(q=function(){function h(){if(!d){d=!0;a&&clearInterval(a);var b=f;if(d&&b.length){f=[];var c;for(c=0;c<b.length;c+=1)b[c](e)}}}function g(a){d?a(e):f.push(a);return g}var p,c,a,b="undefined"!==typeof window&&window.document,d=!b,e=b?document:null,f=[];if(b){if(document.addEventListener)document.addEventListener("DOMContentLoaded",h,!1),window.addEventListener("load",h,!1);else if(window.attachEvent){window.attachEvent("onload",h);c=document.createElement("div");try{p=
null===window.frameElement}catch(l){}c.doScroll&&p&&window.external&&(a=setInterval(function(){try{c.doScroll(),h()}catch(a){}},30))}"complete"===document.readyState&&h()}g.version="2.0.1";g.load=function(a,b,c,d){d.isBuild?c(null):g(c)};return g}.call(R,F,R,P),void 0!==q&&(P.exports=q))}]);
</script>
</body>
</html>
